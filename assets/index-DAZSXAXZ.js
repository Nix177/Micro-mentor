(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function nv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jd={exports:{}},Qa={},Ud={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function VT(){if(sy)return Ae;sy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,B={};function L(O,Q,Se){this.props=O,this.context=Q,this.refs=B,this.updater=Se||k}L.prototype.isReactComponent={},L.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},L.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function J(){}J.prototype=L.prototype;function Z(O,Q,Se){this.props=O,this.context=Q,this.refs=B,this.updater=Se||k}var K=Z.prototype=new J;K.constructor=Z,F(K,L.prototype),K.isPureReactComponent=!0;var ue=Array.isArray,me=Object.prototype.hasOwnProperty,se={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function S(O,Q,Se){var Re,Ce={},ke=null,Ue=null;if(Q!=null)for(Re in Q.ref!==void 0&&(Ue=Q.ref),Q.key!==void 0&&(ke=""+Q.key),Q)me.call(Q,Re)&&!P.hasOwnProperty(Re)&&(Ce[Re]=Q[Re]);var Le=arguments.length-2;if(Le===1)Ce.children=Se;else if(1<Le){for(var $e=Array(Le),Ht=0;Ht<Le;Ht++)$e[Ht]=arguments[Ht+2];Ce.children=$e}if(O&&O.defaultProps)for(Re in Le=O.defaultProps,Le)Ce[Re]===void 0&&(Ce[Re]=Le[Re]);return{$$typeof:n,type:O,key:ke,ref:Ue,props:Ce,_owner:se.current}}function C(O,Q){return{$$typeof:n,type:O.type,key:Q,ref:O.ref,props:O.props,_owner:O._owner}}function b(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function D(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Se){return Q[Se]})}var M=/\/+/g;function A(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):Q.toString(36)}function He(O,Q,Se,Re,Ce){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var Ue=!1;if(O===null)Ue=!0;else switch(ke){case"string":case"number":Ue=!0;break;case"object":switch(O.$$typeof){case n:case e:Ue=!0}}if(Ue)return Ue=O,Ce=Ce(Ue),O=Re===""?"."+A(Ue,0):Re,ue(Ce)?(Se="",O!=null&&(Se=O.replace(M,"$&/")+"/"),He(Ce,Q,Se,"",function(Ht){return Ht})):Ce!=null&&(b(Ce)&&(Ce=C(Ce,Se+(!Ce.key||Ue&&Ue.key===Ce.key?"":(""+Ce.key).replace(M,"$&/")+"/")+O)),Q.push(Ce)),1;if(Ue=0,Re=Re===""?".":Re+":",ue(O))for(var Le=0;Le<O.length;Le++){ke=O[Le];var $e=Re+A(ke,Le);Ue+=He(ke,Q,Se,$e,Ce)}else if($e=x(O),typeof $e=="function")for(O=$e.call(O),Le=0;!(ke=O.next()).done;)ke=ke.value,$e=Re+A(ke,Le++),Ue+=He(ke,Q,Se,$e,Ce);else if(ke==="object")throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Ue}function xt(O,Q,Se){if(O==null)return O;var Re=[],Ce=0;return He(O,Re,"","",function(ke){return Q.call(Se,ke,Ce++)}),Re}function Lt(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(Se){(O._status===0||O._status===-1)&&(O._status=1,O._result=Se)},function(Se){(O._status===0||O._status===-1)&&(O._status=2,O._result=Se)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var Xe={current:null},re={transition:null},ge={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:re,ReactCurrentOwner:se};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:xt,forEach:function(O,Q,Se){xt(O,function(){Q.apply(this,arguments)},Se)},count:function(O){var Q=0;return xt(O,function(){Q++}),Q},toArray:function(O){return xt(O,function(Q){return Q})||[]},only:function(O){if(!b(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ae.Component=L,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=Z,Ae.StrictMode=s,Ae.Suspense=g,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ae.act=le,Ae.cloneElement=function(O,Q,Se){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Re=F({},O.props),Ce=O.key,ke=O.ref,Ue=O._owner;if(Q!=null){if(Q.ref!==void 0&&(ke=Q.ref,Ue=se.current),Q.key!==void 0&&(Ce=""+Q.key),O.type&&O.type.defaultProps)var Le=O.type.defaultProps;for($e in Q)me.call(Q,$e)&&!P.hasOwnProperty($e)&&(Re[$e]=Q[$e]===void 0&&Le!==void 0?Le[$e]:Q[$e])}var $e=arguments.length-2;if($e===1)Re.children=Se;else if(1<$e){Le=Array($e);for(var Ht=0;Ht<$e;Ht++)Le[Ht]=arguments[Ht+2];Re.children=Le}return{$$typeof:n,type:O.type,key:Ce,ref:ke,props:Re,_owner:Ue}},Ae.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},Ae.createElement=S,Ae.createFactory=function(O){var Q=S.bind(null,O);return Q.type=O,Q},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(O){return{$$typeof:f,render:O}},Ae.isValidElement=b,Ae.lazy=function(O){return{$$typeof:w,_payload:{_status:-1,_result:O},_init:Lt}},Ae.memo=function(O,Q){return{$$typeof:y,type:O,compare:Q===void 0?null:Q}},Ae.startTransition=function(O){var Q=re.transition;re.transition={};try{O()}finally{re.transition=Q}},Ae.unstable_act=le,Ae.useCallback=function(O,Q){return Xe.current.useCallback(O,Q)},Ae.useContext=function(O){return Xe.current.useContext(O)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(O){return Xe.current.useDeferredValue(O)},Ae.useEffect=function(O,Q){return Xe.current.useEffect(O,Q)},Ae.useId=function(){return Xe.current.useId()},Ae.useImperativeHandle=function(O,Q,Se){return Xe.current.useImperativeHandle(O,Q,Se)},Ae.useInsertionEffect=function(O,Q){return Xe.current.useInsertionEffect(O,Q)},Ae.useLayoutEffect=function(O,Q){return Xe.current.useLayoutEffect(O,Q)},Ae.useMemo=function(O,Q){return Xe.current.useMemo(O,Q)},Ae.useReducer=function(O,Q,Se){return Xe.current.useReducer(O,Q,Se)},Ae.useRef=function(O){return Xe.current.useRef(O)},Ae.useState=function(O){return Xe.current.useState(O)},Ae.useSyncExternalStore=function(O,Q,Se){return Xe.current.useSyncExternalStore(O,Q,Se)},Ae.useTransition=function(){return Xe.current.useTransition()},Ae.version="18.3.1",Ae}var iy;function Bf(){return iy||(iy=1,Ud.exports=VT()),Ud.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function LT(){if(oy)return Qa;oy=1;var n=Bf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,g,y){var w,T={},x=null,k=null;y!==void 0&&(x=""+y),g.key!==void 0&&(x=""+g.key),g.ref!==void 0&&(k=g.ref);for(w in g)s.call(g,w)&&!l.hasOwnProperty(w)&&(T[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)T[w]===void 0&&(T[w]=g[w]);return{$$typeof:e,type:f,key:x,ref:k,props:T,_owner:o.current}}return Qa.Fragment=t,Qa.jsx=c,Qa.jsxs=c,Qa}var ay;function OT(){return ay||(ay=1,jd.exports=LT()),jd.exports}var _=OT(),$=Bf();const MT=nv($);var nc={},Fd={exports:{}},en={},Bd={exports:{}},zd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function jT(){return ly||(ly=1,(function(n){function e(re,ge){var le=re.length;re.push(ge);e:for(;0<le;){var O=le-1>>>1,Q=re[O];if(0<o(Q,ge))re[O]=ge,re[le]=Q,le=O;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var ge=re[0],le=re.pop();if(le!==ge){re[0]=le;e:for(var O=0,Q=re.length,Se=Q>>>1;O<Se;){var Re=2*(O+1)-1,Ce=re[Re],ke=Re+1,Ue=re[ke];if(0>o(Ce,le))ke<Q&&0>o(Ue,Ce)?(re[O]=Ue,re[ke]=le,O=ke):(re[O]=Ce,re[Re]=le,O=Re);else if(ke<Q&&0>o(Ue,le))re[O]=Ue,re[ke]=le,O=ke;else break e}}return ge}function o(re,ge){var le=re.sortIndex-ge.sortIndex;return le!==0?le:re.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var g=[],y=[],w=1,T=null,x=3,k=!1,F=!1,B=!1,L=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(re){for(var ge=t(y);ge!==null;){if(ge.callback===null)s(y);else if(ge.startTime<=re)s(y),ge.sortIndex=ge.expirationTime,e(g,ge);else break;ge=t(y)}}function ue(re){if(B=!1,K(re),!F)if(t(g)!==null)F=!0,Lt(me);else{var ge=t(y);ge!==null&&Xe(ue,ge.startTime-re)}}function me(re,ge){F=!1,B&&(B=!1,J(S),S=-1),k=!0;var le=x;try{for(K(ge),T=t(g);T!==null&&(!(T.expirationTime>ge)||re&&!D());){var O=T.callback;if(typeof O=="function"){T.callback=null,x=T.priorityLevel;var Q=O(T.expirationTime<=ge);ge=n.unstable_now(),typeof Q=="function"?T.callback=Q:T===t(g)&&s(g),K(ge)}else s(g);T=t(g)}if(T!==null)var Se=!0;else{var Re=t(y);Re!==null&&Xe(ue,Re.startTime-ge),Se=!1}return Se}finally{T=null,x=le,k=!1}}var se=!1,P=null,S=-1,C=5,b=-1;function D(){return!(n.unstable_now()-b<C)}function M(){if(P!==null){var re=n.unstable_now();b=re;var ge=!0;try{ge=P(!0,re)}finally{ge?A():(se=!1,P=null)}}else se=!1}var A;if(typeof Z=="function")A=function(){Z(M)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,xt=He.port2;He.port1.onmessage=M,A=function(){xt.postMessage(null)}}else A=function(){L(M,0)};function Lt(re){P=re,se||(se=!0,A())}function Xe(re,ge){S=L(function(){re(n.unstable_now())},ge)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){F||k||(F=!0,Lt(me))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(g)},n.unstable_next=function(re){switch(x){case 1:case 2:case 3:var ge=3;break;default:ge=x}var le=x;x=ge;try{return re()}finally{x=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,ge){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var le=x;x=re;try{return ge()}finally{x=le}},n.unstable_scheduleCallback=function(re,ge,le){var O=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?O+le:O):le=O,re){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=le+Q,re={id:w++,callback:ge,priorityLevel:re,startTime:le,expirationTime:Q,sortIndex:-1},le>O?(re.sortIndex=le,e(y,re),t(g)===null&&re===t(y)&&(B?(J(S),S=-1):B=!0,Xe(ue,le-O))):(re.sortIndex=Q,e(g,re),F||k||(F=!0,Lt(me))),re},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(re){var ge=x;return function(){var le=x;x=ge;try{return re.apply(this,arguments)}finally{x=le}}}})(zd)),zd}var uy;function UT(){return uy||(uy=1,Bd.exports=jT()),Bd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function FT(){if(cy)return en;cy=1;var n=Bf(),e=UT();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function x(r){return g.call(T,r)?!0:g.call(w,r)?!1:y.test(r)?T[r]=!0:(w[r]=!0,!1)}function k(r,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function F(r,i,a,h){if(i===null||typeof i>"u"||k(r,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function B(r,i,a,h,d,p,E){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=p,this.removeEmptyString=E}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new B(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];L[i]=new B(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new B(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new B(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new B(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new B(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new B(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new B(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new B(r,5,!1,r.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function Z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(J,Z);L[i]=new B(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(J,Z);L[i]=new B(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(J,Z);L[i]=new B(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new B(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new B(r,1,!1,r.toLowerCase(),null,!0,!0)});function K(r,i,a,h){var d=L.hasOwnProperty(i)?L[i]:null;(d!==null?d.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(F(i,a,d,h)&&(a=null),h||d===null?x(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,h=d.attributeNamespace,a===null?r.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?r.setAttributeNS(h,i,a):r.setAttribute(i,a))))}var ue=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),se=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Xe=Symbol.for("react.offscreen"),re=Symbol.iterator;function ge(r){return r===null||typeof r!="object"?null:(r=re&&r[re]||r["@@iterator"],typeof r=="function"?r:null)}var le=Object.assign,O;function Q(r){if(O===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+r}var Se=!1;function Re(r,i){if(!r||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(q){var h=q}Reflect.construct(r,[],i)}else{try{i.call()}catch(q){h=q}r.call(i.prototype)}else{try{throw Error()}catch(q){h=q}r()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var d=q.stack.split(`
`),p=h.stack.split(`
`),E=d.length-1,R=p.length-1;1<=E&&0<=R&&d[E]!==p[R];)R--;for(;1<=E&&0<=R;E--,R--)if(d[E]!==p[R]){if(E!==1||R!==1)do if(E--,R--,0>R||d[E]!==p[R]){var N=`
`+d[E].replace(" at new "," at ");return r.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",r.displayName)),N}while(1<=E&&0<=R);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Q(r):""}function Ce(r){switch(r.tag){case 5:return Q(r.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return r=Re(r.type,!1),r;case 11:return r=Re(r.type.render,!1),r;case 1:return r=Re(r.type,!0),r;default:return""}}function ke(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case se:return"Portal";case C:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case He:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case D:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case M:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case xt:return i=r.displayName||null,i!==null?i:ke(r.type)||"Memo";case Lt:i=r._payload,r=r._init;try{return ke(r(i))}catch{}}return null}function Ue(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Le(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function $e(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ht(r){var i=$e(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return d.call(this)},set:function(E){h=""+E,p.call(this,E)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Oi(r){r._valueTracker||(r._valueTracker=Ht(r))}function ta(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return r&&(h=$e(r)?r.checked?"true":"false":r.value),r=h,r!==a?(i.setValue(r),!0):!1}function qr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Mi(r,i){var a=i.checked;return le({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Bl(r,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=Le(i.value!=null?i.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ji(r,i){i=i.checked,i!=null&&K(r,"checked",i,!1)}function Hs(r,i){ji(r,i);var a=Le(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?pt(r,i.type,a):i.hasOwnProperty("defaultValue")&&pt(r,i.type,Le(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function na(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function pt(r,i,a){(i!=="number"||qr(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var lt=Array.isArray;function Rn(r,i,a,h){if(r=r.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=i.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&h&&(r[a].defaultSelected=!0)}else{for(a=""+Le(a),i=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}i!==null||r[d].disabled||(i=r[d])}i!==null&&(i.selected=!0)}}function ra(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function sa(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(lt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:Le(a)}}function zl(r,i){var a=Le(i.value),h=Le(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function Hr(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function ia(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ui(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?ia(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Wr,$l=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,d){MSApp.execUnsafeLocalFunction(function(){return r(i,a,h,d)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Wr=Wr||document.createElement("div"),Wr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Wr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Ws(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var Gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ql=["Webkit","ms","Moz","O"];Object.keys(Gr).forEach(function(r){ql.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Gr[i]=Gr[r]})});function Kr(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Gr.hasOwnProperty(r)&&Gr[r]?(""+i).trim():i+"px"}function Fi(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=Kr(a,i[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,d):r[a]=d}}var oa=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function An(r,i){if(i){if(oa[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Bi(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function zi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var gr=null,yr=null,st=null;function aa(r){if(r=Va(r)){if(typeof gr!="function")throw Error(t(280));var i=r.stateNode;i&&(i=yu(i),gr(r.stateNode,r.type,i))}}function Jr(r){yr?st?st.push(r):st=[r]:yr=r}function Yr(){if(yr){var r=yr,i=st;if(st=yr=null,aa(r),i)for(r=0;r<i.length;r++)aa(i[r])}}function Hl(r,i){return r(i)}function Wl(){}var Un=!1;function Gl(r,i,a){if(Un)return r(i,a);Un=!0;try{return Hl(r,i,a)}finally{Un=!1,(yr!==null||st!==null)&&(Wl(),Yr())}}function Gs(r,i){var a=r.stateNode;if(a===null)return null;var h=yu(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Xr=!1;if(f)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{Xr=!1}function Kl(r,i,a,h,d,p,E,R,N){var q=Array.prototype.slice.call(arguments,3);try{i.apply(a,q)}catch(X){this.onError(X)}}var _r=!1,Fn=null,$i=!1,mn=null,Ql={onError:function(r){_r=!0,Fn=r}};function Jl(r,i,a,h,d,p,E,R,N){_r=!1,Fn=null,Kl.apply(Ql,arguments)}function la(r,i,a,h,d,p,E,R,N){if(Jl.apply(this,arguments),_r){if(_r){var q=Fn;_r=!1,Fn=null}else throw Error(t(198));$i||($i=!0,mn=q)}}function Cn(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function ua(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Yl(r){if(Cn(r)!==r)throw Error(t(188))}function Xl(r){var i=r.alternate;if(!i){if(i=Cn(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,h=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Yl(d),r;if(p===h)return Yl(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=p;else{for(var E=!1,R=d.child;R;){if(R===a){E=!0,a=d,h=p;break}if(R===h){E=!0,h=d,a=p;break}R=R.sibling}if(!E){for(R=p.child;R;){if(R===a){E=!0,a=p,h=d;break}if(R===h){E=!0,h=p,a=d;break}R=R.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function Zl(r){return r=Xl(r),r!==null?Ks(r):null}function Ks(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Ks(r);if(i!==null)return i;r=r.sibling}return null}var ca=e.unstable_scheduleCallback,qi=e.unstable_cancelCallback,Qs=e.unstable_shouldYield,vr=e.unstable_requestPaint,Ke=e.unstable_now,mh=e.unstable_getCurrentPriorityLevel,Hi=e.unstable_ImmediatePriority,ha=e.unstable_UserBlockingPriority,Js=e.unstable_NormalPriority,da=e.unstable_LowPriority,Wi=e.unstable_IdlePriority,Ys=null,rn=null;function eu(r){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Ys,r,void 0,(r.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:Xs,Bn=Math.log,gn=Math.LN2;function Xs(r){return r>>>=0,r===0?32:31-(Bn(r)/gn|0)|0}var zn=64,es=4194304;function je(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function wr(r,i){var a=r.pendingLanes;if(a===0)return 0;var h=0,d=r.suspendedLanes,p=r.pingedLanes,E=a&268435455;if(E!==0){var R=E&~d;R!==0?h=je(R):(p&=E,p!==0&&(h=je(p)))}else E=a&~d,E!==0?h=je(E):p!==0&&(h=je(p));if(h===0)return 0;if(i!==0&&i!==h&&(i&d)===0&&(d=h&-h,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)a=31-sn(i),d=1<<a,h|=r[a],i&=~d;return h}function Zs(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ei(r,i){for(var a=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes;0<p;){var E=31-sn(p),R=1<<E,N=d[E];N===-1?((R&a)===0||(R&h)!==0)&&(d[E]=Zs(R,i)):N<=i&&(r.expiredLanes|=R),p&=~R}}function fa(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function pa(){var r=zn;return zn<<=1,(zn&4194240)===0&&(zn=64),r}function ma(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function ti(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-sn(i),r[i]=a}function gh(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-sn(a),p=1<<d;i[d]=0,h[d]=-1,r[d]=-1,a&=~p}}function ga(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var h=31-sn(a),d=1<<h;d&i|r[h]&i&&(r[h]|=i),a&=~d}}var De=0;function $n(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ya,Gi,_a,va,wa,qn=!1,Ki=[],Hn=null,Wn=null,Ct=null,ni=new Map,Er=new Map,on=[],tu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ts(r,i){switch(r){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":ni.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(i.pointerId)}}function kn(r,i,a,h,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Va(i),i!==null&&Gi(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),r)}function nu(r,i,a,h,d){switch(i){case"focusin":return Hn=kn(Hn,r,i,a,h,d),!0;case"dragenter":return Wn=kn(Wn,r,i,a,h,d),!0;case"mouseover":return Ct=kn(Ct,r,i,a,h,d),!0;case"pointerover":var p=d.pointerId;return ni.set(p,kn(ni.get(p)||null,r,i,a,h,d)),!0;case"gotpointercapture":return p=d.pointerId,Er.set(p,kn(Er.get(p)||null,r,i,a,h,d)),!0}return!1}function Qi(r){var i=oi(r.target);if(i!==null){var a=Cn(i);if(a!==null){if(i=a.tag,i===13){if(i=ua(a),i!==null){r.blockedOn=i,wa(r.priority,function(){_a(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function qe(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Ji(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Qr=h,a.target.dispatchEvent(h),Qr=null}else return i=Va(a),i!==null&&Gi(i),r.blockedOn=a,!1;i.shift()}return!0}function ru(r,i,a){qe(r)&&a.delete(i)}function yh(){qn=!1,Hn!==null&&qe(Hn)&&(Hn=null),Wn!==null&&qe(Wn)&&(Wn=null),Ct!==null&&qe(Ct)&&(Ct=null),ni.forEach(ru),Er.forEach(ru)}function ns(r,i){r.blockedOn===i&&(r.blockedOn=null,qn||(qn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yh)))}function rs(r){function i(d){return ns(d,r)}if(0<Ki.length){ns(Ki[0],r);for(var a=1;a<Ki.length;a++){var h=Ki[a];h.blockedOn===r&&(h.blockedOn=null)}}for(Hn!==null&&ns(Hn,r),Wn!==null&&ns(Wn,r),Ct!==null&&ns(Ct,r),ni.forEach(i),Er.forEach(i),a=0;a<on.length;a++)h=on[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<on.length&&(a=on[0],a.blockedOn===null);)Qi(a),a.blockedOn===null&&on.shift()}var Tr=ue.ReactCurrentBatchConfig,xr=!0;function Gn(r,i,a,h){var d=De,p=Tr.transition;Tr.transition=null;try{De=1,Ea(r,i,a,h)}finally{De=d,Tr.transition=p}}function su(r,i,a,h){var d=De,p=Tr.transition;Tr.transition=null;try{De=4,Ea(r,i,a,h)}finally{De=d,Tr.transition=p}}function Ea(r,i,a,h){if(xr){var d=Ji(r,i,a,h);if(d===null)Ch(r,i,h,Kn,a),ts(r,h);else if(nu(d,r,i,a,h))h.stopPropagation();else if(ts(r,h),i&4&&-1<tu.indexOf(r)){for(;d!==null;){var p=Va(d);if(p!==null&&ya(p),p=Ji(r,i,a,h),p===null&&Ch(r,i,h,Kn,a),p===d)break;d=p}d!==null&&h.stopPropagation()}else Ch(r,i,h,null,a)}}var Kn=null;function Ji(r,i,a,h){if(Kn=null,r=zi(h),r=oi(r),r!==null)if(i=Cn(r),i===null)r=null;else if(a=i.tag,a===13){if(r=ua(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Kn=r,null}function Yi(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mh()){case Hi:return 1;case ha:return 4;case Js:case da:return 16;case Wi:return 536870912;default:return 16}default:return 16}}var an=null,Xi=null,Ir=null;function iu(){if(Ir)return Ir;var r,i=Xi,a=i.length,h,d="value"in an?an.value:an.textContent,p=d.length;for(r=0;r<a&&i[r]===d[r];r++);var E=a-r;for(h=1;h<=E&&i[a-h]===d[p-h];h++);return Ir=d.slice(r,1<h?1-h:void 0)}function ri(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Qn(){return!0}function Ta(){return!1}function Ot(r){function i(a,h,d,p,E){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(a=r[R],this[R]=a?a(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Qn:Ta,this.isPropagationStopped=Ta,this}return le(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),i}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},si=Ot(Jn),ss=le({},Jn,{view:0,detail:0}),Zi=Ot(ss),eo,to,ln,ii=le({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xe,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ln&&(ln&&r.type==="mousemove"?(eo=r.screenX-ln.screenX,to=r.screenY-ln.screenY):to=eo=0,ln=r),eo)},movementY:function(r){return"movementY"in r?r.movementY:to}}),xa=Ot(ii),ou=le({},ii,{dataTransfer:0}),au=Ot(ou),no=le({},ss,{relatedTarget:0}),kt=Ot(no),lu=le({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),uu=Ot(lu),is=le({},Jn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=Ot(is),m=le({},Jn,{data:0}),v=Ot(m),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ne(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=H[r])?!!i[r]:!1}function xe(){return ne}var ut=le({},ss,{key:function(r){if(r.key){var i=I[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ri(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?U[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xe,charCode:function(r){return r.type==="keypress"?ri(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ri(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Be=Ot(ut),mt=le({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),un=Ot(mt),Sr=le({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xe}),Yn=Ot(Sr),Xn=le({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ro=Ot(Xn),Ia=le({},ii,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),CE=Ot(Ia),kE=[9,13,27,32],_h=f&&"CompositionEvent"in window,Sa=null;f&&"documentMode"in document&&(Sa=document.documentMode);var PE=f&&"TextEvent"in window&&!Sa,Jp=f&&(!_h||Sa&&8<Sa&&11>=Sa),Yp=" ",Xp=!1;function Zp(r,i){switch(r){case"keyup":return kE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function em(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var so=!1;function NE(r,i){switch(r){case"compositionend":return em(i);case"keypress":return i.which!==32?null:(Xp=!0,Yp);case"textInput":return r=i.data,r===Yp&&Xp?null:r;default:return null}}function bE(r,i){if(so)return r==="compositionend"||!_h&&Zp(r,i)?(r=iu(),Ir=Xi=an=null,so=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Jp&&i.locale!=="ko"?null:i.data;default:return null}}var DE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!DE[r.type]:i==="textarea"}function nm(r,i,a,h){Jr(h),i=pu(i,"onChange"),0<i.length&&(a=new si("onChange","change",null,a,h),r.push({event:a,listeners:i}))}var Ra=null,Aa=null;function VE(r){wm(r,0)}function cu(r){var i=uo(r);if(ta(i))return r}function LE(r,i){if(r==="change")return i}var rm=!1;if(f){var vh;if(f){var wh="oninput"in document;if(!wh){var sm=document.createElement("div");sm.setAttribute("oninput","return;"),wh=typeof sm.oninput=="function"}vh=wh}else vh=!1;rm=vh&&(!document.documentMode||9<document.documentMode)}function im(){Ra&&(Ra.detachEvent("onpropertychange",om),Aa=Ra=null)}function om(r){if(r.propertyName==="value"&&cu(Aa)){var i=[];nm(i,Aa,r,zi(r)),Gl(VE,i)}}function OE(r,i,a){r==="focusin"?(im(),Ra=i,Aa=a,Ra.attachEvent("onpropertychange",om)):r==="focusout"&&im()}function ME(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return cu(Aa)}function jE(r,i){if(r==="click")return cu(i)}function UE(r,i){if(r==="input"||r==="change")return cu(i)}function FE(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Pn=typeof Object.is=="function"?Object.is:FE;function Ca(r,i){if(Pn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!g.call(i,d)||!Pn(r[d],i[d]))return!1}return!0}function am(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function lm(r,i){var a=am(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=i&&h>=i)return{node:a,offset:i-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=am(a)}}function um(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?um(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function cm(){for(var r=window,i=qr();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=qr(r.document)}return i}function Eh(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function BE(r){var i=cm(),a=r.focusedElem,h=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&um(a.ownerDocument.documentElement,a)){if(h!==null&&Eh(a)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,p=Math.min(h.start,d);h=h.end===void 0?p:Math.min(h.end,d),!r.extend&&p>h&&(d=h,h=p,p=d),d=lm(a,p);var E=lm(a,h);d&&E&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),r.removeAllRanges(),p>h?(r.addRange(i),r.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var zE=f&&"documentMode"in document&&11>=document.documentMode,io=null,Th=null,ka=null,xh=!1;function hm(r,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xh||io==null||io!==qr(h)||(h=io,"selectionStart"in h&&Eh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ka&&Ca(ka,h)||(ka=h,h=pu(Th,"onSelect"),0<h.length&&(i=new si("onSelect","select",null,i,a),r.push({event:i,listeners:h}),i.target=io)))}function hu(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var oo={animationend:hu("Animation","AnimationEnd"),animationiteration:hu("Animation","AnimationIteration"),animationstart:hu("Animation","AnimationStart"),transitionend:hu("Transition","TransitionEnd")},Ih={},dm={};f&&(dm=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function du(r){if(Ih[r])return Ih[r];if(!oo[r])return r;var i=oo[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in dm)return Ih[r]=i[a];return r}var fm=du("animationend"),pm=du("animationiteration"),mm=du("animationstart"),gm=du("transitionend"),ym=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function os(r,i){ym.set(r,i),l(i,[r])}for(var Sh=0;Sh<_m.length;Sh++){var Rh=_m[Sh],$E=Rh.toLowerCase(),qE=Rh[0].toUpperCase()+Rh.slice(1);os($E,"on"+qE)}os(fm,"onAnimationEnd"),os(pm,"onAnimationIteration"),os(mm,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(gm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function vm(r,i,a){var h=r.type||"unknown-event";r.currentTarget=a,la(h,i,void 0,r),r.currentTarget=null}function wm(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],d=h.event;h=h.listeners;e:{var p=void 0;if(i)for(var E=h.length-1;0<=E;E--){var R=h[E],N=R.instance,q=R.currentTarget;if(R=R.listener,N!==p&&d.isPropagationStopped())break e;vm(d,R,q),p=N}else for(E=0;E<h.length;E++){if(R=h[E],N=R.instance,q=R.currentTarget,R=R.listener,N!==p&&d.isPropagationStopped())break e;vm(d,R,q),p=N}}}if($i)throw r=mn,$i=!1,mn=null,r}function Qe(r,i){var a=i[Vh];a===void 0&&(a=i[Vh]=new Set);var h=r+"__bubble";a.has(h)||(Em(i,r,2,!1),a.add(h))}function Ah(r,i,a){var h=0;i&&(h|=4),Em(a,r,h,i)}var fu="_reactListening"+Math.random().toString(36).slice(2);function Na(r){if(!r[fu]){r[fu]=!0,s.forEach(function(a){a!=="selectionchange"&&(HE.has(a)||Ah(a,!1,r),Ah(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[fu]||(i[fu]=!0,Ah("selectionchange",!1,i))}}function Em(r,i,a,h){switch(Yi(i)){case 1:var d=Gn;break;case 4:d=su;break;default:d=Ea}a=d.bind(null,i,a,r),d=void 0,!Xr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(i,a,{capture:!0,passive:d}):r.addEventListener(i,a,!0):d!==void 0?r.addEventListener(i,a,{passive:d}):r.addEventListener(i,a,!1)}function Ch(r,i,a,h,d){var p=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var R=h.stateNode.containerInfo;if(R===d||R.nodeType===8&&R.parentNode===d)break;if(E===4)for(E=h.return;E!==null;){var N=E.tag;if((N===3||N===4)&&(N=E.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;E=E.return}for(;R!==null;){if(E=oi(R),E===null)return;if(N=E.tag,N===5||N===6){h=p=E;continue e}R=R.parentNode}}h=h.return}Gl(function(){var q=p,X=zi(a),ee=[];e:{var Y=ym.get(r);if(Y!==void 0){var oe=si,he=r;switch(r){case"keypress":if(ri(a)===0)break e;case"keydown":case"keyup":oe=Be;break;case"focusin":he="focus",oe=kt;break;case"focusout":he="blur",oe=kt;break;case"beforeblur":case"afterblur":oe=kt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Yn;break;case fm:case pm:case mm:oe=uu;break;case gm:oe=ro;break;case"scroll":oe=Zi;break;case"wheel":oe=CE;break;case"copy":case"cut":case"paste":oe=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=un}var de=(i&4)!==0,ct=!de&&r==="scroll",j=de?Y!==null?Y+"Capture":null:Y;de=[];for(var V=q,z;V!==null;){z=V;var te=z.stateNode;if(z.tag===5&&te!==null&&(z=te,j!==null&&(te=Gs(V,j),te!=null&&de.push(ba(V,te,z)))),ct)break;V=V.return}0<de.length&&(Y=new oe(Y,he,null,a,X),ee.push({event:Y,listeners:de}))}}if((i&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",oe=r==="mouseout"||r==="pointerout",Y&&a!==Qr&&(he=a.relatedTarget||a.fromElement)&&(oi(he)||he[Rr]))break e;if((oe||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,oe?(he=a.relatedTarget||a.toElement,oe=q,he=he?oi(he):null,he!==null&&(ct=Cn(he),he!==ct||he.tag!==5&&he.tag!==6)&&(he=null)):(oe=null,he=q),oe!==he)){if(de=xa,te="onMouseLeave",j="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(de=un,te="onPointerLeave",j="onPointerEnter",V="pointer"),ct=oe==null?Y:uo(oe),z=he==null?Y:uo(he),Y=new de(te,V+"leave",oe,a,X),Y.target=ct,Y.relatedTarget=z,te=null,oi(X)===q&&(de=new de(j,V+"enter",he,a,X),de.target=z,de.relatedTarget=ct,te=de),ct=te,oe&&he)t:{for(de=oe,j=he,V=0,z=de;z;z=ao(z))V++;for(z=0,te=j;te;te=ao(te))z++;for(;0<V-z;)de=ao(de),V--;for(;0<z-V;)j=ao(j),z--;for(;V--;){if(de===j||j!==null&&de===j.alternate)break t;de=ao(de),j=ao(j)}de=null}else de=null;oe!==null&&Tm(ee,Y,oe,de,!1),he!==null&&ct!==null&&Tm(ee,ct,he,de,!0)}}e:{if(Y=q?uo(q):window,oe=Y.nodeName&&Y.nodeName.toLowerCase(),oe==="select"||oe==="input"&&Y.type==="file")var fe=LE;else if(tm(Y))if(rm)fe=UE;else{fe=ME;var ye=OE}else(oe=Y.nodeName)&&oe.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(fe=jE);if(fe&&(fe=fe(r,q))){nm(ee,fe,a,X);break e}ye&&ye(r,Y,q),r==="focusout"&&(ye=Y._wrapperState)&&ye.controlled&&Y.type==="number"&&pt(Y,"number",Y.value)}switch(ye=q?uo(q):window,r){case"focusin":(tm(ye)||ye.contentEditable==="true")&&(io=ye,Th=q,ka=null);break;case"focusout":ka=Th=io=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,hm(ee,a,X);break;case"selectionchange":if(zE)break;case"keydown":case"keyup":hm(ee,a,X)}var _e;if(_h)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else so?Zp(r,a)&&(we="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(Jp&&a.locale!=="ko"&&(so||we!=="onCompositionStart"?we==="onCompositionEnd"&&so&&(_e=iu()):(an=X,Xi="value"in an?an.value:an.textContent,so=!0)),ye=pu(q,we),0<ye.length&&(we=new v(we,r,null,a,X),ee.push({event:we,listeners:ye}),_e?we.data=_e:(_e=em(a),_e!==null&&(we.data=_e)))),(_e=PE?NE(r,a):bE(r,a))&&(q=pu(q,"onBeforeInput"),0<q.length&&(X=new v("onBeforeInput","beforeinput",null,a,X),ee.push({event:X,listeners:q}),X.data=_e))}wm(ee,i)})}function ba(r,i,a){return{instance:r,listener:i,currentTarget:a}}function pu(r,i){for(var a=i+"Capture",h=[];r!==null;){var d=r,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Gs(r,a),p!=null&&h.unshift(ba(r,p,d)),p=Gs(r,i),p!=null&&h.push(ba(r,p,d))),r=r.return}return h}function ao(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Tm(r,i,a,h,d){for(var p=i._reactName,E=[];a!==null&&a!==h;){var R=a,N=R.alternate,q=R.stateNode;if(N!==null&&N===h)break;R.tag===5&&q!==null&&(R=q,d?(N=Gs(a,p),N!=null&&E.unshift(ba(a,N,R))):d||(N=Gs(a,p),N!=null&&E.push(ba(a,N,R)))),a=a.return}E.length!==0&&r.push({event:i,listeners:E})}var WE=/\r\n?/g,GE=/\u0000|\uFFFD/g;function xm(r){return(typeof r=="string"?r:""+r).replace(WE,`
`).replace(GE,"")}function mu(r,i,a){if(i=xm(i),xm(r)!==i&&a)throw Error(t(425))}function gu(){}var kh=null,Ph=null;function Nh(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bh=typeof setTimeout=="function"?setTimeout:void 0,KE=typeof clearTimeout=="function"?clearTimeout:void 0,Im=typeof Promise=="function"?Promise:void 0,QE=typeof queueMicrotask=="function"?queueMicrotask:typeof Im<"u"?function(r){return Im.resolve(null).then(r).catch(JE)}:bh;function JE(r){setTimeout(function(){throw r})}function Dh(r,i){var a=i,h=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){r.removeChild(d),rs(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);rs(i)}function as(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Sm(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var lo=Math.random().toString(36).slice(2),Zn="__reactFiber$"+lo,Da="__reactProps$"+lo,Rr="__reactContainer$"+lo,Vh="__reactEvents$"+lo,YE="__reactListeners$"+lo,XE="__reactHandles$"+lo;function oi(r){var i=r[Zn];if(i)return i;for(var a=r.parentNode;a;){if(i=a[Rr]||a[Zn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=Sm(r);r!==null;){if(a=r[Zn])return a;r=Sm(r)}return i}r=a,a=r.parentNode}return null}function Va(r){return r=r[Zn]||r[Rr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function uo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function yu(r){return r[Da]||null}var Lh=[],co=-1;function ls(r){return{current:r}}function Je(r){0>co||(r.current=Lh[co],Lh[co]=null,co--)}function We(r,i){co++,Lh[co]=r.current,r.current=i}var us={},Mt=ls(us),Qt=ls(!1),ai=us;function ho(r,i){var a=r.type.contextTypes;if(!a)return us;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=d),d}function Jt(r){return r=r.childContextTypes,r!=null}function _u(){Je(Qt),Je(Mt)}function Rm(r,i,a){if(Mt.current!==us)throw Error(t(168));We(Mt,i),We(Qt,a)}function Am(r,i,a){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in i))throw Error(t(108,Ue(r)||"Unknown",d));return le({},a,h)}function vu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||us,ai=Mt.current,We(Mt,r),We(Qt,Qt.current),!0}function Cm(r,i,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=Am(r,i,ai),h.__reactInternalMemoizedMergedChildContext=r,Je(Qt),Je(Mt),We(Mt,r)):Je(Qt),We(Qt,a)}var Ar=null,wu=!1,Oh=!1;function km(r){Ar===null?Ar=[r]:Ar.push(r)}function ZE(r){wu=!0,km(r)}function cs(){if(!Oh&&Ar!==null){Oh=!0;var r=0,i=De;try{var a=Ar;for(De=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Ar=null,wu=!1}catch(d){throw Ar!==null&&(Ar=Ar.slice(r+1)),ca(Hi,cs),d}finally{De=i,Oh=!1}}return null}var fo=[],po=0,Eu=null,Tu=0,yn=[],_n=0,li=null,Cr=1,kr="";function ui(r,i){fo[po++]=Tu,fo[po++]=Eu,Eu=r,Tu=i}function Pm(r,i,a){yn[_n++]=Cr,yn[_n++]=kr,yn[_n++]=li,li=r;var h=Cr;r=kr;var d=32-sn(h)-1;h&=~(1<<d),a+=1;var p=32-sn(i)+d;if(30<p){var E=d-d%5;p=(h&(1<<E)-1).toString(32),h>>=E,d-=E,Cr=1<<32-sn(i)+d|a<<d|h,kr=p+r}else Cr=1<<p|a<<d|h,kr=r}function Mh(r){r.return!==null&&(ui(r,1),Pm(r,1,0))}function jh(r){for(;r===Eu;)Eu=fo[--po],fo[po]=null,Tu=fo[--po],fo[po]=null;for(;r===li;)li=yn[--_n],yn[_n]=null,kr=yn[--_n],yn[_n]=null,Cr=yn[--_n],yn[_n]=null}var cn=null,hn=null,Ze=!1,Nn=null;function Nm(r,i){var a=Tn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function bm(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,cn=r,hn=as(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,cn=r,hn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=li!==null?{id:Cr,overflow:kr}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Tn(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,cn=r,hn=null,!0):!1;default:return!1}}function Uh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Fh(r){if(Ze){var i=hn;if(i){var a=i;if(!bm(r,i)){if(Uh(r))throw Error(t(418));i=as(a.nextSibling);var h=cn;i&&bm(r,i)?Nm(h,a):(r.flags=r.flags&-4097|2,Ze=!1,cn=r)}}else{if(Uh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ze=!1,cn=r}}}function Dm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;cn=r}function xu(r){if(r!==cn)return!1;if(!Ze)return Dm(r),Ze=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Nh(r.type,r.memoizedProps)),i&&(i=hn)){if(Uh(r))throw Vm(),Error(t(418));for(;i;)Nm(r,i),i=as(i.nextSibling)}if(Dm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){hn=as(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}hn=null}}else hn=cn?as(r.stateNode.nextSibling):null;return!0}function Vm(){for(var r=hn;r;)r=as(r.nextSibling)}function mo(){hn=cn=null,Ze=!1}function Bh(r){Nn===null?Nn=[r]:Nn.push(r)}var eT=ue.ReactCurrentBatchConfig;function La(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var d=h,p=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(E){var R=d.refs;E===null?delete R[p]:R[p]=E},i._stringRef=p,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Iu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Lm(r){var i=r._init;return i(r._payload)}function Om(r){function i(j,V){if(r){var z=j.deletions;z===null?(j.deletions=[V],j.flags|=16):z.push(V)}}function a(j,V){if(!r)return null;for(;V!==null;)i(j,V),V=V.sibling;return null}function h(j,V){for(j=new Map;V!==null;)V.key!==null?j.set(V.key,V):j.set(V.index,V),V=V.sibling;return j}function d(j,V){return j=_s(j,V),j.index=0,j.sibling=null,j}function p(j,V,z){return j.index=z,r?(z=j.alternate,z!==null?(z=z.index,z<V?(j.flags|=2,V):z):(j.flags|=2,V)):(j.flags|=1048576,V)}function E(j){return r&&j.alternate===null&&(j.flags|=2),j}function R(j,V,z,te){return V===null||V.tag!==6?(V=bd(z,j.mode,te),V.return=j,V):(V=d(V,z),V.return=j,V)}function N(j,V,z,te){var fe=z.type;return fe===P?X(j,V,z.props.children,te,z.key):V!==null&&(V.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Lt&&Lm(fe)===V.type)?(te=d(V,z.props),te.ref=La(j,V,z),te.return=j,te):(te=Ku(z.type,z.key,z.props,null,j.mode,te),te.ref=La(j,V,z),te.return=j,te)}function q(j,V,z,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Dd(z,j.mode,te),V.return=j,V):(V=d(V,z.children||[]),V.return=j,V)}function X(j,V,z,te,fe){return V===null||V.tag!==7?(V=yi(z,j.mode,te,fe),V.return=j,V):(V=d(V,z),V.return=j,V)}function ee(j,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=bd(""+V,j.mode,z),V.return=j,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case me:return z=Ku(V.type,V.key,V.props,null,j.mode,z),z.ref=La(j,null,V),z.return=j,z;case se:return V=Dd(V,j.mode,z),V.return=j,V;case Lt:var te=V._init;return ee(j,te(V._payload),z)}if(lt(V)||ge(V))return V=yi(V,j.mode,z,null),V.return=j,V;Iu(j,V)}return null}function Y(j,V,z,te){var fe=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return fe!==null?null:R(j,V,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case me:return z.key===fe?N(j,V,z,te):null;case se:return z.key===fe?q(j,V,z,te):null;case Lt:return fe=z._init,Y(j,V,fe(z._payload),te)}if(lt(z)||ge(z))return fe!==null?null:X(j,V,z,te,null);Iu(j,z)}return null}function oe(j,V,z,te,fe){if(typeof te=="string"&&te!==""||typeof te=="number")return j=j.get(z)||null,R(V,j,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case me:return j=j.get(te.key===null?z:te.key)||null,N(V,j,te,fe);case se:return j=j.get(te.key===null?z:te.key)||null,q(V,j,te,fe);case Lt:var ye=te._init;return oe(j,V,z,ye(te._payload),fe)}if(lt(te)||ge(te))return j=j.get(z)||null,X(V,j,te,fe,null);Iu(V,te)}return null}function he(j,V,z,te){for(var fe=null,ye=null,_e=V,we=V=0,Rt=null;_e!==null&&we<z.length;we++){_e.index>we?(Rt=_e,_e=null):Rt=_e.sibling;var Me=Y(j,_e,z[we],te);if(Me===null){_e===null&&(_e=Rt);break}r&&_e&&Me.alternate===null&&i(j,_e),V=p(Me,V,we),ye===null?fe=Me:ye.sibling=Me,ye=Me,_e=Rt}if(we===z.length)return a(j,_e),Ze&&ui(j,we),fe;if(_e===null){for(;we<z.length;we++)_e=ee(j,z[we],te),_e!==null&&(V=p(_e,V,we),ye===null?fe=_e:ye.sibling=_e,ye=_e);return Ze&&ui(j,we),fe}for(_e=h(j,_e);we<z.length;we++)Rt=oe(_e,j,we,z[we],te),Rt!==null&&(r&&Rt.alternate!==null&&_e.delete(Rt.key===null?we:Rt.key),V=p(Rt,V,we),ye===null?fe=Rt:ye.sibling=Rt,ye=Rt);return r&&_e.forEach(function(vs){return i(j,vs)}),Ze&&ui(j,we),fe}function de(j,V,z,te){var fe=ge(z);if(typeof fe!="function")throw Error(t(150));if(z=fe.call(z),z==null)throw Error(t(151));for(var ye=fe=null,_e=V,we=V=0,Rt=null,Me=z.next();_e!==null&&!Me.done;we++,Me=z.next()){_e.index>we?(Rt=_e,_e=null):Rt=_e.sibling;var vs=Y(j,_e,Me.value,te);if(vs===null){_e===null&&(_e=Rt);break}r&&_e&&vs.alternate===null&&i(j,_e),V=p(vs,V,we),ye===null?fe=vs:ye.sibling=vs,ye=vs,_e=Rt}if(Me.done)return a(j,_e),Ze&&ui(j,we),fe;if(_e===null){for(;!Me.done;we++,Me=z.next())Me=ee(j,Me.value,te),Me!==null&&(V=p(Me,V,we),ye===null?fe=Me:ye.sibling=Me,ye=Me);return Ze&&ui(j,we),fe}for(_e=h(j,_e);!Me.done;we++,Me=z.next())Me=oe(_e,j,we,Me.value,te),Me!==null&&(r&&Me.alternate!==null&&_e.delete(Me.key===null?we:Me.key),V=p(Me,V,we),ye===null?fe=Me:ye.sibling=Me,ye=Me);return r&&_e.forEach(function(DT){return i(j,DT)}),Ze&&ui(j,we),fe}function ct(j,V,z,te){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case me:e:{for(var fe=z.key,ye=V;ye!==null;){if(ye.key===fe){if(fe=z.type,fe===P){if(ye.tag===7){a(j,ye.sibling),V=d(ye,z.props.children),V.return=j,j=V;break e}}else if(ye.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Lt&&Lm(fe)===ye.type){a(j,ye.sibling),V=d(ye,z.props),V.ref=La(j,ye,z),V.return=j,j=V;break e}a(j,ye);break}else i(j,ye);ye=ye.sibling}z.type===P?(V=yi(z.props.children,j.mode,te,z.key),V.return=j,j=V):(te=Ku(z.type,z.key,z.props,null,j.mode,te),te.ref=La(j,V,z),te.return=j,j=te)}return E(j);case se:e:{for(ye=z.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(j,V.sibling),V=d(V,z.children||[]),V.return=j,j=V;break e}else{a(j,V);break}else i(j,V);V=V.sibling}V=Dd(z,j.mode,te),V.return=j,j=V}return E(j);case Lt:return ye=z._init,ct(j,V,ye(z._payload),te)}if(lt(z))return he(j,V,z,te);if(ge(z))return de(j,V,z,te);Iu(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(j,V.sibling),V=d(V,z),V.return=j,j=V):(a(j,V),V=bd(z,j.mode,te),V.return=j,j=V),E(j)):a(j,V)}return ct}var go=Om(!0),Mm=Om(!1),Su=ls(null),Ru=null,yo=null,zh=null;function $h(){zh=yo=Ru=null}function qh(r){var i=Su.current;Je(Su),r._currentValue=i}function Hh(r,i,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===a)break;r=r.return}}function _o(r,i){Ru=r,zh=yo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Yt=!0),r.firstContext=null)}function vn(r){var i=r._currentValue;if(zh!==r)if(r={context:r,memoizedValue:i,next:null},yo===null){if(Ru===null)throw Error(t(308));yo=r,Ru.dependencies={lanes:0,firstContext:r}}else yo=yo.next=r;return i}var ci=null;function Wh(r){ci===null?ci=[r]:ci.push(r)}function jm(r,i,a,h){var d=i.interleaved;return d===null?(a.next=a,Wh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Pr(r,h)}function Pr(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var hs=!1;function Gh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Um(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Nr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function ds(r,i,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Oe&2)!==0){var d=h.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),h.pending=i,Pr(r,a)}return d=h.interleaved,d===null?(i.next=i,Wh(h)):(i.next=d.next,d.next=i),h.interleaved=i,Pr(r,a)}function Au(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,ga(r,a)}}function Fm(r,i){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=E:p=p.next=E,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function Cu(r,i,a,h){var d=r.updateQueue;hs=!1;var p=d.firstBaseUpdate,E=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var N=R,q=N.next;N.next=null,E===null?p=q:E.next=q,E=N;var X=r.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==E&&(R===null?X.firstBaseUpdate=q:R.next=q,X.lastBaseUpdate=N))}if(p!==null){var ee=d.baseState;E=0,X=q=N=null,R=p;do{var Y=R.lane,oe=R.eventTime;if((h&Y)===Y){X!==null&&(X=X.next={eventTime:oe,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var he=r,de=R;switch(Y=i,oe=a,de.tag){case 1:if(he=de.payload,typeof he=="function"){ee=he.call(oe,ee,Y);break e}ee=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,Y=typeof he=="function"?he.call(oe,ee,Y):he,Y==null)break e;ee=le({},ee,Y);break e;case 2:hs=!0}}R.callback!==null&&R.lane!==0&&(r.flags|=64,Y=d.effects,Y===null?d.effects=[R]:Y.push(R))}else oe={eventTime:oe,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(q=X=oe,N=ee):X=X.next=oe,E|=Y;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(X===null&&(N=ee),d.baseState=N,d.firstBaseUpdate=q,d.lastBaseUpdate=X,i=d.shared.interleaved,i!==null){d=i;do E|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);fi|=E,r.lanes=E,r.memoizedState=ee}}function Bm(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var Oa={},er=ls(Oa),Ma=ls(Oa),ja=ls(Oa);function hi(r){if(r===Oa)throw Error(t(174));return r}function Kh(r,i){switch(We(ja,i),We(Ma,r),We(er,Oa),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ui(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Ui(i,r)}Je(er),We(er,i)}function vo(){Je(er),Je(Ma),Je(ja)}function zm(r){hi(ja.current);var i=hi(er.current),a=Ui(i,r.type);i!==a&&(We(Ma,r),We(er,a))}function Qh(r){Ma.current===r&&(Je(er),Je(Ma))}var et=ls(0);function ku(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Jh=[];function Yh(){for(var r=0;r<Jh.length;r++)Jh[r]._workInProgressVersionPrimary=null;Jh.length=0}var Pu=ue.ReactCurrentDispatcher,Xh=ue.ReactCurrentBatchConfig,di=0,tt=null,wt=null,It=null,Nu=!1,Ua=!1,Fa=0,tT=0;function jt(){throw Error(t(321))}function Zh(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!Pn(r[a],i[a]))return!1;return!0}function ed(r,i,a,h,d,p){if(di=p,tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Pu.current=r===null||r.memoizedState===null?iT:oT,r=a(h,d),Ua){p=0;do{if(Ua=!1,Fa=0,25<=p)throw Error(t(301));p+=1,It=wt=null,i.updateQueue=null,Pu.current=aT,r=a(h,d)}while(Ua)}if(Pu.current=Vu,i=wt!==null&&wt.next!==null,di=0,It=wt=tt=null,Nu=!1,i)throw Error(t(300));return r}function td(){var r=Fa!==0;return Fa=0,r}function tr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?tt.memoizedState=It=r:It=It.next=r,It}function wn(){if(wt===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=wt.next;var i=It===null?tt.memoizedState:It.next;if(i!==null)It=i,wt=r;else{if(r===null)throw Error(t(310));wt=r,r={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},It===null?tt.memoizedState=It=r:It=It.next=r}return It}function Ba(r,i){return typeof i=="function"?i(r):i}function nd(r){var i=wn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=wt,d=h.baseQueue,p=a.pending;if(p!==null){if(d!==null){var E=d.next;d.next=p.next,p.next=E}h.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,h=h.baseState;var R=E=null,N=null,q=p;do{var X=q.lane;if((di&X)===X)N!==null&&(N=N.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:r(h,q.action);else{var ee={lane:X,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};N===null?(R=N=ee,E=h):N=N.next=ee,tt.lanes|=X,fi|=X}q=q.next}while(q!==null&&q!==p);N===null?E=h:N.next=R,Pn(h,i.memoizedState)||(Yt=!0),i.memoizedState=h,i.baseState=E,i.baseQueue=N,a.lastRenderedState=h}if(r=a.interleaved,r!==null){d=r;do p=d.lane,tt.lanes|=p,fi|=p,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function rd(r){var i=wn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do p=r(p,E.action),E=E.next;while(E!==d);Pn(p,i.memoizedState)||(Yt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,h]}function $m(){}function qm(r,i){var a=tt,h=wn(),d=i(),p=!Pn(h.memoizedState,d);if(p&&(h.memoizedState=d,Yt=!0),h=h.queue,sd(Gm.bind(null,a,h,r),[r]),h.getSnapshot!==i||p||It!==null&&It.memoizedState.tag&1){if(a.flags|=2048,za(9,Wm.bind(null,a,h,d,i),void 0,null),St===null)throw Error(t(349));(di&30)!==0||Hm(a,i,d)}return d}function Hm(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function Wm(r,i,a,h){i.value=a,i.getSnapshot=h,Km(i)&&Qm(r)}function Gm(r,i,a){return a(function(){Km(i)&&Qm(r)})}function Km(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!Pn(r,a)}catch{return!0}}function Qm(r){var i=Pr(r,1);i!==null&&Ln(i,r,1,-1)}function Jm(r){var i=tr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:r},i.queue=r,r=r.dispatch=sT.bind(null,tt,r),[i.memoizedState,r]}function za(r,i,a,h){return r={tag:r,create:i,destroy:a,deps:h,next:null},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,i.lastEffect=r)),r}function Ym(){return wn().memoizedState}function bu(r,i,a,h){var d=tr();tt.flags|=r,d.memoizedState=za(1|i,a,void 0,h===void 0?null:h)}function Du(r,i,a,h){var d=wn();h=h===void 0?null:h;var p=void 0;if(wt!==null){var E=wt.memoizedState;if(p=E.destroy,h!==null&&Zh(h,E.deps)){d.memoizedState=za(i,a,p,h);return}}tt.flags|=r,d.memoizedState=za(1|i,a,p,h)}function Xm(r,i){return bu(8390656,8,r,i)}function sd(r,i){return Du(2048,8,r,i)}function Zm(r,i){return Du(4,2,r,i)}function eg(r,i){return Du(4,4,r,i)}function tg(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function ng(r,i,a){return a=a!=null?a.concat([r]):null,Du(4,4,tg.bind(null,i,r),a)}function id(){}function rg(r,i){var a=wn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Zh(i,h[1])?h[0]:(a.memoizedState=[r,i],r)}function sg(r,i){var a=wn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Zh(i,h[1])?h[0]:(r=r(),a.memoizedState=[r,i],r)}function ig(r,i,a){return(di&21)===0?(r.baseState&&(r.baseState=!1,Yt=!0),r.memoizedState=a):(Pn(a,i)||(a=pa(),tt.lanes|=a,fi|=a,r.baseState=!0),i)}function nT(r,i){var a=De;De=a!==0&&4>a?a:4,r(!0);var h=Xh.transition;Xh.transition={};try{r(!1),i()}finally{De=a,Xh.transition=h}}function og(){return wn().memoizedState}function rT(r,i,a){var h=gs(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},ag(r))lg(i,a);else if(a=jm(r,i,a,h),a!==null){var d=Gt();Ln(a,r,h,d),ug(a,i,h)}}function sT(r,i,a){var h=gs(r),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(ag(r))lg(i,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var E=i.lastRenderedState,R=p(E,a);if(d.hasEagerState=!0,d.eagerState=R,Pn(R,E)){var N=i.interleaved;N===null?(d.next=d,Wh(i)):(d.next=N.next,N.next=d),i.interleaved=d;return}}catch{}finally{}a=jm(r,i,d,h),a!==null&&(d=Gt(),Ln(a,r,h,d),ug(a,i,h))}}function ag(r){var i=r.alternate;return r===tt||i!==null&&i===tt}function lg(r,i){Ua=Nu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function ug(r,i,a){if((a&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,ga(r,a)}}var Vu={readContext:vn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},iT={readContext:vn,useCallback:function(r,i){return tr().memoizedState=[r,i===void 0?null:i],r},useContext:vn,useEffect:Xm,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,bu(4194308,4,tg.bind(null,i,r),a)},useLayoutEffect:function(r,i){return bu(4194308,4,r,i)},useInsertionEffect:function(r,i){return bu(4,2,r,i)},useMemo:function(r,i){var a=tr();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var h=tr();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=rT.bind(null,tt,r),[h.memoizedState,r]},useRef:function(r){var i=tr();return r={current:r},i.memoizedState=r},useState:Jm,useDebugValue:id,useDeferredValue:function(r){return tr().memoizedState=r},useTransition:function(){var r=Jm(!1),i=r[0];return r=nT.bind(null,r[1]),tr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var h=tt,d=tr();if(Ze){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),St===null)throw Error(t(349));(di&30)!==0||Hm(h,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,Xm(Gm.bind(null,h,p,r),[r]),h.flags|=2048,za(9,Wm.bind(null,h,p,a,i),void 0,null),a},useId:function(){var r=tr(),i=St.identifierPrefix;if(Ze){var a=kr,h=Cr;a=(h&~(1<<32-sn(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=Fa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=tT++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},oT={readContext:vn,useCallback:rg,useContext:vn,useEffect:sd,useImperativeHandle:ng,useInsertionEffect:Zm,useLayoutEffect:eg,useMemo:sg,useReducer:nd,useRef:Ym,useState:function(){return nd(Ba)},useDebugValue:id,useDeferredValue:function(r){var i=wn();return ig(i,wt.memoizedState,r)},useTransition:function(){var r=nd(Ba)[0],i=wn().memoizedState;return[r,i]},useMutableSource:$m,useSyncExternalStore:qm,useId:og,unstable_isNewReconciler:!1},aT={readContext:vn,useCallback:rg,useContext:vn,useEffect:sd,useImperativeHandle:ng,useInsertionEffect:Zm,useLayoutEffect:eg,useMemo:sg,useReducer:rd,useRef:Ym,useState:function(){return rd(Ba)},useDebugValue:id,useDeferredValue:function(r){var i=wn();return wt===null?i.memoizedState=r:ig(i,wt.memoizedState,r)},useTransition:function(){var r=rd(Ba)[0],i=wn().memoizedState;return[r,i]},useMutableSource:$m,useSyncExternalStore:qm,useId:og,unstable_isNewReconciler:!1};function bn(r,i){if(r&&r.defaultProps){i=le({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function od(r,i,a,h){i=r.memoizedState,a=a(h,i),a=a==null?i:le({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Lu={isMounted:function(r){return(r=r._reactInternals)?Cn(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var h=Gt(),d=gs(r),p=Nr(h,d);p.payload=i,a!=null&&(p.callback=a),i=ds(r,p,d),i!==null&&(Ln(i,r,d,h),Au(i,r,d))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var h=Gt(),d=gs(r),p=Nr(h,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=ds(r,p,d),i!==null&&(Ln(i,r,d,h),Au(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=Gt(),h=gs(r),d=Nr(a,h);d.tag=2,i!=null&&(d.callback=i),i=ds(r,d,h),i!==null&&(Ln(i,r,h,a),Au(i,r,h))}};function cg(r,i,a,h,d,p,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,p,E):i.prototype&&i.prototype.isPureReactComponent?!Ca(a,h)||!Ca(d,p):!0}function hg(r,i,a){var h=!1,d=us,p=i.contextType;return typeof p=="object"&&p!==null?p=vn(p):(d=Jt(i)?ai:Mt.current,h=i.contextTypes,p=(h=h!=null)?ho(r,d):us),i=new i(a,p),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Lu,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=p),i}function dg(r,i,a,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==r&&Lu.enqueueReplaceState(i,i.state,null)}function ad(r,i,a,h){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Gh(r);var p=i.contextType;typeof p=="object"&&p!==null?d.context=vn(p):(p=Jt(i)?ai:Mt.current,d.context=ho(r,p)),d.state=r.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(od(r,i,p,a),d.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Lu.enqueueReplaceState(d,d.state,null),Cu(r,a,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function wo(r,i){try{var a="",h=i;do a+=Ce(h),h=h.return;while(h);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:i,stack:d,digest:null}}function ld(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function ud(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var lT=typeof WeakMap=="function"?WeakMap:Map;function fg(r,i,a){a=Nr(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){zu||(zu=!0,Id=h),ud(r,i)},a}function pg(r,i,a){a=Nr(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=i.value;a.payload=function(){return h(d)},a.callback=function(){ud(r,i)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){ud(r,i),typeof h!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var E=i.stack;this.componentDidCatch(i.value,{componentStack:E!==null?E:""})}),a}function mg(r,i,a){var h=r.pingCache;if(h===null){h=r.pingCache=new lT;var d=new Set;h.set(i,d)}else d=h.get(i),d===void 0&&(d=new Set,h.set(i,d));d.has(a)||(d.add(a),r=TT.bind(null,r,i,a),i.then(r,r))}function gg(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function yg(r,i,a,h,d){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Nr(-1,1),i.tag=2,ds(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var uT=ue.ReactCurrentOwner,Yt=!1;function Wt(r,i,a,h){i.child=r===null?Mm(i,null,a,h):go(i,r.child,a,h)}function _g(r,i,a,h,d){a=a.render;var p=i.ref;return _o(i,d),h=ed(r,i,a,h,p,d),a=td(),r!==null&&!Yt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,br(r,i,d)):(Ze&&a&&Mh(i),i.flags|=1,Wt(r,i,h,d),i.child)}function vg(r,i,a,h,d){if(r===null){var p=a.type;return typeof p=="function"&&!Nd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,wg(r,i,p,h,d)):(r=Ku(a.type,null,h,i,i.mode,d),r.ref=i.ref,r.return=i,i.child=r)}if(p=r.child,(r.lanes&d)===0){var E=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ca,a(E,h)&&r.ref===i.ref)return br(r,i,d)}return i.flags|=1,r=_s(p,h),r.ref=i.ref,r.return=i,i.child=r}function wg(r,i,a,h,d){if(r!==null){var p=r.memoizedProps;if(Ca(p,h)&&r.ref===i.ref)if(Yt=!1,i.pendingProps=h=p,(r.lanes&d)!==0)(r.flags&131072)!==0&&(Yt=!0);else return i.lanes=r.lanes,br(r,i,d)}return cd(r,i,a,h,d)}function Eg(r,i,a){var h=i.pendingProps,d=h.children,p=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(To,dn),dn|=a;else{if((a&1073741824)===0)return r=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,We(To,dn),dn|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=p!==null?p.baseLanes:a,We(To,dn),dn|=h}else p!==null?(h=p.baseLanes|a,i.memoizedState=null):h=a,We(To,dn),dn|=h;return Wt(r,i,d,a),i.child}function Tg(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function cd(r,i,a,h,d){var p=Jt(a)?ai:Mt.current;return p=ho(i,p),_o(i,d),a=ed(r,i,a,h,p,d),h=td(),r!==null&&!Yt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,br(r,i,d)):(Ze&&h&&Mh(i),i.flags|=1,Wt(r,i,a,d),i.child)}function xg(r,i,a,h,d){if(Jt(a)){var p=!0;vu(i)}else p=!1;if(_o(i,d),i.stateNode===null)Mu(r,i),hg(i,a,h),ad(i,a,h,d),h=!0;else if(r===null){var E=i.stateNode,R=i.memoizedProps;E.props=R;var N=E.context,q=a.contextType;typeof q=="object"&&q!==null?q=vn(q):(q=Jt(a)?ai:Mt.current,q=ho(i,q));var X=a.getDerivedStateFromProps,ee=typeof X=="function"||typeof E.getSnapshotBeforeUpdate=="function";ee||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==h||N!==q)&&dg(i,E,h,q),hs=!1;var Y=i.memoizedState;E.state=Y,Cu(i,h,E,d),N=i.memoizedState,R!==h||Y!==N||Qt.current||hs?(typeof X=="function"&&(od(i,a,X,h),N=i.memoizedState),(R=hs||cg(i,a,R,h,Y,N,q))?(ee||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=N),E.props=h,E.state=N,E.context=q,h=R):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{E=i.stateNode,Um(r,i),R=i.memoizedProps,q=i.type===i.elementType?R:bn(i.type,R),E.props=q,ee=i.pendingProps,Y=E.context,N=a.contextType,typeof N=="object"&&N!==null?N=vn(N):(N=Jt(a)?ai:Mt.current,N=ho(i,N));var oe=a.getDerivedStateFromProps;(X=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==ee||Y!==N)&&dg(i,E,h,N),hs=!1,Y=i.memoizedState,E.state=Y,Cu(i,h,E,d);var he=i.memoizedState;R!==ee||Y!==he||Qt.current||hs?(typeof oe=="function"&&(od(i,a,oe,h),he=i.memoizedState),(q=hs||cg(i,a,q,h,Y,he,N)||!1)?(X||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,he,N),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,he,N)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&Y===r.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&Y===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=he),E.props=h,E.state=he,E.context=N,h=q):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&Y===r.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&Y===r.memoizedState||(i.flags|=1024),h=!1)}return hd(r,i,a,h,p,d)}function hd(r,i,a,h,d,p){Tg(r,i);var E=(i.flags&128)!==0;if(!h&&!E)return d&&Cm(i,a,!1),br(r,i,p);h=i.stateNode,uT.current=i;var R=E&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&E?(i.child=go(i,r.child,null,p),i.child=go(i,null,R,p)):Wt(r,i,R,p),i.memoizedState=h.state,d&&Cm(i,a,!0),i.child}function Ig(r){var i=r.stateNode;i.pendingContext?Rm(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Rm(r,i.context,!1),Kh(r,i.containerInfo)}function Sg(r,i,a,h,d){return mo(),Bh(d),i.flags|=256,Wt(r,i,a,h),i.child}var dd={dehydrated:null,treeContext:null,retryLane:0};function fd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Rg(r,i,a){var h=i.pendingProps,d=et.current,p=!1,E=(i.flags&128)!==0,R;if((R=E)||(R=r!==null&&r.memoizedState===null?!1:(d&2)!==0),R?(p=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),We(et,d&1),r===null)return Fh(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(E=h.children,r=h.fallback,p?(h=i.mode,p=i.child,E={mode:"hidden",children:E},(h&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=E):p=Qu(E,h,0,null),r=yi(r,h,a,null),p.return=i,r.return=i,p.sibling=r,i.child=p,i.child.memoizedState=fd(a),i.memoizedState=dd,r):pd(i,E));if(d=r.memoizedState,d!==null&&(R=d.dehydrated,R!==null))return cT(r,i,E,h,R,d,a);if(p){p=h.fallback,E=i.mode,d=r.child,R=d.sibling;var N={mode:"hidden",children:h.children};return(E&1)===0&&i.child!==d?(h=i.child,h.childLanes=0,h.pendingProps=N,i.deletions=null):(h=_s(d,N),h.subtreeFlags=d.subtreeFlags&14680064),R!==null?p=_s(R,p):(p=yi(p,E,a,null),p.flags|=2),p.return=i,h.return=i,h.sibling=p,i.child=h,h=p,p=i.child,E=r.child.memoizedState,E=E===null?fd(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},p.memoizedState=E,p.childLanes=r.childLanes&~a,i.memoizedState=dd,h}return p=r.child,r=p.sibling,h=_s(p,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=h,i.memoizedState=null,h}function pd(r,i){return i=Qu({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Ou(r,i,a,h){return h!==null&&Bh(h),go(i,r.child,null,a),r=pd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function cT(r,i,a,h,d,p,E){if(a)return i.flags&256?(i.flags&=-257,h=ld(Error(t(422))),Ou(r,i,E,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(p=h.fallback,d=i.mode,h=Qu({mode:"visible",children:h.children},d,0,null),p=yi(p,d,E,null),p.flags|=2,h.return=i,p.return=i,h.sibling=p,i.child=h,(i.mode&1)!==0&&go(i,r.child,null,E),i.child.memoizedState=fd(E),i.memoizedState=dd,p);if((i.mode&1)===0)return Ou(r,i,E,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var R=h.dgst;return h=R,p=Error(t(419)),h=ld(p,h,void 0),Ou(r,i,E,h)}if(R=(E&r.childLanes)!==0,Yt||R){if(h=St,h!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(h.suspendedLanes|E))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Pr(r,d),Ln(h,r,d,-1))}return Pd(),h=ld(Error(t(421))),Ou(r,i,E,h)}return d.data==="$?"?(i.flags|=128,i.child=r.child,i=xT.bind(null,r),d._reactRetry=i,null):(r=p.treeContext,hn=as(d.nextSibling),cn=i,Ze=!0,Nn=null,r!==null&&(yn[_n++]=Cr,yn[_n++]=kr,yn[_n++]=li,Cr=r.id,kr=r.overflow,li=i),i=pd(i,h.children),i.flags|=4096,i)}function Ag(r,i,a){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),Hh(r.return,i,a)}function md(r,i,a,h,d){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=h,p.tail=a,p.tailMode=d)}function Cg(r,i,a){var h=i.pendingProps,d=h.revealOrder,p=h.tail;if(Wt(r,i,h.children,a),h=et.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ag(r,a,i);else if(r.tag===19)Ag(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(We(et,h),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)r=a.alternate,r!==null&&ku(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),md(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(r=d.alternate,r!==null&&ku(r)===null){i.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}md(i,!0,a,null,p);break;case"together":md(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Mu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function br(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),fi|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=_s(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=_s(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function hT(r,i,a){switch(i.tag){case 3:Ig(i),mo();break;case 5:zm(i);break;case 1:Jt(i.type)&&vu(i);break;case 4:Kh(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,d=i.memoizedProps.value;We(Su,h._currentValue),h._currentValue=d;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(We(et,et.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Rg(r,i,a):(We(et,et.current&1),r=br(r,i,a),r!==null?r.sibling:null);We(et,et.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(r.flags&128)!==0){if(h)return Cg(r,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(et,et.current),h)break;return null;case 22:case 23:return i.lanes=0,Eg(r,i,a)}return br(r,i,a)}var kg,gd,Pg,Ng;kg=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},gd=function(){},Pg=function(r,i,a,h){var d=r.memoizedProps;if(d!==h){r=i.stateNode,hi(er.current);var p=null;switch(a){case"input":d=Mi(r,d),h=Mi(r,h),p=[];break;case"select":d=le({},d,{value:void 0}),h=le({},h,{value:void 0}),p=[];break;case"textarea":d=ra(r,d),h=ra(r,h),p=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=gu)}An(a,h);var E;a=null;for(q in d)if(!h.hasOwnProperty(q)&&d.hasOwnProperty(q)&&d[q]!=null)if(q==="style"){var R=d[q];for(E in R)R.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?p||(p=[]):(p=p||[]).push(q,null));for(q in h){var N=h[q];if(R=d!=null?d[q]:void 0,h.hasOwnProperty(q)&&N!==R&&(N!=null||R!=null))if(q==="style")if(R){for(E in R)!R.hasOwnProperty(E)||N&&N.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in N)N.hasOwnProperty(E)&&R[E]!==N[E]&&(a||(a={}),a[E]=N[E])}else a||(p||(p=[]),p.push(q,a)),a=N;else q==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,R=R?R.__html:void 0,N!=null&&R!==N&&(p=p||[]).push(q,N)):q==="children"?typeof N!="string"&&typeof N!="number"||(p=p||[]).push(q,""+N):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(N!=null&&q==="onScroll"&&Qe("scroll",r),p||R===N||(p=[])):(p=p||[]).push(q,N))}a&&(p=p||[]).push("style",a);var q=p;(i.updateQueue=q)&&(i.flags|=4)}},Ng=function(r,i,a,h){a!==h&&(i.flags|=4)};function $a(r,i){if(!Ze)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ut(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(i)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=a,i}function dT(r,i,a){var h=i.pendingProps;switch(jh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(i),null;case 1:return Jt(i.type)&&_u(),Ut(i),null;case 3:return h=i.stateNode,vo(),Je(Qt),Je(Mt),Yh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(xu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Nn!==null&&(Ad(Nn),Nn=null))),gd(r,i),Ut(i),null;case 5:Qh(i);var d=hi(ja.current);if(a=i.type,r!==null&&i.stateNode!=null)Pg(r,i,a,h,d),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Ut(i),null}if(r=hi(er.current),xu(i)){h=i.stateNode,a=i.type;var p=i.memoizedProps;switch(h[Zn]=i,h[Da]=p,r=(i.mode&1)!==0,a){case"dialog":Qe("cancel",h),Qe("close",h);break;case"iframe":case"object":case"embed":Qe("load",h);break;case"video":case"audio":for(d=0;d<Pa.length;d++)Qe(Pa[d],h);break;case"source":Qe("error",h);break;case"img":case"image":case"link":Qe("error",h),Qe("load",h);break;case"details":Qe("toggle",h);break;case"input":Bl(h,p),Qe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!p.multiple},Qe("invalid",h);break;case"textarea":sa(h,p),Qe("invalid",h)}An(a,p),d=null;for(var E in p)if(p.hasOwnProperty(E)){var R=p[E];E==="children"?typeof R=="string"?h.textContent!==R&&(p.suppressHydrationWarning!==!0&&mu(h.textContent,R,r),d=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(p.suppressHydrationWarning!==!0&&mu(h.textContent,R,r),d=["children",""+R]):o.hasOwnProperty(E)&&R!=null&&E==="onScroll"&&Qe("scroll",h)}switch(a){case"input":Oi(h),na(h,p,!0);break;case"textarea":Oi(h),Hr(h);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(h.onclick=gu)}h=d,i.updateQueue=h,h!==null&&(i.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ia(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(a,{is:h.is}):(r=E.createElement(a),a==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,a),r[Zn]=i,r[Da]=h,kg(r,i,!1,!1),i.stateNode=r;e:{switch(E=Bi(a,h),a){case"dialog":Qe("cancel",r),Qe("close",r),d=h;break;case"iframe":case"object":case"embed":Qe("load",r),d=h;break;case"video":case"audio":for(d=0;d<Pa.length;d++)Qe(Pa[d],r);d=h;break;case"source":Qe("error",r),d=h;break;case"img":case"image":case"link":Qe("error",r),Qe("load",r),d=h;break;case"details":Qe("toggle",r),d=h;break;case"input":Bl(r,h),d=Mi(r,h),Qe("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=le({},h,{value:void 0}),Qe("invalid",r);break;case"textarea":sa(r,h),d=ra(r,h),Qe("invalid",r);break;default:d=h}An(a,d),R=d;for(p in R)if(R.hasOwnProperty(p)){var N=R[p];p==="style"?Fi(r,N):p==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&$l(r,N)):p==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Ws(r,N):typeof N=="number"&&Ws(r,""+N):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?N!=null&&p==="onScroll"&&Qe("scroll",r):N!=null&&K(r,p,N,E))}switch(a){case"input":Oi(r),na(r,h,!1);break;case"textarea":Oi(r),Hr(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Le(h.value));break;case"select":r.multiple=!!h.multiple,p=h.value,p!=null?Rn(r,!!h.multiple,p,!1):h.defaultValue!=null&&Rn(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=gu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ut(i),null;case 6:if(r&&i.stateNode!=null)Ng(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=hi(ja.current),hi(er.current),xu(i)){if(h=i.stateNode,a=i.memoizedProps,h[Zn]=i,(p=h.nodeValue!==a)&&(r=cn,r!==null))switch(r.tag){case 3:mu(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&mu(h.nodeValue,a,(r.mode&1)!==0)}p&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Zn]=i,i.stateNode=h}return Ut(i),null;case 13:if(Je(et),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ze&&hn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Vm(),mo(),i.flags|=98560,p=!1;else if(p=xu(i),h!==null&&h.dehydrated!==null){if(r===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Zn]=i}else mo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ut(i),p=!1}else Nn!==null&&(Ad(Nn),Nn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(et.current&1)!==0?Et===0&&(Et=3):Pd())),i.updateQueue!==null&&(i.flags|=4),Ut(i),null);case 4:return vo(),gd(r,i),r===null&&Na(i.stateNode.containerInfo),Ut(i),null;case 10:return qh(i.type._context),Ut(i),null;case 17:return Jt(i.type)&&_u(),Ut(i),null;case 19:if(Je(et),p=i.memoizedState,p===null)return Ut(i),null;if(h=(i.flags&128)!==0,E=p.rendering,E===null)if(h)$a(p,!1);else{if(Et!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(E=ku(r),E!==null){for(i.flags|=128,$a(p,!1),h=E.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)p=a,r=h,p.flags&=14680066,E=p.alternate,E===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=E.childLanes,p.lanes=E.lanes,p.child=E.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=E.memoizedProps,p.memoizedState=E.memoizedState,p.updateQueue=E.updateQueue,p.type=E.type,r=E.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return We(et,et.current&1|2),i.child}r=r.sibling}p.tail!==null&&Ke()>xo&&(i.flags|=128,h=!0,$a(p,!1),i.lanes=4194304)}else{if(!h)if(r=ku(E),r!==null){if(i.flags|=128,h=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),$a(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!Ze)return Ut(i),null}else 2*Ke()-p.renderingStartTime>xo&&a!==1073741824&&(i.flags|=128,h=!0,$a(p,!1),i.lanes=4194304);p.isBackwards?(E.sibling=i.child,i.child=E):(a=p.last,a!==null?a.sibling=E:i.child=E,p.last=E)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ke(),i.sibling=null,a=et.current,We(et,h?a&1|2:a&1),i):(Ut(i),null);case 22:case 23:return kd(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(dn&1073741824)!==0&&(Ut(i),i.subtreeFlags&6&&(i.flags|=8192)):Ut(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function fT(r,i){switch(jh(i),i.tag){case 1:return Jt(i.type)&&_u(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return vo(),Je(Qt),Je(Mt),Yh(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Qh(i),null;case 13:if(Je(et),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));mo()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Je(et),null;case 4:return vo(),null;case 10:return qh(i.type._context),null;case 22:case 23:return kd(),null;case 24:return null;default:return null}}var ju=!1,Ft=!1,pT=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Eo(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){it(r,i,h)}else a.current=null}function yd(r,i,a){try{a()}catch(h){it(r,i,h)}}var bg=!1;function mT(r,i){if(kh=xr,r=cm(),Eh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,p=h.focusNode;h=h.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var E=0,R=-1,N=-1,q=0,X=0,ee=r,Y=null;t:for(;;){for(var oe;ee!==a||d!==0&&ee.nodeType!==3||(R=E+d),ee!==p||h!==0&&ee.nodeType!==3||(N=E+h),ee.nodeType===3&&(E+=ee.nodeValue.length),(oe=ee.firstChild)!==null;)Y=ee,ee=oe;for(;;){if(ee===r)break t;if(Y===a&&++q===d&&(R=E),Y===p&&++X===h&&(N=E),(oe=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=oe}a=R===-1||N===-1?null:{start:R,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ph={focusedElem:r,selectionRange:a},xr=!1,ce=i;ce!==null;)if(i=ce,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,ce=r;else for(;ce!==null;){i=ce;try{var he=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var de=he.memoizedProps,ct=he.memoizedState,j=i.stateNode,V=j.getSnapshotBeforeUpdate(i.elementType===i.type?de:bn(i.type,de),ct);j.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){it(i,i.return,te)}if(r=i.sibling,r!==null){r.return=i.return,ce=r;break}ce=i.return}return he=bg,bg=!1,he}function qa(r,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var p=d.destroy;d.destroy=void 0,p!==void 0&&yd(i,a,p)}d=d.next}while(d!==h)}}function Uu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function _d(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function Dg(r){var i=r.alternate;i!==null&&(r.alternate=null,Dg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Zn],delete i[Da],delete i[Vh],delete i[YE],delete i[XE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Vg(r){return r.tag===5||r.tag===3||r.tag===4}function Lg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Vg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vd(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=gu));else if(h!==4&&(r=r.child,r!==null))for(vd(r,i,a),r=r.sibling;r!==null;)vd(r,i,a),r=r.sibling}function wd(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(wd(r,i,a),r=r.sibling;r!==null;)wd(r,i,a),r=r.sibling}var Pt=null,Dn=!1;function fs(r,i,a){for(a=a.child;a!==null;)Og(r,i,a),a=a.sibling}function Og(r,i,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Ys,a)}catch{}switch(a.tag){case 5:Ft||Eo(a,i);case 6:var h=Pt,d=Dn;Pt=null,fs(r,i,a),Pt=h,Dn=d,Pt!==null&&(Dn?(r=Pt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(Dn?(r=Pt,a=a.stateNode,r.nodeType===8?Dh(r.parentNode,a):r.nodeType===1&&Dh(r,a),rs(r)):Dh(Pt,a.stateNode));break;case 4:h=Pt,d=Dn,Pt=a.stateNode.containerInfo,Dn=!0,fs(r,i,a),Pt=h,Dn=d;break;case 0:case 11:case 14:case 15:if(!Ft&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var p=d,E=p.destroy;p=p.tag,E!==void 0&&((p&2)!==0||(p&4)!==0)&&yd(a,i,E),d=d.next}while(d!==h)}fs(r,i,a);break;case 1:if(!Ft&&(Eo(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(R){it(a,i,R)}fs(r,i,a);break;case 21:fs(r,i,a);break;case 22:a.mode&1?(Ft=(h=Ft)||a.memoizedState!==null,fs(r,i,a),Ft=h):fs(r,i,a);break;default:fs(r,i,a)}}function Mg(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new pT),i.forEach(function(h){var d=IT.bind(null,r,h);a.has(h)||(a.add(h),h.then(d,d))})}}function Vn(r,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var p=r,E=i,R=E;e:for(;R!==null;){switch(R.tag){case 5:Pt=R.stateNode,Dn=!1;break e;case 3:Pt=R.stateNode.containerInfo,Dn=!0;break e;case 4:Pt=R.stateNode.containerInfo,Dn=!0;break e}R=R.return}if(Pt===null)throw Error(t(160));Og(p,E,d),Pt=null,Dn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(q){it(d,i,q)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)jg(i,r),i=i.sibling}function jg(r,i){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Vn(i,r),nr(r),h&4){try{qa(3,r,r.return),Uu(3,r)}catch(de){it(r,r.return,de)}try{qa(5,r,r.return)}catch(de){it(r,r.return,de)}}break;case 1:Vn(i,r),nr(r),h&512&&a!==null&&Eo(a,a.return);break;case 5:if(Vn(i,r),nr(r),h&512&&a!==null&&Eo(a,a.return),r.flags&32){var d=r.stateNode;try{Ws(d,"")}catch(de){it(r,r.return,de)}}if(h&4&&(d=r.stateNode,d!=null)){var p=r.memoizedProps,E=a!==null?a.memoizedProps:p,R=r.type,N=r.updateQueue;if(r.updateQueue=null,N!==null)try{R==="input"&&p.type==="radio"&&p.name!=null&&ji(d,p),Bi(R,E);var q=Bi(R,p);for(E=0;E<N.length;E+=2){var X=N[E],ee=N[E+1];X==="style"?Fi(d,ee):X==="dangerouslySetInnerHTML"?$l(d,ee):X==="children"?Ws(d,ee):K(d,X,ee,q)}switch(R){case"input":Hs(d,p);break;case"textarea":zl(d,p);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var oe=p.value;oe!=null?Rn(d,!!p.multiple,oe,!1):Y!==!!p.multiple&&(p.defaultValue!=null?Rn(d,!!p.multiple,p.defaultValue,!0):Rn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Da]=p}catch(de){it(r,r.return,de)}}break;case 6:if(Vn(i,r),nr(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,p=r.memoizedProps;try{d.nodeValue=p}catch(de){it(r,r.return,de)}}break;case 3:if(Vn(i,r),nr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{rs(i.containerInfo)}catch(de){it(r,r.return,de)}break;case 4:Vn(i,r),nr(r);break;case 13:Vn(i,r),nr(r),d=r.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(xd=Ke())),h&4&&Mg(r);break;case 22:if(X=a!==null&&a.memoizedState!==null,r.mode&1?(Ft=(q=Ft)||X,Vn(i,r),Ft=q):Vn(i,r),nr(r),h&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!X&&(r.mode&1)!==0)for(ce=r,X=r.child;X!==null;){for(ee=ce=X;ce!==null;){switch(Y=ce,oe=Y.child,Y.tag){case 0:case 11:case 14:case 15:qa(4,Y,Y.return);break;case 1:Eo(Y,Y.return);var he=Y.stateNode;if(typeof he.componentWillUnmount=="function"){h=Y,a=Y.return;try{i=h,he.props=i.memoizedProps,he.state=i.memoizedState,he.componentWillUnmount()}catch(de){it(h,a,de)}}break;case 5:Eo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Bg(ee);continue}}oe!==null?(oe.return=Y,ce=oe):Bg(ee)}X=X.sibling}e:for(X=null,ee=r;;){if(ee.tag===5){if(X===null){X=ee;try{d=ee.stateNode,q?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(R=ee.stateNode,N=ee.memoizedProps.style,E=N!=null&&N.hasOwnProperty("display")?N.display:null,R.style.display=Kr("display",E))}catch(de){it(r,r.return,de)}}}else if(ee.tag===6){if(X===null)try{ee.stateNode.nodeValue=q?"":ee.memoizedProps}catch(de){it(r,r.return,de)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===r)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===r)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===r)break e;X===ee&&(X=null),ee=ee.return}X===ee&&(X=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Vn(i,r),nr(r),h&4&&Mg(r);break;case 21:break;default:Vn(i,r),nr(r)}}function nr(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(Vg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(Ws(d,""),h.flags&=-33);var p=Lg(r);wd(r,p,d);break;case 3:case 4:var E=h.stateNode.containerInfo,R=Lg(r);vd(r,R,E);break;default:throw Error(t(161))}}catch(N){it(r,r.return,N)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function gT(r,i,a){ce=r,Ug(r)}function Ug(r,i,a){for(var h=(r.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&h){var E=d.memoizedState!==null||ju;if(!E){var R=d.alternate,N=R!==null&&R.memoizedState!==null||Ft;R=ju;var q=Ft;if(ju=E,(Ft=N)&&!q)for(ce=d;ce!==null;)E=ce,N=E.child,E.tag===22&&E.memoizedState!==null?zg(d):N!==null?(N.return=E,ce=N):zg(d);for(;p!==null;)ce=p,Ug(p),p=p.sibling;ce=d,ju=R,Ft=q}Fg(r)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):Fg(r)}}function Fg(r){for(;ce!==null;){var i=ce;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ft||Uu(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Ft)if(a===null)h.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:bn(i.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&Bm(i,p,h);break;case 3:var E=i.updateQueue;if(E!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Bm(i,E,a)}break;case 5:var R=i.stateNode;if(a===null&&i.flags&4){a=R;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var q=i.alternate;if(q!==null){var X=q.memoizedState;if(X!==null){var ee=X.dehydrated;ee!==null&&rs(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||i.flags&512&&_d(i)}catch(Y){it(i,i.return,Y)}}if(i===r){ce=null;break}if(a=i.sibling,a!==null){a.return=i.return,ce=a;break}ce=i.return}}function Bg(r){for(;ce!==null;){var i=ce;if(i===r){ce=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ce=a;break}ce=i.return}}function zg(r){for(;ce!==null;){var i=ce;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Uu(4,i)}catch(N){it(i,a,N)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var d=i.return;try{h.componentDidMount()}catch(N){it(i,d,N)}}var p=i.return;try{_d(i)}catch(N){it(i,p,N)}break;case 5:var E=i.return;try{_d(i)}catch(N){it(i,E,N)}}}catch(N){it(i,i.return,N)}if(i===r){ce=null;break}var R=i.sibling;if(R!==null){R.return=i.return,ce=R;break}ce=i.return}}var yT=Math.ceil,Fu=ue.ReactCurrentDispatcher,Ed=ue.ReactCurrentOwner,En=ue.ReactCurrentBatchConfig,Oe=0,St=null,gt=null,Nt=0,dn=0,To=ls(0),Et=0,Ha=null,fi=0,Bu=0,Td=0,Wa=null,Xt=null,xd=0,xo=1/0,Dr=null,zu=!1,Id=null,ps=null,$u=!1,ms=null,qu=0,Ga=0,Sd=null,Hu=-1,Wu=0;function Gt(){return(Oe&6)!==0?Ke():Hu!==-1?Hu:Hu=Ke()}function gs(r){return(r.mode&1)===0?1:(Oe&2)!==0&&Nt!==0?Nt&-Nt:eT.transition!==null?(Wu===0&&(Wu=pa()),Wu):(r=De,r!==0||(r=window.event,r=r===void 0?16:Yi(r.type)),r)}function Ln(r,i,a,h){if(50<Ga)throw Ga=0,Sd=null,Error(t(185));ti(r,a,h),((Oe&2)===0||r!==St)&&(r===St&&((Oe&2)===0&&(Bu|=a),Et===4&&ys(r,Nt)),Zt(r,h),a===1&&Oe===0&&(i.mode&1)===0&&(xo=Ke()+500,wu&&cs()))}function Zt(r,i){var a=r.callbackNode;ei(r,i);var h=wr(r,r===St?Nt:0);if(h===0)a!==null&&qi(a),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(a!=null&&qi(a),i===1)r.tag===0?ZE(qg.bind(null,r)):km(qg.bind(null,r)),QE(function(){(Oe&6)===0&&cs()}),a=null;else{switch($n(h)){case 1:a=Hi;break;case 4:a=ha;break;case 16:a=Js;break;case 536870912:a=Wi;break;default:a=Js}a=Xg(a,$g.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function $g(r,i){if(Hu=-1,Wu=0,(Oe&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Io()&&r.callbackNode!==a)return null;var h=wr(r,r===St?Nt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Gu(r,h);else{i=h;var d=Oe;Oe|=2;var p=Wg();(St!==r||Nt!==i)&&(Dr=null,xo=Ke()+500,mi(r,i));do try{wT();break}catch(R){Hg(r,R)}while(!0);$h(),Fu.current=p,Oe=d,gt!==null?i=0:(St=null,Nt=0,i=Et)}if(i!==0){if(i===2&&(d=fa(r),d!==0&&(h=d,i=Rd(r,d))),i===1)throw a=Ha,mi(r,0),ys(r,h),Zt(r,Ke()),a;if(i===6)ys(r,h);else{if(d=r.current.alternate,(h&30)===0&&!_T(d)&&(i=Gu(r,h),i===2&&(p=fa(r),p!==0&&(h=p,i=Rd(r,p))),i===1))throw a=Ha,mi(r,0),ys(r,h),Zt(r,Ke()),a;switch(r.finishedWork=d,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:gi(r,Xt,Dr);break;case 3:if(ys(r,h),(h&130023424)===h&&(i=xd+500-Ke(),10<i)){if(wr(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){Gt(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=bh(gi.bind(null,r,Xt,Dr),i);break}gi(r,Xt,Dr);break;case 4:if(ys(r,h),(h&4194240)===h)break;for(i=r.eventTimes,d=-1;0<h;){var E=31-sn(h);p=1<<E,E=i[E],E>d&&(d=E),h&=~p}if(h=d,h=Ke()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*yT(h/1960))-h,10<h){r.timeoutHandle=bh(gi.bind(null,r,Xt,Dr),h);break}gi(r,Xt,Dr);break;case 5:gi(r,Xt,Dr);break;default:throw Error(t(329))}}}return Zt(r,Ke()),r.callbackNode===a?$g.bind(null,r):null}function Rd(r,i){var a=Wa;return r.current.memoizedState.isDehydrated&&(mi(r,i).flags|=256),r=Gu(r,i),r!==2&&(i=Xt,Xt=a,i!==null&&Ad(i)),r}function Ad(r){Xt===null?Xt=r:Xt.push.apply(Xt,r)}function _T(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],p=d.getSnapshot;d=d.value;try{if(!Pn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ys(r,i){for(i&=~Td,i&=~Bu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-sn(i),h=1<<a;r[a]=-1,i&=~h}}function qg(r){if((Oe&6)!==0)throw Error(t(327));Io();var i=wr(r,0);if((i&1)===0)return Zt(r,Ke()),null;var a=Gu(r,i);if(r.tag!==0&&a===2){var h=fa(r);h!==0&&(i=h,a=Rd(r,h))}if(a===1)throw a=Ha,mi(r,0),ys(r,i),Zt(r,Ke()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,gi(r,Xt,Dr),Zt(r,Ke()),null}function Cd(r,i){var a=Oe;Oe|=1;try{return r(i)}finally{Oe=a,Oe===0&&(xo=Ke()+500,wu&&cs())}}function pi(r){ms!==null&&ms.tag===0&&(Oe&6)===0&&Io();var i=Oe;Oe|=1;var a=En.transition,h=De;try{if(En.transition=null,De=1,r)return r()}finally{De=h,En.transition=a,Oe=i,(Oe&6)===0&&cs()}}function kd(){dn=To.current,Je(To)}function mi(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,KE(a)),gt!==null)for(a=gt.return;a!==null;){var h=a;switch(jh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&_u();break;case 3:vo(),Je(Qt),Je(Mt),Yh();break;case 5:Qh(h);break;case 4:vo();break;case 13:Je(et);break;case 19:Je(et);break;case 10:qh(h.type._context);break;case 22:case 23:kd()}a=a.return}if(St=r,gt=r=_s(r.current,null),Nt=dn=i,Et=0,Ha=null,Td=Bu=fi=0,Xt=Wa=null,ci!==null){for(i=0;i<ci.length;i++)if(a=ci[i],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,p=a.pending;if(p!==null){var E=p.next;p.next=d,h.next=E}a.pending=h}ci=null}return r}function Hg(r,i){do{var a=gt;try{if($h(),Pu.current=Vu,Nu){for(var h=tt.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}Nu=!1}if(di=0,It=wt=tt=null,Ua=!1,Fa=0,Ed.current=null,a===null||a.return===null){Et=1,Ha=i,gt=null;break}e:{var p=r,E=a.return,R=a,N=i;if(i=Nt,R.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var q=N,X=R,ee=X.tag;if((X.mode&1)===0&&(ee===0||ee===11||ee===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var oe=gg(E);if(oe!==null){oe.flags&=-257,yg(oe,E,R,p,i),oe.mode&1&&mg(p,q,i),i=oe,N=q;var he=i.updateQueue;if(he===null){var de=new Set;de.add(N),i.updateQueue=de}else he.add(N);break e}else{if((i&1)===0){mg(p,q,i),Pd();break e}N=Error(t(426))}}else if(Ze&&R.mode&1){var ct=gg(E);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),yg(ct,E,R,p,i),Bh(wo(N,R));break e}}p=N=wo(N,R),Et!==4&&(Et=2),Wa===null?Wa=[p]:Wa.push(p),p=E;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var j=fg(p,N,i);Fm(p,j);break e;case 1:R=N;var V=p.type,z=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ps===null||!ps.has(z)))){p.flags|=65536,i&=-i,p.lanes|=i;var te=pg(p,R,i);Fm(p,te);break e}}p=p.return}while(p!==null)}Kg(a)}catch(fe){i=fe,gt===a&&a!==null&&(gt=a=a.return);continue}break}while(!0)}function Wg(){var r=Fu.current;return Fu.current=Vu,r===null?Vu:r}function Pd(){(Et===0||Et===3||Et===2)&&(Et=4),St===null||(fi&268435455)===0&&(Bu&268435455)===0||ys(St,Nt)}function Gu(r,i){var a=Oe;Oe|=2;var h=Wg();(St!==r||Nt!==i)&&(Dr=null,mi(r,i));do try{vT();break}catch(d){Hg(r,d)}while(!0);if($h(),Oe=a,Fu.current=h,gt!==null)throw Error(t(261));return St=null,Nt=0,Et}function vT(){for(;gt!==null;)Gg(gt)}function wT(){for(;gt!==null&&!Qs();)Gg(gt)}function Gg(r){var i=Yg(r.alternate,r,dn);r.memoizedProps=r.pendingProps,i===null?Kg(r):gt=i,Ed.current=null}function Kg(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=dT(a,i,dn),a!==null){gt=a;return}}else{if(a=fT(a,i),a!==null){a.flags&=32767,gt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Et=6,gt=null;return}}if(i=i.sibling,i!==null){gt=i;return}gt=i=r}while(i!==null);Et===0&&(Et=5)}function gi(r,i,a){var h=De,d=En.transition;try{En.transition=null,De=1,ET(r,i,a,h)}finally{En.transition=d,De=h}return null}function ET(r,i,a,h){do Io();while(ms!==null);if((Oe&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var p=a.lanes|a.childLanes;if(gh(r,p),r===St&&(gt=St=null,Nt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||$u||($u=!0,Xg(Js,function(){return Io(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=En.transition,En.transition=null;var E=De;De=1;var R=Oe;Oe|=4,Ed.current=null,mT(r,a),jg(a,r),BE(Ph),xr=!!kh,Ph=kh=null,r.current=a,gT(a),vr(),Oe=R,De=E,En.transition=p}else r.current=a;if($u&&($u=!1,ms=r,qu=d),p=r.pendingLanes,p===0&&(ps=null),eu(a.stateNode),Zt(r,Ke()),i!==null)for(h=r.onRecoverableError,a=0;a<i.length;a++)d=i[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(zu)throw zu=!1,r=Id,Id=null,r;return(qu&1)!==0&&r.tag!==0&&Io(),p=r.pendingLanes,(p&1)!==0?r===Sd?Ga++:(Ga=0,Sd=r):Ga=0,cs(),null}function Io(){if(ms!==null){var r=$n(qu),i=En.transition,a=De;try{if(En.transition=null,De=16>r?16:r,ms===null)var h=!1;else{if(r=ms,ms=null,qu=0,(Oe&6)!==0)throw Error(t(331));var d=Oe;for(Oe|=4,ce=r.current;ce!==null;){var p=ce,E=p.child;if((ce.flags&16)!==0){var R=p.deletions;if(R!==null){for(var N=0;N<R.length;N++){var q=R[N];for(ce=q;ce!==null;){var X=ce;switch(X.tag){case 0:case 11:case 15:qa(8,X,p)}var ee=X.child;if(ee!==null)ee.return=X,ce=ee;else for(;ce!==null;){X=ce;var Y=X.sibling,oe=X.return;if(Dg(X),X===q){ce=null;break}if(Y!==null){Y.return=oe,ce=Y;break}ce=oe}}}var he=p.alternate;if(he!==null){var de=he.child;if(de!==null){he.child=null;do{var ct=de.sibling;de.sibling=null,de=ct}while(de!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&E!==null)E.return=p,ce=E;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:qa(9,p,p.return)}var j=p.sibling;if(j!==null){j.return=p.return,ce=j;break e}ce=p.return}}var V=r.current;for(ce=V;ce!==null;){E=ce;var z=E.child;if((E.subtreeFlags&2064)!==0&&z!==null)z.return=E,ce=z;else e:for(E=V;ce!==null;){if(R=ce,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Uu(9,R)}}catch(fe){it(R,R.return,fe)}if(R===E){ce=null;break e}var te=R.sibling;if(te!==null){te.return=R.return,ce=te;break e}ce=R.return}}if(Oe=d,cs(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Ys,r)}catch{}h=!0}return h}finally{De=a,En.transition=i}}return!1}function Qg(r,i,a){i=wo(a,i),i=fg(r,i,1),r=ds(r,i,1),i=Gt(),r!==null&&(ti(r,1,i),Zt(r,i))}function it(r,i,a){if(r.tag===3)Qg(r,r,a);else for(;i!==null;){if(i.tag===3){Qg(i,r,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ps===null||!ps.has(h))){r=wo(a,r),r=pg(i,r,1),i=ds(i,r,1),r=Gt(),i!==null&&(ti(i,1,r),Zt(i,r));break}}i=i.return}}function TT(r,i,a){var h=r.pingCache;h!==null&&h.delete(i),i=Gt(),r.pingedLanes|=r.suspendedLanes&a,St===r&&(Nt&a)===a&&(Et===4||Et===3&&(Nt&130023424)===Nt&&500>Ke()-xd?mi(r,0):Td|=a),Zt(r,i)}function Jg(r,i){i===0&&((r.mode&1)===0?i=1:(i=es,es<<=1,(es&130023424)===0&&(es=4194304)));var a=Gt();r=Pr(r,i),r!==null&&(ti(r,i,a),Zt(r,a))}function xT(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),Jg(r,a)}function IT(r,i){var a=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Jg(r,a)}var Yg;Yg=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||Qt.current)Yt=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return Yt=!1,hT(r,i,a);Yt=(r.flags&131072)!==0}else Yt=!1,Ze&&(i.flags&1048576)!==0&&Pm(i,Tu,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Mu(r,i),r=i.pendingProps;var d=ho(i,Mt.current);_o(i,a),d=ed(null,i,h,r,d,a);var p=td();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Jt(h)?(p=!0,vu(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Gh(i),d.updater=Lu,i.stateNode=d,d._reactInternals=i,ad(i,h,r,a),i=hd(null,i,h,!0,p,a)):(i.tag=0,Ze&&p&&Mh(i),Wt(null,i,d,a),i=i.child),i;case 16:h=i.elementType;e:{switch(Mu(r,i),r=i.pendingProps,d=h._init,h=d(h._payload),i.type=h,d=i.tag=RT(h),r=bn(h,r),d){case 0:i=cd(null,i,h,r,a);break e;case 1:i=xg(null,i,h,r,a);break e;case 11:i=_g(null,i,h,r,a);break e;case 14:i=vg(null,i,h,bn(h.type,r),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:bn(h,d),cd(r,i,h,d,a);case 1:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:bn(h,d),xg(r,i,h,d,a);case 3:e:{if(Ig(i),r===null)throw Error(t(387));h=i.pendingProps,p=i.memoizedState,d=p.element,Um(r,i),Cu(i,h,null,a);var E=i.memoizedState;if(h=E.element,p.isDehydrated)if(p={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=wo(Error(t(423)),i),i=Sg(r,i,h,a,d);break e}else if(h!==d){d=wo(Error(t(424)),i),i=Sg(r,i,h,a,d);break e}else for(hn=as(i.stateNode.containerInfo.firstChild),cn=i,Ze=!0,Nn=null,a=Mm(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(mo(),h===d){i=br(r,i,a);break e}Wt(r,i,h,a)}i=i.child}return i;case 5:return zm(i),r===null&&Fh(i),h=i.type,d=i.pendingProps,p=r!==null?r.memoizedProps:null,E=d.children,Nh(h,d)?E=null:p!==null&&Nh(h,p)&&(i.flags|=32),Tg(r,i),Wt(r,i,E,a),i.child;case 6:return r===null&&Fh(i),null;case 13:return Rg(r,i,a);case 4:return Kh(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=go(i,null,h,a):Wt(r,i,h,a),i.child;case 11:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:bn(h,d),_g(r,i,h,d,a);case 7:return Wt(r,i,i.pendingProps,a),i.child;case 8:return Wt(r,i,i.pendingProps.children,a),i.child;case 12:return Wt(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,d=i.pendingProps,p=i.memoizedProps,E=d.value,We(Su,h._currentValue),h._currentValue=E,p!==null)if(Pn(p.value,E)){if(p.children===d.children&&!Qt.current){i=br(r,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var R=p.dependencies;if(R!==null){E=p.child;for(var N=R.firstContext;N!==null;){if(N.context===h){if(p.tag===1){N=Nr(-1,a&-a),N.tag=2;var q=p.updateQueue;if(q!==null){q=q.shared;var X=q.pending;X===null?N.next=N:(N.next=X.next,X.next=N),q.pending=N}}p.lanes|=a,N=p.alternate,N!==null&&(N.lanes|=a),Hh(p.return,a,i),R.lanes|=a;break}N=N.next}}else if(p.tag===10)E=p.type===i.type?null:p.child;else if(p.tag===18){if(E=p.return,E===null)throw Error(t(341));E.lanes|=a,R=E.alternate,R!==null&&(R.lanes|=a),Hh(E,a,i),E=p.sibling}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===i){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}Wt(r,i,d.children,a),i=i.child}return i;case 9:return d=i.type,h=i.pendingProps.children,_o(i,a),d=vn(d),h=h(d),i.flags|=1,Wt(r,i,h,a),i.child;case 14:return h=i.type,d=bn(h,i.pendingProps),d=bn(h.type,d),vg(r,i,h,d,a);case 15:return wg(r,i,i.type,i.pendingProps,a);case 17:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:bn(h,d),Mu(r,i),i.tag=1,Jt(h)?(r=!0,vu(i)):r=!1,_o(i,a),hg(i,h,d),ad(i,h,d,a),hd(null,i,h,!0,r,a);case 19:return Cg(r,i,a);case 22:return Eg(r,i,a)}throw Error(t(156,i.tag))};function Xg(r,i){return ca(r,i)}function ST(r,i,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(r,i,a,h){return new ST(r,i,a,h)}function Nd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function RT(r){if(typeof r=="function")return Nd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===M)return 11;if(r===xt)return 14}return 2}function _s(r,i){var a=r.alternate;return a===null?(a=Tn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Ku(r,i,a,h,d,p){var E=2;if(h=r,typeof r=="function")Nd(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case P:return yi(a.children,d,p,i);case S:E=8,d|=8;break;case C:return r=Tn(12,a,i,d|2),r.elementType=C,r.lanes=p,r;case A:return r=Tn(13,a,i,d),r.elementType=A,r.lanes=p,r;case He:return r=Tn(19,a,i,d),r.elementType=He,r.lanes=p,r;case Xe:return Qu(a,d,p,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:E=10;break e;case D:E=9;break e;case M:E=11;break e;case xt:E=14;break e;case Lt:E=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Tn(E,a,i,d),i.elementType=r,i.type=h,i.lanes=p,i}function yi(r,i,a,h){return r=Tn(7,r,h,i),r.lanes=a,r}function Qu(r,i,a,h){return r=Tn(22,r,h,i),r.elementType=Xe,r.lanes=a,r.stateNode={isHidden:!1},r}function bd(r,i,a){return r=Tn(6,r,null,i),r.lanes=a,r}function Dd(r,i,a){return i=Tn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function AT(r,i,a,h,d){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Vd(r,i,a,h,d,p,E,R,N){return r=new AT(r,i,a,R,N),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Tn(3,null,null,i),r.current=p,p.stateNode=r,p.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gh(p),r}function CT(r,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:h==null?null:""+h,children:r,containerInfo:i,implementation:a}}function Zg(r){if(!r)return us;r=r._reactInternals;e:{if(Cn(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Jt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Jt(a))return Am(r,a,i)}return i}function ey(r,i,a,h,d,p,E,R,N){return r=Vd(a,h,!0,r,d,p,E,R,N),r.context=Zg(null),a=r.current,h=Gt(),d=gs(a),p=Nr(h,d),p.callback=i??null,ds(a,p,d),r.current.lanes=d,ti(r,d,h),Zt(r,h),r}function Ju(r,i,a,h){var d=i.current,p=Gt(),E=gs(d);return a=Zg(a),i.context===null?i.context=a:i.pendingContext=a,i=Nr(p,E),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=ds(d,i,E),r!==null&&(Ln(r,d,E,p),Au(r,d,E)),E}function Yu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ty(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function Ld(r,i){ty(r,i),(r=r.alternate)&&ty(r,i)}function kT(){return null}var ny=typeof reportError=="function"?reportError:function(r){console.error(r)};function Od(r){this._internalRoot=r}Xu.prototype.render=Od.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));Ju(r,i,null,null)},Xu.prototype.unmount=Od.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;pi(function(){Ju(null,r,null,null)}),i[Rr]=null}};function Xu(r){this._internalRoot=r}Xu.prototype.unstable_scheduleHydration=function(r){if(r){var i=va();r={blockedOn:null,target:r,priority:i};for(var a=0;a<on.length&&i!==0&&i<on[a].priority;a++);on.splice(a,0,r),a===0&&Qi(r)}};function Md(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Zu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function ry(){}function PT(r,i,a,h,d){if(d){if(typeof h=="function"){var p=h;h=function(){var q=Yu(E);p.call(q)}}var E=ey(i,h,r,0,null,!1,!1,"",ry);return r._reactRootContainer=E,r[Rr]=E.current,Na(r.nodeType===8?r.parentNode:r),pi(),E}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var R=h;h=function(){var q=Yu(N);R.call(q)}}var N=Vd(r,0,!1,null,null,!1,!1,"",ry);return r._reactRootContainer=N,r[Rr]=N.current,Na(r.nodeType===8?r.parentNode:r),pi(function(){Ju(i,N,a,h)}),N}function ec(r,i,a,h,d){var p=a._reactRootContainer;if(p){var E=p;if(typeof d=="function"){var R=d;d=function(){var N=Yu(E);R.call(N)}}Ju(i,E,r,d)}else E=PT(a,i,r,d,h);return Yu(E)}ya=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=je(i.pendingLanes);a!==0&&(ga(i,a|1),Zt(i,Ke()),(Oe&6)===0&&(xo=Ke()+500,cs()))}break;case 13:pi(function(){var h=Pr(r,1);if(h!==null){var d=Gt();Ln(h,r,1,d)}}),Ld(r,1)}},Gi=function(r){if(r.tag===13){var i=Pr(r,134217728);if(i!==null){var a=Gt();Ln(i,r,134217728,a)}Ld(r,134217728)}},_a=function(r){if(r.tag===13){var i=gs(r),a=Pr(r,i);if(a!==null){var h=Gt();Ln(a,r,i,h)}Ld(r,i)}},va=function(){return De},wa=function(r,i){var a=De;try{return De=r,i()}finally{De=a}},gr=function(r,i,a){switch(i){case"input":if(Hs(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==r&&h.form===r.form){var d=yu(h);if(!d)throw Error(t(90));ta(h),Hs(h,d)}}}break;case"textarea":zl(r,a);break;case"select":i=a.value,i!=null&&Rn(r,!!a.multiple,i,!1)}},Hl=Cd,Wl=pi;var NT={usingClientEntryPoint:!1,Events:[Va,uo,yu,Jr,Yr,Cd]},Ka={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bT={bundleType:Ka.bundleType,version:Ka.version,rendererPackageName:Ka.rendererPackageName,rendererConfig:Ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Zl(r),r===null?null:r.stateNode},findFiberByHostInstance:Ka.findFiberByHostInstance||kT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{Ys=tc.inject(bT),rn=tc}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NT,en.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Md(i))throw Error(t(200));return CT(r,i,null,a)},en.createRoot=function(r,i){if(!Md(r))throw Error(t(299));var a=!1,h="",d=ny;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Vd(r,1,!1,null,null,a,!1,h,d),r[Rr]=i.current,Na(r.nodeType===8?r.parentNode:r),new Od(i)},en.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Zl(i),r=r===null?null:r.stateNode,r},en.flushSync=function(r){return pi(r)},en.hydrate=function(r,i,a){if(!Zu(i))throw Error(t(200));return ec(null,r,i,!0,a)},en.hydrateRoot=function(r,i,a){if(!Md(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,p="",E=ny;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),i=ey(i,null,r,1,a??null,d,!1,p,E),r[Rr]=i.current,Na(r),h)for(r=0;r<h.length;r++)a=h[r],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Xu(i)},en.render=function(r,i,a){if(!Zu(i))throw Error(t(200));return ec(null,r,i,!1,a)},en.unmountComponentAtNode=function(r){if(!Zu(r))throw Error(t(40));return r._reactRootContainer?(pi(function(){ec(null,null,r,!1,function(){r._reactRootContainer=null,r[Rr]=null})}),!0):!1},en.unstable_batchedUpdates=Cd,en.unstable_renderSubtreeIntoContainer=function(r,i,a,h){if(!Zu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return ec(r,i,a,!1,h)},en.version="18.3.1-next-f1338f8080-20240426",en}var hy;function BT(){if(hy)return Fd.exports;hy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fd.exports=FT(),Fd.exports}var dy;function zT(){if(dy)return nc;dy=1;var n=BT();return nc.createRoot=n.createRoot,nc.hydrateRoot=n.hydrateRoot,nc}var $T=zT();const qT=nv($T);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fy="popstate";function HT(n={}){function e(s,o){let{pathname:l,search:c,hash:f}=s.location;return cf("",{pathname:l,search:c,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:dl(o)}return GT(e,t,null,n)}function nt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WT(){return Math.random().toString(36).substring(2,10)}function py(n,e){return{usr:n.state,key:n.key,idx:e}}function cf(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Go(e):e,state:t,key:e&&e.key||s||WT()}}function dl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Go(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function GT(n,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,f="POP",g=null,y=w();y==null&&(y=0,c.replaceState({...c.state,idx:y},""));function w(){return(c.state||{idx:null}).idx}function T(){f="POP";let L=w(),J=L==null?null:L-y;y=L,g&&g({action:f,location:B.location,delta:J})}function x(L,J){f="PUSH";let Z=cf(B.location,L,J);y=w()+1;let K=py(Z,y),ue=B.createHref(Z);try{c.pushState(K,"",ue)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;o.location.assign(ue)}l&&g&&g({action:f,location:B.location,delta:1})}function k(L,J){f="REPLACE";let Z=cf(B.location,L,J);y=w();let K=py(Z,y),ue=B.createHref(Z);c.replaceState(K,"",ue),l&&g&&g({action:f,location:B.location,delta:0})}function F(L){return KT(L)}let B={get action(){return f},get location(){return n(o,c)},listen(L){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(fy,T),g=L,()=>{o.removeEventListener(fy,T),g=null}},createHref(L){return e(o,L)},createURL:F,encodeLocation(L){let J=F(L);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:x,replace:k,go(L){return c.go(L)}};return B}function KT(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),nt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:dl(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function rv(n,e,t="/"){return QT(n,e,t,!1)}function QT(n,e,t,s){let o=typeof e=="string"?Go(e):e,l=jr(o.pathname||"/",t);if(l==null)return null;let c=sv(n);JT(c);let f=null;for(let g=0;f==null&&g<c.length;++g){let y=ax(l);f=ix(c[g],y,s)}return f}function sv(n,e=[],t=[],s="",o=!1){let l=(c,f,g=o,y)=>{let w={relativePath:y===void 0?c.path||"":y,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(s)&&g)return;nt(w.relativePath.startsWith(s),`Absolute route path "${w.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(s.length)}let T=Or([s,w.relativePath]),x=t.concat(w);c.children&&c.children.length>0&&(nt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),sv(c.children,e,x,T,g)),!(c.path==null&&!c.index)&&e.push({path:T,score:rx(T,c.index),routesMeta:x})};return n.forEach((c,f)=>{var g;if(c.path===""||!((g=c.path)!=null&&g.includes("?")))l(c,f);else for(let y of iv(c.path))l(c,f,!0,y)}),e}function iv(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=iv(s.join("/")),f=[];return f.push(...c.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...c),f.map(g=>n.startsWith("/")&&g===""?"/":g)}function JT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:sx(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var YT=/^:[\w-]+$/,XT=3,ZT=2,ex=1,tx=10,nx=-2,my=n=>n==="*";function rx(n,e){let t=n.split("/"),s=t.length;return t.some(my)&&(s+=nx),e&&(s+=ZT),t.filter(o=>!my(o)).reduce((o,l)=>o+(YT.test(l)?XT:l===""?ex:tx),s)}function sx(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function ix(n,e,t=!1){let{routesMeta:s}=n,o={},l="/",c=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=Sc({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),x=g.route;if(!T&&y&&t&&!s[s.length-1].route.index&&(T=Sc({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!T)return null;Object.assign(o,T.params),c.push({params:o,pathname:Or([l,T.pathname]),pathnameBase:hx(Or([l,T.pathnameBase])),route:x}),T.pathnameBase!=="/"&&(l=Or([l,T.pathnameBase]))}return c}function Sc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=ox(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,{paramName:w,isOptional:T},x)=>{if(w==="*"){let F=f[x]||"";c=l.slice(0,l.length-F.length).replace(/(.)\/+$/,"$1")}const k=f[x];return T&&!k?y[w]=void 0:y[w]=(k||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function ox(n,e=!1,t=!0){dr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function ax(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function jr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ux(n,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?Go(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=gy(t.substring(1),"/"):l=gy(t,e)):l=e,{pathname:l,search:dx(s),hash:fx(o)}}function gy(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function $d(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ov(n){let e=cx(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function av(n,e,t,s=!1){let o;typeof n=="string"?o=Go(n):(o={...n},nt(!o.pathname||!o.pathname.includes("?"),$d("?","pathname","search",o)),nt(!o.pathname||!o.pathname.includes("#"),$d("#","pathname","hash",o)),nt(!o.search||!o.search.includes("#"),$d("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,f;if(c==null)f=t;else{let T=e.length-1;if(!s&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),T-=1;o.pathname=x.join("/")}f=T>=0?e[T]:"/"}let g=ux(o,f),y=c&&c!=="/"&&c.endsWith("/"),w=(l||c===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var Or=n=>n.join("/").replace(/\/\/+/g,"/"),hx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),dx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,fx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,px=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function mx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function gx(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var lv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function uv(n,e){let t=n;if(typeof t!="string"||!lx.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,o=!1;if(lv)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=jr(c.pathname,e);c.origin===l.origin&&f!=null?t=f+c.search+c.hash:o=!0}catch{dr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cv=["POST","PUT","PATCH","DELETE"];new Set(cv);var yx=["GET",...cv];new Set(yx);var Ko=$.createContext(null);Ko.displayName="DataRouter";var Wc=$.createContext(null);Wc.displayName="DataRouterState";var _x=$.createContext(!1),hv=$.createContext({isTransitioning:!1});hv.displayName="ViewTransition";var vx=$.createContext(new Map);vx.displayName="Fetchers";var wx=$.createContext(null);wx.displayName="Await";var Sn=$.createContext(null);Sn.displayName="Navigation";var Rl=$.createContext(null);Rl.displayName="Location";var pr=$.createContext({outlet:null,matches:[],isDataRoute:!1});pr.displayName="Route";var zf=$.createContext(null);zf.displayName="RouteError";var dv="REACT_ROUTER_ERROR",Ex="REDIRECT",Tx="ROUTE_ERROR_RESPONSE";function xx(n){if(n.startsWith(`${dv}:${Ex}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Ix(n){if(n.startsWith(`${dv}:${Tx}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new px(e.status,e.statusText,e.data)}catch{}}function Sx(n,{relative:e}={}){nt(Al(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=$.useContext(Sn),{hash:o,pathname:l,search:c}=Cl(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Or([t,l])),s.createHref({pathname:f,search:c,hash:o})}function Al(){return $.useContext(Rl)!=null}function Ni(){return nt(Al(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Rl).location}var fv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pv(n){$.useContext(Sn).static||$.useLayoutEffect(n)}function mv(){let{isDataRoute:n}=$.useContext(pr);return n?Ux():Rx()}function Rx(){nt(Al(),"useNavigate() may be used only in the context of a <Router> component.");let n=$.useContext(Ko),{basename:e,navigator:t}=$.useContext(Sn),{matches:s}=$.useContext(pr),{pathname:o}=Ni(),l=JSON.stringify(ov(s)),c=$.useRef(!1);return pv(()=>{c.current=!0}),$.useCallback((g,y={})=>{if(dr(c.current,fv),!c.current)return;if(typeof g=="number"){t.go(g);return}let w=av(g,JSON.parse(l),o,y.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Or([e,w.pathname])),(y.replace?t.replace:t.push)(w,y.state,y)},[e,t,l,o,n])}$.createContext(null);function Ax(){let{matches:n}=$.useContext(pr),e=n[n.length-1];return e?e.params:{}}function Cl(n,{relative:e}={}){let{matches:t}=$.useContext(pr),{pathname:s}=Ni(),o=JSON.stringify(ov(t));return $.useMemo(()=>av(n,JSON.parse(o),s,e==="path"),[n,o,s,e])}function Cx(n,e){return gv(n,e)}function gv(n,e,t,s,o){var Z;nt(Al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=$.useContext(Sn),{matches:c}=$.useContext(pr),f=c[c.length-1],g=f?f.params:{},y=f?f.pathname:"/",w=f?f.pathnameBase:"/",T=f&&f.route;{let K=T&&T.path||"";_v(y,!T||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let x=Ni(),k;if(e){let K=typeof e=="string"?Go(e):e;nt(w==="/"||((Z=K.pathname)==null?void 0:Z.startsWith(w)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${K.pathname}" was given in the \`location\` prop.`),k=K}else k=x;let F=k.pathname||"/",B=F;if(w!=="/"){let K=w.replace(/^\//,"").split("/");B="/"+F.replace(/^\//,"").split("/").slice(K.length).join("/")}let L=rv(n,{pathname:B});dr(T||L!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),dr(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=Dx(L&&L.map(K=>Object.assign({},K,{params:Object.assign({},g,K.params),pathname:Or([w,l.encodeLocation?l.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?w:Or([w,l.encodeLocation?l.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),c,t,s,o);return e&&J?$.createElement(Rl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},J):J}function kx(){let n=jx(),e=mx(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:l},"ErrorBoundary")," or"," ",$.createElement("code",{style:l},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:o},t):null,c)}var Px=$.createElement(kx,null),yv=class extends $.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=Ix(n.digest);t&&(n=t)}let e=n!==void 0?$.createElement(pr.Provider,{value:this.props.routeContext},$.createElement(zf.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?$.createElement(Nx,{error:n},e):e}};yv.contextType=_x;var qd=new WeakMap;function Nx({children:n,error:e}){let{basename:t}=$.useContext(Sn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=xx(e.digest);if(s){let o=qd.get(e);if(o)throw o;let l=uv(s.location,t);if(lv&&!qd.get(e))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw qd.set(e,c),c}return $.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function bx({routeContext:n,match:e,children:t}){let s=$.useContext(Ko);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(pr.Provider,{value:n},t)}function Dx(n,e=[],t=null,s=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let w=l.findIndex(T=>T.route.id&&(c==null?void 0:c[T.route.id])!==void 0);nt(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,w+1))}let f=!1,g=-1;if(t)for(let w=0;w<l.length;w++){let T=l[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=w),T.route.id){let{loaderData:x,errors:k}=t,F=T.route.loader&&!x.hasOwnProperty(T.route.id)&&(!k||k[T.route.id]===void 0);if(T.route.lazy||F){f=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}let y=t&&s?(w,T)=>{var x,k;s(w,{location:t.location,params:((k=(x=t.matches)==null?void 0:x[0])==null?void 0:k.params)??{},unstable_pattern:gx(t.matches),errorInfo:T})}:void 0;return l.reduceRight((w,T,x)=>{let k,F=!1,B=null,L=null;t&&(k=c&&T.route.id?c[T.route.id]:void 0,B=T.route.errorElement||Px,f&&(g<0&&x===0?(_v("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,L=null):g===x&&(F=!0,L=T.route.hydrateFallbackElement||null)));let J=e.concat(l.slice(0,x+1)),Z=()=>{let K;return k?K=B:F?K=L:T.route.Component?K=$.createElement(T.route.Component,null):T.route.element?K=T.route.element:K=w,$.createElement(bx,{match:T,routeContext:{outlet:w,matches:J,isDataRoute:t!=null},children:K})};return t&&(T.route.ErrorBoundary||T.route.errorElement||x===0)?$.createElement(yv,{location:t.location,revalidation:t.revalidation,component:B,error:k,children:Z(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:y}):Z()},null)}function $f(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vx(n){let e=$.useContext(Ko);return nt(e,$f(n)),e}function Lx(n){let e=$.useContext(Wc);return nt(e,$f(n)),e}function Ox(n){let e=$.useContext(pr);return nt(e,$f(n)),e}function qf(n){let e=Ox(n),t=e.matches[e.matches.length-1];return nt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Mx(){return qf("useRouteId")}function jx(){var s;let n=$.useContext(zf),e=Lx("useRouteError"),t=qf("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function Ux(){let{router:n}=Vx("useNavigate"),e=qf("useNavigate"),t=$.useRef(!1);return pv(()=>{t.current=!0}),$.useCallback(async(o,l={})=>{dr(t.current,fv),t.current&&(typeof o=="number"?await n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var yy={};function _v(n,e,t){!e&&!yy[n]&&(yy[n]=!0,dr(!1,t))}$.memo(Fx);function Fx({routes:n,future:e,state:t,onError:s}){return gv(n,void 0,t,s,e)}function el(n){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Bx({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1,unstable_useTransitions:c}){nt(!Al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),g=$.useMemo(()=>({basename:f,navigator:o,static:l,unstable_useTransitions:c,future:{}}),[f,o,l,c]);typeof t=="string"&&(t=Go(t));let{pathname:y="/",search:w="",hash:T="",state:x=null,key:k="default"}=t,F=$.useMemo(()=>{let B=jr(y,f);return B==null?null:{location:{pathname:B,search:w,hash:T,state:x,key:k},navigationType:s}},[f,y,w,T,x,k,s]);return dr(F!=null,`<Router basename="${f}"> is not able to match the URL "${y}${w}${T}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:$.createElement(Sn.Provider,{value:g},$.createElement(Rl.Provider,{children:e,value:F}))}function zx({children:n,location:e}){return Cx(hf(n),e)}function hf(n,e=[]){let t=[];return $.Children.forEach(n,(s,o)=>{if(!$.isValidElement(s))return;let l=[...e,o];if(s.type===$.Fragment){t.push.apply(t,hf(s.props.children,l));return}nt(s.type===el,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=hf(s.props.children,l)),t.push(c)}),t}var fc="get",pc="application/x-www-form-urlencoded";function Gc(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function $x(n){return Gc(n)&&n.tagName.toLowerCase()==="button"}function qx(n){return Gc(n)&&n.tagName.toLowerCase()==="form"}function Hx(n){return Gc(n)&&n.tagName.toLowerCase()==="input"}function Wx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Gx(n,e){return n.button===0&&(!e||e==="_self")&&!Wx(n)}var rc=null;function Kx(){if(rc===null)try{new FormData(document.createElement("form"),0),rc=!1}catch{rc=!0}return rc}var Qx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hd(n){return n!=null&&!Qx.has(n)?(dr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pc}"`),null):n}function Jx(n,e){let t,s,o,l,c;if(qx(n)){let f=n.getAttribute("action");s=f?jr(f,e):null,t=n.getAttribute("method")||fc,o=Hd(n.getAttribute("enctype"))||pc,l=new FormData(n)}else if($x(n)||Hx(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=n.getAttribute("formaction")||f.getAttribute("action");if(s=g?jr(g,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||fc,o=Hd(n.getAttribute("formenctype"))||Hd(f.getAttribute("enctype"))||pc,l=new FormData(f,n),!Kx()){let{name:y,type:w,value:T}=n;if(w==="image"){let x=y?`${y}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else y&&l.append(y,T)}}else{if(Gc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fc,s=null,o=pc,c=n}return l&&o==="text/plain"&&(c=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hf(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Yx(n,e,t,s){let o=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:e&&jr(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function Xx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function e1(n,e,t){let s=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await Xx(l,t);return c.links?c.links():[]}return[]}));return s1(s.flat(1).filter(Zx).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function _y(n,e,t,s,o,l){let c=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,f=(g,y)=>{var w;return t[y].pathname!==g.pathname||((w=t[y].route.path)==null?void 0:w.endsWith("*"))&&t[y].params["*"]!==g.params["*"]};return l==="assets"?e.filter((g,y)=>c(g,y)||f(g,y)):l==="data"?e.filter((g,y)=>{var T;let w=s.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(c(g,y)||f(g,y))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(n,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function t1(n,e,{includeHydrateFallback:t}={}){return n1(n.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function n1(n){return[...new Set(n)]}function r1(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function s1(n,e){let t=new Set;return new Set(e),n.reduce((s,o)=>{let l=JSON.stringify(r1(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function vv(){let n=$.useContext(Ko);return Hf(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function i1(){let n=$.useContext(Wc);return Hf(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Wf=$.createContext(void 0);Wf.displayName="FrameworkContext";function wv(){let n=$.useContext(Wf);return Hf(n,"You must render this element inside a <HydratedRouter> element"),n}function o1(n,e){let t=$.useContext(Wf),[s,o]=$.useState(!1),[l,c]=$.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:T}=e,x=$.useRef(null);$.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let B=J=>{J.forEach(Z=>{c(Z.isIntersecting)})},L=new IntersectionObserver(B,{threshold:.5});return x.current&&L.observe(x.current),()=>{L.disconnect()}}},[n]),$.useEffect(()=>{if(s){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[s]);let k=()=>{o(!0)},F=()=>{o(!1),c(!1)};return t?n!=="intent"?[l,x,{}]:[l,x,{onFocus:Ja(f,k),onBlur:Ja(g,F),onMouseEnter:Ja(y,k),onMouseLeave:Ja(w,F),onTouchStart:Ja(T,k)}]:[!1,x,{}]}function Ja(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function a1({page:n,...e}){let{router:t}=vv(),s=$.useMemo(()=>rv(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?$.createElement(u1,{page:n,matches:s,...e}):null}function l1(n){let{manifest:e,routeModules:t}=wv(),[s,o]=$.useState([]);return $.useEffect(()=>{let l=!1;return e1(n,e,t).then(c=>{l||o(c)}),()=>{l=!0}},[n,e,t]),s}function u1({page:n,matches:e,...t}){let s=Ni(),{future:o,manifest:l,routeModules:c}=wv(),{basename:f}=vv(),{loaderData:g,matches:y}=i1(),w=$.useMemo(()=>_y(n,e,y,l,s,"data"),[n,e,y,l,s]),T=$.useMemo(()=>_y(n,e,y,l,s,"assets"),[n,e,y,l,s]),x=$.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let B=new Set,L=!1;if(e.forEach(Z=>{var ue;let K=l.routes[Z.route.id];!K||!K.hasLoader||(!w.some(me=>me.route.id===Z.route.id)&&Z.route.id in g&&((ue=c[Z.route.id])!=null&&ue.shouldRevalidate)||K.hasClientLoader?L=!0:B.add(Z.route.id))}),B.size===0)return[];let J=Yx(n,f,o.unstable_trailingSlashAwareDataRequests,"data");return L&&B.size>0&&J.searchParams.set("_routes",e.filter(Z=>B.has(Z.route.id)).map(Z=>Z.route.id).join(",")),[J.pathname+J.search]},[f,o.unstable_trailingSlashAwareDataRequests,g,s,l,w,e,n,c]),k=$.useMemo(()=>t1(T,l),[T,l]),F=l1(T);return $.createElement($.Fragment,null,x.map(B=>$.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),k.map(B=>$.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),F.map(({key:B,link:L})=>$.createElement("link",{key:B,nonce:t.nonce,...L,crossOrigin:L.crossOrigin??t.crossOrigin})))}function c1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var h1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{h1&&(window.__reactRouterVersion="7.13.0")}catch{}function d1({basename:n,children:e,unstable_useTransitions:t,window:s}){let o=$.useRef();o.current==null&&(o.current=HT({window:s,v5Compat:!0}));let l=o.current,[c,f]=$.useState({action:l.action,location:l.location}),g=$.useCallback(y=>{t===!1?f(y):$.startTransition(()=>f(y))},[t]);return $.useLayoutEffect(()=>l.listen(g),[l,g]),$.createElement(Bx,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var Ev=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tv=$.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:c,state:f,target:g,to:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:x,...k},F){let{basename:B,unstable_useTransitions:L}=$.useContext(Sn),J=typeof y=="string"&&Ev.test(y),Z=uv(y,B);y=Z.to;let K=Sx(y,{relative:o}),[ue,me,se]=o1(s,k),P=g1(y,{replace:c,state:f,target:g,preventScrollReset:w,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:x,unstable_useTransitions:L});function S(b){e&&e(b),b.defaultPrevented||P(b)}let C=$.createElement("a",{...k,...se,href:Z.absoluteURL||K,onClick:Z.isExternal||l?e:S,ref:c1(F,me),target:g,"data-discover":!J&&t==="render"?"true":void 0});return ue&&!J?$.createElement($.Fragment,null,C,$.createElement(a1,{page:K})):C});Tv.displayName="Link";var f1=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:f,children:g,...y},w){let T=Cl(c,{relative:y.relative}),x=Ni(),k=$.useContext(Wc),{navigator:F,basename:B}=$.useContext(Sn),L=k!=null&&E1(T)&&f===!0,J=F.encodeLocation?F.encodeLocation(T).pathname:T.pathname,Z=x.pathname,K=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(Z=Z.toLowerCase(),K=K?K.toLowerCase():null,J=J.toLowerCase()),K&&B&&(K=jr(K,B)||K);const ue=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let me=Z===J||!o&&Z.startsWith(J)&&Z.charAt(ue)==="/",se=K!=null&&(K===J||!o&&K.startsWith(J)&&K.charAt(J.length)==="/"),P={isActive:me,isPending:se,isTransitioning:L},S=me?e:void 0,C;typeof s=="function"?C=s(P):C=[s,me?"active":null,se?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let b=typeof l=="function"?l(P):l;return $.createElement(Tv,{...y,"aria-current":S,className:C,ref:w,style:b,to:c,viewTransition:f},typeof g=="function"?g(P):g)});f1.displayName="NavLink";var p1=$.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:c=fc,action:f,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:x,...k},F)=>{let{unstable_useTransitions:B}=$.useContext(Sn),L=v1(),J=w1(f,{relative:y}),Z=c.toLowerCase()==="get"?"get":"post",K=typeof f=="string"&&Ev.test(f),ue=me=>{if(g&&g(me),me.defaultPrevented)return;me.preventDefault();let se=me.nativeEvent.submitter,P=(se==null?void 0:se.getAttribute("formmethod"))||c,S=()=>L(se||me.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:o,state:l,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:x});B&&t!==!1?$.startTransition(()=>S()):S()};return $.createElement("form",{ref:F,method:Z,action:J,onSubmit:s?g:ue,...k,"data-discover":!K&&n==="render"?"true":void 0})});p1.displayName="Form";function m1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xv(n){let e=$.useContext(Ko);return nt(e,m1(n)),e}function g1(n,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:g}={}){let y=mv(),w=Ni(),T=Cl(n,{relative:l});return $.useCallback(x=>{if(Gx(x,e)){x.preventDefault();let k=t!==void 0?t:dl(w)===dl(T),F=()=>y(n,{replace:k,state:s,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});g?$.startTransition(()=>F()):F()}},[w,y,T,t,s,e,n,o,l,c,f,g])}var y1=0,_1=()=>`__${String(++y1)}__`;function v1(){let{router:n}=xv("useSubmit"),{basename:e}=$.useContext(Sn),t=Mx(),s=n.fetch,o=n.navigate;return $.useCallback(async(l,c={})=>{let{action:f,method:g,encType:y,formData:w,body:T}=Jx(l,e);if(c.navigate===!1){let x=c.fetcherKey||_1();await s(x,t,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:w,body:T,formMethod:c.method||g,formEncType:c.encType||y,flushSync:c.flushSync})}else await o(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:w,body:T,formMethod:c.method||g,formEncType:c.encType||y,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[s,o,e,t])}function w1(n,{relative:e}={}){let{basename:t}=$.useContext(Sn),s=$.useContext(pr);nt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...Cl(n||".",{relative:e})},c=Ni();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),g=f.getAll("index");if(g.some(w=>w==="")){f.delete("index"),g.filter(T=>T).forEach(T=>f.append("index",T));let w=f.toString();l.search=w?`?${w}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Or([t,l.pathname])),dl(l)}function E1(n,{relative:e}={}){let t=$.useContext(hv);nt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=xv("useViewTransitionState"),o=Cl(n,{relative:e});if(!t.isTransitioning)return!1;let l=jr(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=jr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Sc(o.pathname,c)!=null||Sc(o.pathname,l)!=null}const T1=()=>{};var vy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},x1=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],g=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,g=o+2<n.length,y=g?n[o+2]:0,w=l>>2,T=(l&3)<<4|f>>4;let x=(f&15)<<2|y>>6,k=y&63;g||(k=64,c||(x=64)),s.push(t[w],t[T],t[x],t[k])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Iv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):x1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new I1;const x=l<<2|f>>4;if(s.push(x),y!==64){const k=f<<4&240|y>>2;if(s.push(k),T!==64){const F=y<<6&192|T;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class I1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S1=function(n){const e=Iv(n);return Sv.encodeByteArray(e,!0)},Rc=function(n){return S1(n).replace(/\./g,"")},Rv=function(n){try{return Sv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=()=>R1().__FIREBASE_DEFAULTS__,C1=()=>{if(typeof process>"u"||typeof vy>"u")return;const n=vy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},k1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Rv(n[1]);return e&&JSON.parse(e)},Kc=()=>{try{return T1()||A1()||C1()||k1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Av=n=>{var e,t;return(t=(e=Kc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Cv=n=>{const e=Av(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},kv=()=>{var n;return(n=Kc())==null?void 0:n.config},Pv=n=>{var e;return(e=Kc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gf(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Rc(JSON.stringify(t)),Rc(JSON.stringify(c)),""].join(".")}const il={};function N1(){const n={prod:[],emulator:[]};for(const e of Object.keys(il))il[e]?n.emulator.push(e):n.prod.push(e);return n}function b1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let wy=!1;function Kf(n,e){if(typeof window>"u"||typeof document>"u"||!Bs(window.location.host)||il[n]===e||il[n]||wy)return;il[n]=e;function t(x){return`__firebase__banner__${x}`}const s="__firebase__banner",l=N1().prod.length>0;function c(){const x=document.getElementById(s);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,k){x.setAttribute("width","24"),x.setAttribute("id",k),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{wy=!0,c()},x}function w(x,k){x.setAttribute("id",k),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=b1(s),k=t("text"),F=document.getElementById(k)||document.createElement("span"),B=t("learnmore"),L=document.getElementById(B)||document.createElement("a"),J=t("preprendIcon"),Z=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const K=x.element;f(K),w(L,B);const ue=y();g(Z,J),K.append(Z,F,L,ue),document.body.appendChild(K)}l?(F.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function V1(){var e;const n=(e=Kc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function M1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j1(){const n=qt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function U1(){return!V1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F1(){try{return typeof indexedDB=="object"}catch{return!1}}function B1(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="FirebaseError";class mr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=z1,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kl.prototype.create)}}class kl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?$1(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new mr(o,f,s)}}function $1(n,e){return n.replace(q1,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const q1=/\{\$([^}]+)}/g;function H1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ii(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(Ey(l)&&Ey(c)){if(!Ii(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Ey(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function W1(n,e){const t=new G1(n,e);return t.subscribe.bind(t)}class G1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");K1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Wd),o.error===void 0&&(o.error=Wd),o.complete===void 0&&(o.complete=Wd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(n){return n&&n._delegate?n._delegate:n}class Ds{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new P1;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y1(e))try{this.getOrInitializeService({instanceIdentifier:_i})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=_i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_i){return this.instances.has(e)}getOptions(e=_i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:J1(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=_i){return this.component?this.component.multipleInstances?e:_i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J1(n){return n===_i?void 0:n}function Y1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Q1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pe||(Pe={}));const Z1={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},eI=Pe.INFO,tI={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},nI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=tI[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qf{constructor(e){this.name=e,this._logLevel=eI,this._logHandler=nI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const rI=(n,e)=>e.some(t=>n instanceof t);let Ty,xy;function sI(){return Ty||(Ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iI(){return xy||(xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bv=new WeakMap,df=new WeakMap,Dv=new WeakMap,Gd=new WeakMap,Jf=new WeakMap;function oI(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(As(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&bv.set(t,n)}).catch(()=>{}),Jf.set(e,n),e}function aI(n){if(df.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});df.set(n,e)}let ff={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return df.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Dv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return As(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function lI(n){ff=n(ff)}function uI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Kd(this),e,...t);return Dv.set(s,e.sort?e.sort():[e]),As(s)}:iI().includes(n)?function(...e){return n.apply(Kd(this),e),As(bv.get(this))}:function(...e){return As(n.apply(Kd(this),e))}}function cI(n){return typeof n=="function"?uI(n):(n instanceof IDBTransaction&&aI(n),rI(n,sI())?new Proxy(n,ff):n)}function As(n){if(n instanceof IDBRequest)return oI(n);if(Gd.has(n))return Gd.get(n);const e=cI(n);return e!==n&&(Gd.set(n,e),Jf.set(e,n)),e}const Kd=n=>Jf.get(n);function hI(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=As(c);return s&&c.addEventListener("upgradeneeded",g=>{s(As(c.result),g.oldVersion,g.newVersion,As(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const dI=["get","getKey","getAll","getAllKeys","count"],fI=["put","add","delete","clear"],Qd=new Map;function Iy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qd.get(e))return Qd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=fI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||dI.includes(t)))return;const l=async function(c,...f){const g=this.transaction(c,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Qd.set(e,l),l}lI(n=>({...n,get:(e,t,s)=>Iy(e,t)||n.get(e,t,s),has:(e,t)=>!!Iy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function mI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pf="@firebase/app",Sy="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Qf("@firebase/app"),gI="@firebase/app-compat",yI="@firebase/analytics-compat",_I="@firebase/analytics",vI="@firebase/app-check-compat",wI="@firebase/app-check",EI="@firebase/auth",TI="@firebase/auth-compat",xI="@firebase/database",II="@firebase/data-connect",SI="@firebase/database-compat",RI="@firebase/functions",AI="@firebase/functions-compat",CI="@firebase/installations",kI="@firebase/installations-compat",PI="@firebase/messaging",NI="@firebase/messaging-compat",bI="@firebase/performance",DI="@firebase/performance-compat",VI="@firebase/remote-config",LI="@firebase/remote-config-compat",OI="@firebase/storage",MI="@firebase/storage-compat",jI="@firebase/firestore",UI="@firebase/ai",FI="@firebase/firestore-compat",BI="firebase",zI="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="[DEFAULT]",$I={[pf]:"fire-core",[gI]:"fire-core-compat",[_I]:"fire-analytics",[yI]:"fire-analytics-compat",[wI]:"fire-app-check",[vI]:"fire-app-check-compat",[EI]:"fire-auth",[TI]:"fire-auth-compat",[xI]:"fire-rtdb",[II]:"fire-data-connect",[SI]:"fire-rtdb-compat",[RI]:"fire-fn",[AI]:"fire-fn-compat",[CI]:"fire-iid",[kI]:"fire-iid-compat",[PI]:"fire-fcm",[NI]:"fire-fcm-compat",[bI]:"fire-perf",[DI]:"fire-perf-compat",[VI]:"fire-rc",[LI]:"fire-rc-compat",[OI]:"fire-gcs",[MI]:"fire-gcs-compat",[jI]:"fire-fst",[FI]:"fire-fst-compat",[UI]:"fire-vertex","fire-js":"fire-js",[BI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new Map,qI=new Map,gf=new Map;function Ry(n,e){try{n.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Si(n){const e=n.name;if(gf.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;gf.set(e,n);for(const t of Ac.values())Ry(t,n);for(const t of qI.values())Ry(t,n);return!0}function Qc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cs=new kl("app","Firebase",HI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=zI;function Vv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:mf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Cs.create("bad-app-name",{appName:String(o)});if(t||(t=kv()),!t)throw Cs.create("no-options");const l=Ac.get(o);if(l){if(Ii(t,l.options)&&Ii(s,l.config))return l;throw Cs.create("duplicate-app",{appName:o})}const c=new X1(o);for(const g of gf.values())c.addComponent(g);const f=new WI(t,s,c);return Ac.set(o,f),f}function Yf(n=mf){const e=Ac.get(n);if(!e&&n===mf&&kv())return Vv();if(!e)throw Cs.create("no-app",{appName:n});return e}function ir(n,e,t){let s=$I[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(c.join(" "));return}Si(new Ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="firebase-heartbeat-database",KI=1,fl="firebase-heartbeat-store";let Jd=null;function Lv(){return Jd||(Jd=hI(GI,KI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Cs.create("idb-open",{originalErrorMessage:n.message})})),Jd}async function QI(n){try{const t=(await Lv()).transaction(fl),s=await t.objectStore(fl).get(Ov(n));return await t.done,s}catch(e){if(e instanceof mr)Ur.warn(e.message);else{const t=Cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(t.message)}}}async function Ay(n,e){try{const s=(await Lv()).transaction(fl,"readwrite");await s.objectStore(fl).put(e,Ov(n)),await s.done}catch(t){if(t instanceof mr)Ur.warn(t.message);else{const s=Cs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ur.warn(s.message)}}}function Ov(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=1024,YI=30;class XI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Cy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>YI){const c=tS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ur.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Cy(),{heartbeatsToSend:s,unsentEntries:o}=ZI(this._heartbeatsCache.heartbeats),l=Rc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ur.warn(t),""}}}function Cy(){return new Date().toISOString().substring(0,10)}function ZI(n,e=JI){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),ky(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ky(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class eS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F1()?B1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await QI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ay(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ay(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ky(n){return Rc(JSON.stringify({version:2,heartbeats:n})).length}function tS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n){Si(new Ds("platform-logger",e=>new pI(e),"PRIVATE")),Si(new Ds("heartbeat",e=>new XI(e),"PRIVATE")),ir(pf,Sy,n),ir(pf,Sy,"esm2020"),ir("fire-js","")}nS("");function Mv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rS=Mv,jv=new kl("auth","Firebase",Mv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Qf("@firebase/auth");function sS(n,...e){Cc.logLevel<=Pe.WARN&&Cc.warn(`Auth (${bi}): ${n}`,...e)}function mc(n,...e){Cc.logLevel<=Pe.ERROR&&Cc.error(`Auth (${bi}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n,...e){throw Xf(n,...e)}function or(n,...e){return Xf(n,...e)}function Uv(n,e,t){const s={...rS(),[e]:t};return new kl("auth","Firebase",s).create(e,{appName:n.name})}function ks(n){return Uv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xf(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return jv.create(n,...e)}function Ee(n,e,...t){if(!n)throw Xf(e,...t)}function Vr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mc(e),new Error(e)}function Br(n,e){n||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function iS(){return Py()==="http:"||Py()==="https:"}function Py(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iS()||O1()||"connection"in navigator)?navigator.onLine:!0}function aS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Br(t>e,"Short delay should be less than long delay!"),this.isMobile=D1()||M1()}get(){return oS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(n,e){Br(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cS=new Nl(3e4,6e4);function Jc(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Qo(n,e,t,s,o={}){return Bv(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=Pl({key:n.config.apiKey,...c}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:g,...l};return L1()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Bs(n.emulatorConfig.host)&&(y.credentials="include"),Fv.fetch()(await $v(n,n.config.apiHost,t,f),y)})}async function Bv(n,e,t){n._canInitEmulator=!1;const s={...lS,...e};try{const o=new hS(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw sc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw sc(n,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw sc(n,"email-already-in-use",c);if(g==="USER_DISABLED")throw sc(n,"user-disabled",c);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Uv(n,w,y);Fr(n,w)}}catch(o){if(o instanceof mr)throw o;Fr(n,"network-request-failed",{message:String(o)})}}async function zv(n,e,t,s,o={}){const l=await Qo(n,e,t,s,o);return"mfaPendingCredential"in l&&Fr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function $v(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Zf(n.config,o):`${n.config.apiScheme}://${o}`;return uS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class hS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(or(this.auth,"network-request-failed")),cS.get())})}}function sc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=or(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(n,e){return Qo(n,"POST","/v1/accounts:delete",e)}async function kc(n,e){return Qo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fS(n,e=!1){const t=ft(n),s=await t.getIdToken(e),o=ep(s);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:ol(Yd(o.auth_time)),issuedAtTime:ol(Yd(o.iat)),expirationTime:ol(Yd(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Yd(n){return Number(n)*1e3}function ep(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Rv(t);return o?JSON.parse(o):(mc("Failed to decode base64 JWT payload"),null)}catch(o){return mc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Ny(n){const e=ep(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof mr&&pS(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function pS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(n){var T;const e=n.auth,t=await n.getIdToken(),s=await pl(n,kc(e,{idToken:t}));Ee(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?qv(o.providerUserInfo):[],c=yS(n.providerData,l),f=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),y=f?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new _f(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,w)}async function gS(n){const e=ft(n);await Pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yS(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function qv(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(n,e){const t=await Bv(n,{},async()=>{const s=Pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await $v(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return n.emulatorConfig&&Bs(n.emulatorConfig.host)&&(g.credentials="include"),Fv.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vS(n,e){return Qo(n,"POST","/v2/accounts:revokeToken",Jc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=Ny(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await _S(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new bo;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class On{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new mS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _f(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await pl(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fS(this,e)}reload(){return gS(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new On({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Pc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(ks(this.auth));const e=await this.getIdToken();return await pl(this,dS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:T,emailVerified:x,isAnonymous:k,providerData:F,stsTokenManager:B}=t;Ee(T&&B,e,"internal-error");const L=bo.fromJSON(this.name,B);Ee(typeof T=="string",e,"internal-error"),ws(s,e.name),ws(o,e.name),Ee(typeof x=="boolean",e,"internal-error"),Ee(typeof k=="boolean",e,"internal-error"),ws(l,e.name),ws(c,e.name),ws(f,e.name),ws(g,e.name),ws(y,e.name),ws(w,e.name);const J=new On({uid:T,auth:e,email:o,emailVerified:x,displayName:s,isAnonymous:k,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:y,lastLoginAt:w});return F&&Array.isArray(F)&&(J.providerData=F.map(Z=>({...Z}))),g&&(J._redirectEventId=g),J}static async _fromIdTokenResponse(e,t,s=!1){const o=new bo;o.updateFromServerResponse(t);const l=new On({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Pc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?qv(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new bo;f.updateFromIdToken(s);const g=new On({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new _f(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Map;function Lr(n){Br(n instanceof Function,"Expected a class definition");let e=by.get(n);return e?(Br(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,by.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Hv.type="NONE";const Dy=Hv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n,e,t){return`firebase:${n}:${e}:${t}`}class Do{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=gc(this.userKey,o.apiKey,l),this.fullPersistenceKey=gc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kc(this.auth,{idToken:e}).catch(()=>{});return t?On._fromGetAccountInfoResponse(this.auth,t,e):null}return On._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Do(Lr(Dy),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Lr(Dy);const c=gc(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(c);if(w){let T;if(typeof w=="string"){const x=await kc(e,{idToken:w}).catch(()=>{});if(!x)break;T=await On._fromGetAccountInfoResponse(e,x,w)}else T=On._fromJSON(e,w);y!==l&&(f=T),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Do(l,e,s):(l=g[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new Do(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Wv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yv(e))return"Blackberry";if(Xv(e))return"Webos";if(Gv(e))return"Safari";if((e.includes("chrome/")||Kv(e))&&!e.includes("edge/"))return"Chrome";if(Jv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Wv(n=qt()){return/firefox\//i.test(n)}function Gv(n=qt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kv(n=qt()){return/crios\//i.test(n)}function Qv(n=qt()){return/iemobile/i.test(n)}function Jv(n=qt()){return/android/i.test(n)}function Yv(n=qt()){return/blackberry/i.test(n)}function Xv(n=qt()){return/webos/i.test(n)}function tp(n=qt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function wS(n=qt()){var e;return tp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function ES(){return j1()&&document.documentMode===10}function Zv(n=qt()){return tp(n)||Jv(n)||Xv(n)||Yv(n)||/windows phone/i.test(n)||Qv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(n,e=[]){let t;switch(n){case"Browser":t=Vy(qt());break;case"Worker":t=`${Vy(qt())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const g=e(l);c(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(n,e={}){return Qo(n,"GET","/v2/passwordPolicy",Jc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=6;class SS{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??IS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ly(this),this.idTokenSubscription=new Ly(this),this.beforeStateQueue=new TS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kc(this,{idToken:e}),s=await On._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(xn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===f)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(ks(this));const t=e?ft(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xS(this),t=new SS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await vS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=e0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&sS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Yc(n){return ft(n)}class Ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=W1(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let np={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AS(n){np=n}function CS(n){return np.loadJS(n)}function kS(){return np.gapiScript}function PS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(n,e){const t=Qc(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ii(l,e??{}))return o;Fr(o,"already-initialized")}return t.initialize({options:e})}function bS(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Lr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function DS(n,e,t){const s=Yc(n);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=t0(e),{host:c,port:f}=VS(e),g=f===null?"":`:${f}`,y={url:`${l}//${c}${g}/`},w=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(Ii(y,s.config.emulator)&&Ii(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,Bs(c)?(Gf(`${l}//${c}${g}`),Kf("Auth",!0)):LS()}function t0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function VS(n){const e=t0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Oy(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Oy(c)}}}function Oy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function LS(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(n,e){return zv(n,"POST","/v1/accounts:signInWithIdp",Jc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="http://localhost";class Ri extends n0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ri(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Ri(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Vo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Vo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vo(e,t)}buildRequest(){const e={requestUri:OS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends r0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends bl{constructor(){super("facebook.com")}static credential(e){return Ri._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ri._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ts.credential(t,s)}catch{return null}}}Ts.GOOGLE_SIGN_IN_METHOD="google.com";Ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends bl{constructor(){super("github.com")}static credential(e){return Ri._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends bl{constructor(){super("twitter.com")}static credential(e,t){return Ri._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Is.credential(t,s)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(n,e){return zv(n,"POST","/v1/accounts:signUp",Jc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await On._fromIdTokenResponse(e,s,o),c=My(s);return new Vs({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=My(s);return new Vs({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function My(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(n){var o;if(xn(n.app))return Promise.reject(ks(n));const e=Yc(n);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new Vs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await MS(e,{returnSecureToken:!0}),s=await Vs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends mr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Nc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Nc(e,t,s,o)}}function s0(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nc._fromErrorAndOperation(n,l,e,s):l})}async function US(n,e,t=!1){const s=await pl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vs._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(n,e,t=!1){const{auth:s}=n;if(xn(s.app))return Promise.reject(ks(s));const o="reauthenticate";try{const l=await pl(n,s0(s,o,e,n),t);Ee(l.idToken,s,"internal-error");const c=ep(l.idToken);Ee(c,s,"internal-error");const{sub:f}=c;return Ee(n.uid===f,s,"user-mismatch"),Vs._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Fr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(n,e,t=!1){if(xn(n.app))return Promise.reject(ks(n));const s="signIn",o=await s0(n,s,e),l=await Vs._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}function zS(n,e,t,s){return ft(n).onIdTokenChanged(e,t,s)}function $S(n,e,t){return ft(n).beforeAuthStateChanged(e,t)}function qS(n,e,t,s){return ft(n).onAuthStateChanged(e,t,s)}const bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bc,"1"),this.storage.removeItem(bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=1e3,WS=10;class o0 extends i0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);ES()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,WS):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},HS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}o0.type="LOCAL";const GS=o0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends i0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}a0.type="SESSION";const l0=a0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Xc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async y=>y(t.origin,l)),g=await KS(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,g)=>{const y=rp("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(T){const x=T;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function JS(n){ar().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function YS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XS(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function ZS(){return u0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="firebaseLocalStorageDb",eR=1,Dc="firebaseLocalStorage",h0="fbase_key";class Dl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zc(n,e){return n.transaction([Dc],e?"readwrite":"readonly").objectStore(Dc)}function tR(){const n=indexedDB.deleteDatabase(c0);return new Dl(n).toPromise()}function vf(){const n=indexedDB.open(c0,eR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Dc,{keyPath:h0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Dc)?e(s):(s.close(),await tR(),e(await vf()))})})}async function jy(n,e,t){const s=Zc(n,!0).put({[h0]:e,value:t});return new Dl(s).toPromise()}async function nR(n,e){const t=Zc(n,!1).get(e),s=await new Dl(t).toPromise();return s===void 0?null:s.value}function Uy(n,e){const t=Zc(n,!0).delete(e);return new Dl(t).toPromise()}const rR=800,sR=3;class d0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>sR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return u0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(ZS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await YS(),!this.activeServiceWorker)return;this.sender=new QS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vf();return await jy(e,bc,"1"),await Uy(e,bc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>jy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>nR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Uy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Zc(o,!1).getAll();return new Dl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d0.type="LOCAL";const iR=d0;new Nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(n,e){return e?Lr(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp extends n0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aR(n){return BS(n.auth,new sp(n),n.bypassAuthState)}function lR(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),FS(t,new sp(n),n.bypassAuthState)}async function uR(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),US(t,new sp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aR;case"linkViaPopup":case"linkViaRedirect":return uR;case"reauthViaPopup":case"reauthViaRedirect":return lR;default:Fr(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new Nl(2e3,1e4);class No extends f0{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cR.get())};e()}}No.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="pendingRedirect",yc=new Map;class dR extends f0{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=yc.get(this.auth._key());if(!e){try{const s=await fR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}yc.set(this.auth._key(),e)}return this.bypassAuthState||yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fR(n,e){const t=gR(e),s=mR(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function pR(n,e){yc.set(n._key(),e)}function mR(n){return Lr(n._redirectPersistence)}function gR(n){return gc(hR,n.config.apiKey,n.name)}async function yR(n,e,t=!1){if(xn(n.app))return Promise.reject(ks(n));const s=Yc(n),o=oR(s,e),c=await new dR(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=600*1e3;class vR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!p0(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(or(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_R&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fy(e))}saveEventToCache(e){this.cachedEventUids.add(Fy(e)),this.lastProcessedEventTime=Date.now()}}function Fy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function p0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return p0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(n,e={}){return Qo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xR=/^https?/;async function IR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ER(n);for(const t of e)try{if(SR(t))return}catch{}Fr(n,"unauthorized-domain")}function SR(n){const e=yf(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!xR.test(t))return!1;if(TR.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new Nl(3e4,6e4);function By(){const n=ar().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function AR(n){return new Promise((e,t)=>{var o,l,c;function s(){By(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{By(),t(or(n,"network-request-failed"))},timeout:RR.get()})}if((l=(o=ar().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=ar().gapi)!=null&&c.load)s();else{const f=PS("iframefcb");return ar()[f]=()=>{gapi.load?s():t(or(n,"network-request-failed"))},CS(`${kS()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw _c=null,e})}let _c=null;function CR(n){return _c=_c||AR(n),_c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=new Nl(5e3,15e3),PR="__/auth/iframe",NR="emulator/auth/iframe",bR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VR(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zf(e,NR):`https://${n.config.authDomain}/${PR}`,s={apiKey:e.apiKey,appName:n.name,v:bi},o=DR.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Pl(s).slice(1)}`}async function LR(n){const e=await CR(n),t=ar().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:VR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bR,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=or(n,"network-request-failed"),f=ar().setTimeout(()=>{l(c)},kR.get());function g(){ar().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MR=500,jR=600,UR="_blank",FR="http://localhost";class zy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BR(n,e,t,s=MR,o=jR){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...OR,width:s.toString(),height:o.toString(),top:l,left:c},y=qt().toLowerCase();t&&(f=Kv(y)?UR:t),Wv(y)&&(e=e||FR,g.scrollbars="yes");const w=Object.entries(g).reduce((x,[k,F])=>`${x}${k}=${F},`,"");if(wS(y)&&f!=="_self")return zR(e||"",f),new zy(null);const T=window.open(e||"",f,w);Ee(T,n,"popup-blocked");try{T.focus()}catch{}return new zy(T)}function zR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="__/auth/handler",qR="emulator/auth/handler",HR=encodeURIComponent("fac");async function $y(n,e,t,s,o,l){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:bi,eventId:o};if(e instanceof r0){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",H1(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))c[w]=T}if(e instanceof bl){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(c.scopes=w.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await n._getAppCheckToken(),y=g?`#${HR}=${encodeURIComponent(g)}`:"";return`${WR(n)}?${Pl(f).slice(1)}${y}`}function WR({config:n}){return n.emulator?Zf(n,qR):`https://${n.authDomain}/${$R}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="webStorageSupport";class GR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=l0,this._completeRedirectFn=yR,this._overrideRedirectResult=pR}async _openPopup(e,t,s,o){var c;Br((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await $y(e,t,s,yf(),o);return BR(e,l,rp())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await $y(e,t,s,yf(),o);return JS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Br(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await LR(e),s=new vR(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xd,{type:Xd},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Xd];l!==void 0&&t(!!l),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Zv()||Gv()||tp()}}const KR=GR;var qy="@firebase/auth",Hy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YR(n){Si(new Ds("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Ee(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e0(n)},y=new RS(s,o,l,g);return bS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Si(new Ds("auth-internal",e=>{const t=Yc(e.getProvider("auth").getImmediate());return(s=>new QR(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(qy,Hy,JR(n)),ir(qy,Hy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=300,ZR=Pv("authIdTokenMaxAge")||XR;let Wy=null;const eA=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>ZR)return;const o=t==null?void 0:t.token;Wy!==o&&(Wy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function tA(n=Yf()){const e=Qc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=NS(n,{popupRedirectResolver:KR,persistence:[iR,GS,l0]}),s=Pv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=eA(l.toString());$S(t,c,()=>c(t.currentUser)),zS(t,f=>c(f))}}const o=Av("auth");return o&&DS(t,`http://${o}`),t}function nA(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}AS({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=or("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",nA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YR("Browser");var rA="firebase",sA="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(rA,sA,"app");var Gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ps,m0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function C(){}C.prototype=S.prototype,P.F=S.prototype,P.prototype=new C,P.prototype.constructor=P,P.D=function(b,D,M){for(var A=Array(arguments.length-2),He=2;He<arguments.length;He++)A[He-2]=arguments[He];return S.prototype[D].apply(b,A)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,S,C){C||(C=0);const b=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)b[D]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(D=0;D<16;++D)b[D]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=P.g[0],C=P.g[1],D=P.g[2];let M=P.g[3],A;A=S+(M^C&(D^M))+b[0]+3614090360&4294967295,S=C+(A<<7&4294967295|A>>>25),A=M+(D^S&(C^D))+b[1]+3905402710&4294967295,M=S+(A<<12&4294967295|A>>>20),A=D+(C^M&(S^C))+b[2]+606105819&4294967295,D=M+(A<<17&4294967295|A>>>15),A=C+(S^D&(M^S))+b[3]+3250441966&4294967295,C=D+(A<<22&4294967295|A>>>10),A=S+(M^C&(D^M))+b[4]+4118548399&4294967295,S=C+(A<<7&4294967295|A>>>25),A=M+(D^S&(C^D))+b[5]+1200080426&4294967295,M=S+(A<<12&4294967295|A>>>20),A=D+(C^M&(S^C))+b[6]+2821735955&4294967295,D=M+(A<<17&4294967295|A>>>15),A=C+(S^D&(M^S))+b[7]+4249261313&4294967295,C=D+(A<<22&4294967295|A>>>10),A=S+(M^C&(D^M))+b[8]+1770035416&4294967295,S=C+(A<<7&4294967295|A>>>25),A=M+(D^S&(C^D))+b[9]+2336552879&4294967295,M=S+(A<<12&4294967295|A>>>20),A=D+(C^M&(S^C))+b[10]+4294925233&4294967295,D=M+(A<<17&4294967295|A>>>15),A=C+(S^D&(M^S))+b[11]+2304563134&4294967295,C=D+(A<<22&4294967295|A>>>10),A=S+(M^C&(D^M))+b[12]+1804603682&4294967295,S=C+(A<<7&4294967295|A>>>25),A=M+(D^S&(C^D))+b[13]+4254626195&4294967295,M=S+(A<<12&4294967295|A>>>20),A=D+(C^M&(S^C))+b[14]+2792965006&4294967295,D=M+(A<<17&4294967295|A>>>15),A=C+(S^D&(M^S))+b[15]+1236535329&4294967295,C=D+(A<<22&4294967295|A>>>10),A=S+(D^M&(C^D))+b[1]+4129170786&4294967295,S=C+(A<<5&4294967295|A>>>27),A=M+(C^D&(S^C))+b[6]+3225465664&4294967295,M=S+(A<<9&4294967295|A>>>23),A=D+(S^C&(M^S))+b[11]+643717713&4294967295,D=M+(A<<14&4294967295|A>>>18),A=C+(M^S&(D^M))+b[0]+3921069994&4294967295,C=D+(A<<20&4294967295|A>>>12),A=S+(D^M&(C^D))+b[5]+3593408605&4294967295,S=C+(A<<5&4294967295|A>>>27),A=M+(C^D&(S^C))+b[10]+38016083&4294967295,M=S+(A<<9&4294967295|A>>>23),A=D+(S^C&(M^S))+b[15]+3634488961&4294967295,D=M+(A<<14&4294967295|A>>>18),A=C+(M^S&(D^M))+b[4]+3889429448&4294967295,C=D+(A<<20&4294967295|A>>>12),A=S+(D^M&(C^D))+b[9]+568446438&4294967295,S=C+(A<<5&4294967295|A>>>27),A=M+(C^D&(S^C))+b[14]+3275163606&4294967295,M=S+(A<<9&4294967295|A>>>23),A=D+(S^C&(M^S))+b[3]+4107603335&4294967295,D=M+(A<<14&4294967295|A>>>18),A=C+(M^S&(D^M))+b[8]+1163531501&4294967295,C=D+(A<<20&4294967295|A>>>12),A=S+(D^M&(C^D))+b[13]+2850285829&4294967295,S=C+(A<<5&4294967295|A>>>27),A=M+(C^D&(S^C))+b[2]+4243563512&4294967295,M=S+(A<<9&4294967295|A>>>23),A=D+(S^C&(M^S))+b[7]+1735328473&4294967295,D=M+(A<<14&4294967295|A>>>18),A=C+(M^S&(D^M))+b[12]+2368359562&4294967295,C=D+(A<<20&4294967295|A>>>12),A=S+(C^D^M)+b[5]+4294588738&4294967295,S=C+(A<<4&4294967295|A>>>28),A=M+(S^C^D)+b[8]+2272392833&4294967295,M=S+(A<<11&4294967295|A>>>21),A=D+(M^S^C)+b[11]+1839030562&4294967295,D=M+(A<<16&4294967295|A>>>16),A=C+(D^M^S)+b[14]+4259657740&4294967295,C=D+(A<<23&4294967295|A>>>9),A=S+(C^D^M)+b[1]+2763975236&4294967295,S=C+(A<<4&4294967295|A>>>28),A=M+(S^C^D)+b[4]+1272893353&4294967295,M=S+(A<<11&4294967295|A>>>21),A=D+(M^S^C)+b[7]+4139469664&4294967295,D=M+(A<<16&4294967295|A>>>16),A=C+(D^M^S)+b[10]+3200236656&4294967295,C=D+(A<<23&4294967295|A>>>9),A=S+(C^D^M)+b[13]+681279174&4294967295,S=C+(A<<4&4294967295|A>>>28),A=M+(S^C^D)+b[0]+3936430074&4294967295,M=S+(A<<11&4294967295|A>>>21),A=D+(M^S^C)+b[3]+3572445317&4294967295,D=M+(A<<16&4294967295|A>>>16),A=C+(D^M^S)+b[6]+76029189&4294967295,C=D+(A<<23&4294967295|A>>>9),A=S+(C^D^M)+b[9]+3654602809&4294967295,S=C+(A<<4&4294967295|A>>>28),A=M+(S^C^D)+b[12]+3873151461&4294967295,M=S+(A<<11&4294967295|A>>>21),A=D+(M^S^C)+b[15]+530742520&4294967295,D=M+(A<<16&4294967295|A>>>16),A=C+(D^M^S)+b[2]+3299628645&4294967295,C=D+(A<<23&4294967295|A>>>9),A=S+(D^(C|~M))+b[0]+4096336452&4294967295,S=C+(A<<6&4294967295|A>>>26),A=M+(C^(S|~D))+b[7]+1126891415&4294967295,M=S+(A<<10&4294967295|A>>>22),A=D+(S^(M|~C))+b[14]+2878612391&4294967295,D=M+(A<<15&4294967295|A>>>17),A=C+(M^(D|~S))+b[5]+4237533241&4294967295,C=D+(A<<21&4294967295|A>>>11),A=S+(D^(C|~M))+b[12]+1700485571&4294967295,S=C+(A<<6&4294967295|A>>>26),A=M+(C^(S|~D))+b[3]+2399980690&4294967295,M=S+(A<<10&4294967295|A>>>22),A=D+(S^(M|~C))+b[10]+4293915773&4294967295,D=M+(A<<15&4294967295|A>>>17),A=C+(M^(D|~S))+b[1]+2240044497&4294967295,C=D+(A<<21&4294967295|A>>>11),A=S+(D^(C|~M))+b[8]+1873313359&4294967295,S=C+(A<<6&4294967295|A>>>26),A=M+(C^(S|~D))+b[15]+4264355552&4294967295,M=S+(A<<10&4294967295|A>>>22),A=D+(S^(M|~C))+b[6]+2734768916&4294967295,D=M+(A<<15&4294967295|A>>>17),A=C+(M^(D|~S))+b[13]+1309151649&4294967295,C=D+(A<<21&4294967295|A>>>11),A=S+(D^(C|~M))+b[4]+4149444226&4294967295,S=C+(A<<6&4294967295|A>>>26),A=M+(C^(S|~D))+b[11]+3174756917&4294967295,M=S+(A<<10&4294967295|A>>>22),A=D+(S^(M|~C))+b[2]+718787259&4294967295,D=M+(A<<15&4294967295|A>>>17),A=C+(M^(D|~S))+b[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+M&4294967295}s.prototype.v=function(P,S){S===void 0&&(S=P.length);const C=S-this.blockSize,b=this.C;let D=this.h,M=0;for(;M<S;){if(D==0)for(;M<=C;)o(this,P,M),M+=this.blockSize;if(typeof P=="string"){for(;M<S;)if(b[D++]=P.charCodeAt(M++),D==this.blockSize){o(this,b),D=0;break}}else for(;M<S;)if(b[D++]=P[M++],D==this.blockSize){o(this,b),D=0;break}}this.h=D,this.o+=S},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;S=this.o*8;for(var C=P.length-8;C<P.length;++C)P[C]=S&255,S/=256;for(this.v(P),P=Array(16),S=0,C=0;C<4;++C)for(let b=0;b<32;b+=8)P[S++]=this.g[C]>>>b&255;return P};function l(P,S){var C=f;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=S(P)}function c(P,S){this.h=S;const C=[];let b=!0;for(let D=P.length-1;D>=0;D--){const M=P[D]|0;b&&M==S||(C[D]=M,b=!1)}this.g=C}var f={};function g(P){return-128<=P&&P<128?l(P,function(S){return new c([S|0],S<0?-1:0)}):new c([P|0],P<0?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return T;if(P<0)return L(y(-P));const S=[];let C=1;for(let b=0;P>=C;b++)S[b]=P/C|0,C*=4294967296;return new c(S,0)}function w(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return L(w(P.substring(1),S));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(S,8));let b=T;for(let M=0;M<P.length;M+=8){var D=Math.min(8,P.length-M);const A=parseInt(P.substring(M,M+D),S);D<8?(D=y(Math.pow(S,D)),b=b.j(D).add(y(A))):(b=b.j(C),b=b.add(y(A)))}return b}var T=g(0),x=g(1),k=g(16777216);n=c.prototype,n.m=function(){if(B(this))return-L(this).m();let P=0,S=1;for(let C=0;C<this.g.length;C++){const b=this.i(C);P+=(b>=0?b:4294967296+b)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(F(this))return"0";if(B(this))return"-"+L(this).toString(P);const S=y(Math.pow(P,6));var C=this;let b="";for(;;){const D=ue(C,S).g;C=J(C,D.j(S));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(P);if(C=D,F(C))return M+b;for(;M.length<6;)M="0"+M;b=M+b}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function F(P){if(P.h!=0)return!1;for(let S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function B(P){return P.h==-1}n.l=function(P){return P=J(this,P),B(P)?-1:F(P)?0:1};function L(P){const S=P.g.length,C=[];for(let b=0;b<S;b++)C[b]=~P.g[b];return new c(C,~P.h).add(x)}n.abs=function(){return B(this)?L(this):this},n.add=function(P){const S=Math.max(this.g.length,P.g.length),C=[];let b=0;for(let D=0;D<=S;D++){let M=b+(this.i(D)&65535)+(P.i(D)&65535),A=(M>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);b=A>>>16,M&=65535,A&=65535,C[D]=A<<16|M}return new c(C,C[C.length-1]&-2147483648?-1:0)};function J(P,S){return P.add(L(S))}n.j=function(P){if(F(this)||F(P))return T;if(B(this))return B(P)?L(this).j(L(P)):L(L(this).j(P));if(B(P))return L(this.j(L(P)));if(this.l(k)<0&&P.l(k)<0)return y(this.m()*P.m());const S=this.g.length+P.g.length,C=[];for(var b=0;b<2*S;b++)C[b]=0;for(b=0;b<this.g.length;b++)for(let D=0;D<P.g.length;D++){const M=this.i(b)>>>16,A=this.i(b)&65535,He=P.i(D)>>>16,xt=P.i(D)&65535;C[2*b+2*D]+=A*xt,Z(C,2*b+2*D),C[2*b+2*D+1]+=M*xt,Z(C,2*b+2*D+1),C[2*b+2*D+1]+=A*He,Z(C,2*b+2*D+1),C[2*b+2*D+2]+=M*He,Z(C,2*b+2*D+2)}for(P=0;P<S;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=S;P<2*S;P++)C[P]=0;return new c(C,0)};function Z(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function K(P,S){this.g=P,this.h=S}function ue(P,S){if(F(S))throw Error("division by zero");if(F(P))return new K(T,T);if(B(P))return S=ue(L(P),S),new K(L(S.g),L(S.h));if(B(S))return S=ue(P,L(S)),new K(L(S.g),S.h);if(P.g.length>30){if(B(P)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var C=x,b=S;b.l(P)<=0;)C=me(C),b=me(b);var D=se(C,1),M=se(b,1);for(b=se(b,2),C=se(C,2);!F(b);){var A=M.add(b);A.l(P)<=0&&(D=D.add(C),M=A),b=se(b,1),C=se(C,1)}return S=J(P,D.j(S)),new K(D,S)}for(D=T;P.l(S)>=0;){for(C=Math.max(1,Math.floor(P.m()/S.m())),b=Math.ceil(Math.log(C)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),M=y(C),A=M.j(S);B(A)||A.l(P)>0;)C-=b,M=y(C),A=M.j(S);F(M)&&(M=x),D=D.add(M),P=J(P,A)}return new K(D,P)}n.B=function(P){return ue(this,P).h},n.and=function(P){const S=Math.max(this.g.length,P.g.length),C=[];for(let b=0;b<S;b++)C[b]=this.i(b)&P.i(b);return new c(C,this.h&P.h)},n.or=function(P){const S=Math.max(this.g.length,P.g.length),C=[];for(let b=0;b<S;b++)C[b]=this.i(b)|P.i(b);return new c(C,this.h|P.h)},n.xor=function(P){const S=Math.max(this.g.length,P.g.length),C=[];for(let b=0;b<S;b++)C[b]=this.i(b)^P.i(b);return new c(C,this.h^P.h)};function me(P){const S=P.g.length+1,C=[];for(let b=0;b<S;b++)C[b]=P.i(b)<<1|P.i(b-1)>>>31;return new c(C,P.h)}function se(P,S){const C=S>>5;S%=32;const b=P.g.length-C,D=[];for(let M=0;M<b;M++)D[M]=S>0?P.i(M+C)>>>S|P.i(M+C+1)<<32-S:P.i(M+C);return new c(D,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,m0=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=w,Ps=c}).apply(typeof Gy<"u"?Gy:typeof self<"u"?self:typeof window<"u"?window:{});var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g0,tl,y0,vc,wf,_0,v0,w0;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var v=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var U=u[I];if(!(U in v))break e;v=v[U]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var v=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&v.push([I,m[I]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=g,y.apply(null,arguments)}function w(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function T(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(I,U,H){for(var ne=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ne[xe-2]=arguments[xe];return m.prototype[U].apply(I,ne)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function k(u){const m=u.length;if(m>0){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function F(u,m){for(let I=1;I<arguments.length;I++){const U=arguments[I];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=u.length||0;const H=U.length||0;u.length=v+H;for(let ne=0;ne<H;ne++)u[v+ne]=U[ne]}else u.push(U)}}class B{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function L(u){c.setTimeout(()=>{throw u},0)}function J(){var u=P;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Z{constructor(){this.h=this.g=null}add(m,v){const I=K.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var K=new B(()=>new ue,u=>u.reset());class ue{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let me,se=!1,P=new Z,S=()=>{const u=Promise.resolve(void 0);me=()=>{u.then(C)}};function C(){for(var u;u=J();){try{u.h.call(u.g)}catch(v){L(v)}var m=K;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}se=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};c.addEventListener("test",v,m),c.removeEventListener("test",v,m)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function He(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}T(He,D),He.prototype.init=function(u,m){const v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xt="closure_listenable_"+(Math.random()*1e6|0),Lt=0;function Xe(u,m,v,I,U){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=U,this.key=++Lt,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ge(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function le(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function O(u){const m={};for(const v in u)m[v]=u[v];return m}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,m){let v,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(v in I)u[v]=I[v];for(let H=0;H<Q.length;H++)v=Q[H],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function Re(u){this.src=u,this.g={},this.h=0}Re.prototype.add=function(u,m,v,I,U){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ne=ke(u,m,I,U);return ne>-1?(m=u[ne],v||(m.fa=!1)):(m=new Xe(m,this.src,H,!!I,U),m.fa=v,u.push(m)),m};function Ce(u,m){const v=m.type;if(v in u.g){var I=u.g[v],U=Array.prototype.indexOf.call(I,m,void 0),H;(H=U>=0)&&Array.prototype.splice.call(I,U,1),H&&(re(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function ke(u,m,v,I){for(let U=0;U<u.length;++U){const H=u[U];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==I)return U}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Le={};function $e(u,m,v,I,U){if(Array.isArray(m)){for(let H=0;H<m.length;H++)$e(u,m[H],v,I,U);return null}return v=na(v),u&&u[xt]?u.J(m,v,f(I)?!!I.capture:!1,U):Ht(u,m,v,!1,I,U)}function Ht(u,m,v,I,U,H){if(!m)throw Error("Invalid event type");const ne=f(U)?!!U.capture:!!U;let xe=ji(u);if(xe||(u[Ue]=xe=new Re(u)),v=xe.add(m,v,I,ne,H),v.proxy)return v;if(I=Oi(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)M||(U=ne),U===void 0&&(U=!1),u.addEventListener(m.toString(),I,U);else if(u.attachEvent)u.attachEvent(Mi(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Oi(){function u(v){return m.call(u.src,u.listener,v)}const m=Bl;return u}function ta(u,m,v,I,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)ta(u,m[H],v,I,U);else I=f(I)?!!I.capture:!!I,v=na(v),u&&u[xt]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],v=ke(m,v,I,U),v>-1&&(re(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=ji(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ke(m,v,I,U)),(v=u>-1?m[u]:null)&&qr(v))}function qr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[xt])Ce(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(Mi(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=ji(m))?(Ce(v,u),v.h==0&&(v.src=null,m[Ue]=null)):re(u)}}}function Mi(u){return u in Le?Le[u]:Le[u]="on"+u}function Bl(u,m){if(u.da)u=!0;else{m=new He(m,this);const v=u.listener,I=u.ha||u.src;u.fa&&qr(u),u=v.call(I,m)}return u}function ji(u){return u=u[Ue],u instanceof Re?u:null}var Hs="__closure_events_fn_"+(Math.random()*1e9>>>0);function na(u){return typeof u=="function"?u:(u[Hs]||(u[Hs]=function(m){return u.handleEvent(m)}),u[Hs])}function pt(){b.call(this),this.i=new Re(this),this.M=this,this.G=null}T(pt,b),pt.prototype[xt]=!0,pt.prototype.removeEventListener=function(u,m,v,I){ta(this,u,m,v,I)};function lt(u,m){var v,I=u.G;if(I)for(v=[];I;I=I.G)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var U=m;m=new D(I,u),Se(m,U)}U=!0;let H,ne;if(v)for(ne=v.length-1;ne>=0;ne--)H=m.g=v[ne],U=Rn(H,I,!0,m)&&U;if(H=m.g=u,U=Rn(H,I,!0,m)&&U,U=Rn(H,I,!1,m)&&U,v)for(ne=0;ne<v.length;ne++)H=m.g=v[ne],U=Rn(H,I,!1,m)&&U}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let I=0;I<v.length;I++)re(v[I]);delete u.g[m],u.h--}}this.G=null},pt.prototype.J=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},pt.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function Rn(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let H=0;H<m.length;++H){const ne=m[H];if(ne&&!ne.da&&ne.capture==v){const xe=ne.listener,ut=ne.ha||ne.src;ne.fa&&Ce(u.i,ne),U=xe.call(ut,I)!==!1&&U}}return U&&!I.defaultPrevented}function ra(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:c.setTimeout(u,m||0)}function sa(u){u.g=ra(()=>{u.g=null,u.i&&(u.i=!1,sa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class zl extends b{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:sa(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(u){b.call(this),this.h=u,this.g={}}T(Hr,b);var ia=[];function Ui(u){ge(u.g,function(m,v){this.g.hasOwnProperty(v)&&qr(m)},u),u.g={}}Hr.prototype.N=function(){Hr.Z.N.call(this),Ui(this)},Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wr=c.JSON.stringify,$l=c.JSON.parse,Ws=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function Gr(){}function ql(){}var Kr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Fi(){D.call(this,"d")}T(Fi,D);function oa(){D.call(this,"c")}T(oa,D);var An={},Bi=null;function Qr(){return Bi=Bi||new pt}An.Ia="serverreachability";function zi(u){D.call(this,An.Ia,u)}T(zi,D);function gr(u){const m=Qr();lt(m,new zi(m))}An.STAT_EVENT="statevent";function yr(u,m){D.call(this,An.STAT_EVENT,u),this.stat=m}T(yr,D);function st(u){const m=Qr();lt(m,new yr(m,u))}An.Ja="timingevent";function aa(u,m){D.call(this,An.Ja,u),this.size=m}T(aa,D);function Jr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},m)}function Yr(){this.g=!0}Yr.prototype.ua=function(){this.g=!1};function Hl(u,m,v,I,U,H){u.info(function(){if(u.g)if(H){var ne="",xe=H.split("&");for(let Be=0;Be<xe.length;Be++){var ut=xe[Be].split("=");if(ut.length>1){const mt=ut[0];ut=ut[1];const un=mt.split("_");ne=un.length>=2&&un[1]=="type"?ne+(mt+"="+ut+"&"):ne+(mt+"=redacted&")}}}else ne=null;else ne=H;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+m+`
`+v+`
`+ne})}function Wl(u,m,v,I,U,H,ne){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+m+`
`+v+`
`+H+" "+ne})}function Un(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Gs(u,v)+(I?" "+I:"")})}function Gl(u,m){u.info(function(){return"TIMEOUT: "+m})}Yr.prototype.info=function(){};function Gs(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var v=H[u];if(!(v.length<2)){var I=v[1];if(Array.isArray(I)&&!(I.length<1)){var U=I[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ne=1;ne<I.length;ne++)I[ne]=""}}}}return Wr(H)}catch{return m}}var Xr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kl;function _r(){}T(_r,Gr),_r.prototype.g=function(){return new XMLHttpRequest},Kl=new _r;function Fn(u){return encodeURIComponent(String(u))}function $i(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function mn(u,m,v,I){this.j=u,this.i=m,this.l=v,this.S=I||1,this.V=new Hr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ql}function Ql(){this.i=null,this.g="",this.h=!1}var Jl={},la={};function Cn(u,m,v){u.M=1,u.A=wr(gn(m)),u.u=v,u.R=!0,ua(u,null)}function ua(u,m){u.F=Date.now(),Ks(u),u.B=gn(u.A);var v=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),va(v.i,"t",I),u.C=0,v=u.j.L,u.h=new Ql,u.g=ou(u.j,v?m:null,!u.u),u.P>0&&(u.O=new zl(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,I=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(ia[0]=U.toString()),U=ia);for(let H=0;H<U.length;H++){const ne=$e(v,U[H],I||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?O(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),gr(),Hl(u.i,u.v,u.B,u.l,u.S,u.u)}mn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Gn(u)==3?m.j():this.Y(u)},mn.prototype.Y=function(u){try{if(u==this.g)e:{const xe=Gn(this.g),ut=this.g.ya(),Be=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||su(this.g)))){this.K||xe!=4||ut==7||(ut==8||Be<=0?gr(3):gr(2)),qi(this);var m=this.g.ca();this.X=m;var v=Yl(this);if(this.o=m==200,Wl(this.i,this.v,this.B,this.l,this.S,xe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,U=this.g;if((I=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(I)){var H=I;break t}}H=null}if(u=H)Un(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ke(this,u);else{this.o=!1,this.m=3,st(12),vr(this),Qs(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<v.length;)if(mt=Zl(this,v),mt==la){xe==4&&(this.m=4,st(14),u=!1),Un(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==Jl){this.m=4,st(15),Un(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Un(this.i,this.l,mt,null),Ke(this,mt);if(Xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||v.length!=0||this.h.h||(this.m=1,st(16),u=!1),this.o=this.o&&u,!u)Un(this.i,this.l,v,"[Invalid Chunked Response]"),vr(this),Qs(this);else if(v.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),si(ne),ne.P=!0,st(11))}}else Un(this.i,this.l,v,null),Ke(this,v);xe==4&&vr(this),this.o&&!this.K&&(xe==4?eo(this.j,this):(this.o=!1,Ks(this)))}else Ea(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,st(12)):(this.m=0,st(13)),vr(this),Qs(this)}}}catch{}finally{}};function Yl(u){if(!Xl(u))return u.g.la();const m=su(u.g);if(m==="")return"";let v="";const I=m.length,U=Gn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return vr(u),Qs(u),"";u.h.i=new c.TextDecoder}for(let H=0;H<I;H++)u.h.h=!0,v+=u.h.i.decode(m[H],{stream:!(U&&H==I-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function Xl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Zl(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?la:(v=Number(m.substring(v,I)),isNaN(v)?Jl:(I+=1,I+v>m.length?la:(m=m.slice(I,I+v),u.C=I+v,m)))}mn.prototype.cancel=function(){this.K=!0,vr(this)};function Ks(u){u.T=Date.now()+u.H,ca(u,u.H)}function ca(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Jr(y(u.aa,u),m)}function qi(u){u.D&&(c.clearTimeout(u.D),u.D=null)}mn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Gl(this.i,this.B),this.M!=2&&(gr(),st(17)),vr(this),this.m=2,Qs(this)):ca(this,this.T-u)};function Qs(u){u.j.I==0||u.K||eo(u.j,u)}function vr(u){qi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ui(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ke(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||da(v.h,u))){if(!u.L&&da(v.h,u)&&v.I==3){try{var I=v.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Zi(v),an(v);else break e;Jn(v),st(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Jr(y(v.Va,v),6e3));Js(v.h)<=1&&v.ta&&(v.ta=void 0)}else ln(v,11)}else if((u.L||v.g==u)&&Zi(v),!A(m))for(U=v.Ba.g.parse(m),m=0;m<U.length;m++){let Be=U[m];const mt=Be[0];if(!(mt<=v.K))if(v.K=mt,Be=Be[1],v.I==2)if(Be[0]=="c"){v.M=Be[1],v.ba=Be[2];const un=Be[3];un!=null&&(v.ka=un,v.j.info("VER="+v.ka));const Sr=Be[4];Sr!=null&&(v.za=Sr,v.j.info("SVER="+v.za));const Yn=Be[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(I=1.5*Yn,v.O=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const Xn=u.g;if(Xn){const ro=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var H=I.h;H.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Wi(H,H.h),H.h=null))}if(I.G){const Ia=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(I.wa=Ia,je(I.J,I.G,Ia))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),I=v;var ne=u;if(I.na=xa(I,I.L?I.ba:null,I.W),ne.L){Ys(I.h,ne);var xe=ne,ut=I.O;ut&&(xe.H=ut),xe.D&&(qi(xe),Ks(xe)),I.g=ne}else Ot(I);v.i.length>0&&Ir(v)}else Be[0]!="stop"&&Be[0]!="close"||ln(v,7);else v.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ln(v,7):Yi(v):Be[0]!="noop"&&v.l&&v.l.qa(Be),v.A=0)}}gr(4)}catch{}}var mh=class{constructor(u,m){this.g=u,this.map=m}};function Hi(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ha(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Js(u){return u.h?1:u.g?u.g.size:0}function da(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Wi(u,m){u.g?u.g.add(m):u.h=m}function Ys(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Hi.prototype.cancel=function(){if(this.i=rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return k(u.i)}var eu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sn(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const I=u[v].indexOf("=");let U,H=null;I>=0?(U=u[v].substring(0,I),H=u[v].substring(I+1)):U=u[v],m(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Bn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Bn?(this.l=u.l,Xs(this,u.j),this.o=u.o,this.g=u.g,zn(this,u.u),this.h=u.h,es(this,wa(u.i)),this.m=u.m):u&&(m=String(u).match(eu))?(this.l=!1,Xs(this,m[1]||"",!0),this.o=Zs(m[2]||""),this.g=Zs(m[3]||"",!0),zn(this,m[4]),this.h=Zs(m[5]||"",!0),es(this,m[6]||"",!0),this.m=Zs(m[7]||"")):(this.l=!1,this.i=new De(null,this.l))}Bn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(ei(m,pa,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ei(m,pa,!0),"@"),u.push(Fn(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ei(v,v.charAt(0)=="/"?ti:ma,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ei(v,ga)),u.join("")},Bn.prototype.resolve=function(u){const m=gn(this);let v=!!u.j;v?Xs(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var I=u.h;if(v)zn(m,u.u);else if(v=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var U=m.h.lastIndexOf("/");U!=-1&&(I=m.h.slice(0,U+1)+I)}if(U=I,U==".."||U==".")I="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){I=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let ne=0;ne<U.length;){const xe=U[ne++];xe=="."?I&&ne==U.length&&H.push(""):xe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),I&&ne==U.length&&H.push("")):(H.push(xe),I=!0)}I=H.join("/")}else I=U}return v?m.h=I:v=u.i.toString()!=="",v?es(m,wa(u.i)):v=!!u.m,v&&(m.m=u.m),m};function gn(u){return new Bn(u)}function Xs(u,m,v){u.j=v?Zs(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function zn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function es(u,m,v){m instanceof De?(u.i=m,Ki(u.i,u.l)):(v||(m=ei(m,gh)),u.i=new De(m,u.l))}function je(u,m,v){u.i.set(m,v)}function wr(u){return je(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Zs(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ei(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,fa),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var pa=/[#\/\?@]/g,ma=/[#\?:]/g,ti=/[#\?]/g,gh=/[#\?@]/g,ga=/#/g;function De(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function $n(u){u.g||(u.g=new Map,u.h=0,u.i&&sn(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=De.prototype,n.add=function(u,m){$n(this),this.i=null,u=qn(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function ya(u,m){$n(u),m=qn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Gi(u,m){return $n(u),m=qn(u,m),u.g.has(m)}n.forEach=function(u,m){$n(this),this.g.forEach(function(v,I){v.forEach(function(U){u.call(m,U,I,this)},this)},this)};function _a(u,m){$n(u);let v=[];if(typeof m=="string")Gi(u,m)&&(v=v.concat(u.g.get(qn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}n.set=function(u,m){return $n(this),this.i=null,u=qn(this,u),Gi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=_a(this,u),u.length>0?String(u[0]):m):m};function va(u,m,v){ya(u,m),v.length>0&&(u.i=null,u.g.set(qn(u,m),k(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var v=m[I];const U=Fn(v);v=_a(this,v);for(let H=0;H<v.length;H++){let ne=U;v[H]!==""&&(ne+="="+Fn(v[H])),u.push(ne)}}return this.i=u.join("&")};function wa(u){const m=new De;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function qn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ki(u,m){m&&!u.j&&($n(u),u.i=null,u.g.forEach(function(v,I){const U=I.toLowerCase();I!=U&&(ya(this,I),va(this,U,v))},u)),u.j=m}function Hn(u,m){const v=new Yr;if(c.Image){const I=new Image;I.onload=w(Ct,v,"TestLoadImage: loaded",!0,m,I),I.onerror=w(Ct,v,"TestLoadImage: error",!1,m,I),I.onabort=w(Ct,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=w(Ct,v,"TestLoadImage: timeout",!1,m,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Wn(u,m){const v=new Yr,I=new AbortController,U=setTimeout(()=>{I.abort(),Ct(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(H=>{clearTimeout(U),H.ok?Ct(v,"TestPingServer: ok",!0,m):Ct(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Ct(v,"TestPingServer: error",!1,m)})}function Ct(u,m,v,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(v)}catch{}}function ni(){this.g=new Ws}function Er(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Er,Gr),Er.prototype.g=function(){return new on(this.i,this.h)};function on(u,m){pt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(on,pt),n=on.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,kn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||c).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tu(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function tu(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ts(this):kn(this),this.readyState==3&&tu(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,ts(this))},n.Na=function(u){this.g&&(this.response=u,ts(this))},n.ga=function(){this.g&&ts(this)};function ts(u){u.readyState=4,u.l=null,u.j=null,u.B=null,kn(u)}n.setRequestHeader=function(u,m){this.A.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function kn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(on.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function nu(u){let m="";return ge(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Qi(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=nu(v),typeof u=="string"?v!=null&&Fn(v):je(u,m,v))}function qe(u){pt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(qe,pt);var ru=/^https?$/i,yh=["POST","PUT"];n=qe.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kl.g(),this.g.onreadystatechange=x(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){ns(this,H);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)v.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())v.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),U=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(yh,m,void 0)>=0)||I||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ne]of v)this.g.setRequestHeader(H,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){ns(this,H)}};function ns(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,rs(u),xr(u)}function rs(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,lt(this,"complete"),lt(this,"abort"),xr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),qe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Tr(this):this.Xa())},n.Xa=function(){Tr(this)};function Tr(u){if(u.h&&typeof l<"u"){if(u.v&&Gn(u)==4)setTimeout(u.Ca.bind(u),0);else if(lt(u,"readystatechange"),Gn(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=H===0){let ne=String(u.D).match(eu)[1]||null;!ne&&c.self&&c.self.location&&(ne=c.self.location.protocol.slice(0,-1)),I=!ru.test(ne?ne.toLowerCase():"")}v=I}if(v)lt(u,"complete"),lt(u,"success");else{u.o=6;try{var U=Gn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",rs(u)}}finally{xr(u)}}}}function xr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||lt(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Gn(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Gn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),$l(m)}};function su(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ea(u){const m={};u=(u.g&&Gn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(A(u[I]))continue;var v=$i(u[I]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[U]||[];m[U]=H,H.push(v)}le(m,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kn(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Ji(u){this.za=0,this.i=[],this.j=new Yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Kn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Kn("baseRetryDelayMs",5e3,u),this.Za=Kn("retryDelaySeedMs",1e4,u),this.Ta=Kn("forwardChannelMaxRetries",2,u),this.va=Kn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Hi(u&&u.concurrentRequestLimit),this.Ba=new ni,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ji.prototype,n.ka=8,n.I=1,n.connect=function(u,m,v,I){st(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.J=xa(this,null,this.W),Ir(this)};function Yi(u){if(Xi(u),u.I==3){var m=u.V++,v=gn(u.J);if(je(v,"SID",u.M),je(v,"RID",m),je(v,"TYPE","terminate"),Qn(u,v),m=new mn(u,u.j,m),m.M=2,m.A=wr(gn(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=m.A,v=!0),v||(m.g=ou(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ks(m)}ii(u)}function an(u){u.g&&(si(u),u.g.cancel(),u.g=null)}function Xi(u){an(u),u.v&&(c.clearTimeout(u.v),u.v=null),Zi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Ir(u){if(!ha(u.h)&&!u.m){u.m=!0;var m=u.Ea;me||S(),se||(me(),se=!0),P.add(m,u),u.D=0}}function iu(u,m){return Js(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Jr(y(u.Ea,u,m),to(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new mn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=O(H),Se(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Ta(this,U,m),v=gn(this.J),je(v,"RID",u),je(v,"CVER",22),this.G&&je(v,"X-HTTP-Session-Id",this.G),Qn(this,v),H&&(this.R?m="headers="+Fn(nu(H))+"&"+m:this.u&&Qi(v,this.u,H)),Wi(this.h,U),this.Ra&&je(v,"TYPE","init"),this.S?(je(v,"$req",m),je(v,"SID","null"),U.U=!0,Cn(U,v,null)):Cn(U,v,m),this.I=2}}else this.I==3&&(u?ri(this,u):this.i.length==0||ha(this.h)||ri(this))};function ri(u,m){var v;m?v=m.l:v=u.V++;const I=gn(u.J);je(I,"SID",u.M),je(I,"RID",v),je(I,"AID",u.K),Qn(u,I),u.u&&u.o&&Qi(I,u.u,u.o),v=new mn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Ta(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Wi(u.h,v),Cn(v,I,m)}function Qn(u,m){u.H&&ge(u.H,function(v,I){je(m,I,v)}),u.l&&ge({},function(v,I){je(m,I,v)})}function Ta(u,m,v){v=Math.min(u.i.length,v);const I=u.l?y(u.l.Ka,u.l,u):null;e:{var U=u.i;let xe=-1;for(;;){const ut=["count="+v];xe==-1?v>0?(xe=U[0].g,ut.push("ofs="+xe)):xe=0:ut.push("ofs="+xe);let Be=!0;for(let mt=0;mt<v;mt++){var H=U[mt].g;const un=U[mt].map;if(H-=xe,H<0)xe=Math.max(0,U[mt].g-100),Be=!1;else try{H="req"+H+"_"||"";try{var ne=un instanceof Map?un:Object.entries(un);for(const[Sr,Yn]of ne){let Xn=Yn;f(Yn)&&(Xn=Wr(Yn)),ut.push(H+Sr+"="+encodeURIComponent(Xn))}}catch(Sr){throw ut.push(H+"type="+encodeURIComponent("_badmap")),Sr}}catch{I&&I(un)}}if(Be){ne=ut.join("&");break e}}ne=void 0}return u=u.i.splice(0,v),m.G=u,ne}function Ot(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;me||S(),se||(me(),se=!0),P.add(m,u),u.A=0}}function Jn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Jr(y(u.Da,u),to(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,ss(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Jr(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,st(10),an(this),ss(this))};function si(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function ss(u){u.g=new mn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=gn(u.na);je(m,"RID","rpc"),je(m,"SID",u.M),je(m,"AID",u.K),je(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&je(m,"TO",u.ia),je(m,"TYPE","xmlhttp"),Qn(u,m),u.u&&u.o&&Qi(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=wr(gn(m)),v.u=null,v.R=!0,ua(v,u)}n.Va=function(){this.C!=null&&(this.C=null,an(this),Jn(this),st(19))};function Zi(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function eo(u,m){var v=null;if(u.g==m){Zi(u),si(u),u.g=null;var I=2}else if(da(u.h,m))v=m.G,Ys(u.h,m),I=1;else return;if(u.I!=0){if(m.o)if(I==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;I=Qr(),lt(I,new aa(I,v)),Ir(u)}else Ot(u);else if(U=m.m,U==3||U==0&&m.X>0||!(I==1&&iu(u,m)||I==2&&Jn(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),U){case 1:ln(u,5);break;case 4:ln(u,10);break;case 3:ln(u,6);break;default:ln(u,2)}}}function to(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function ln(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),I=u.Ua;const U=!I;I=new Bn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Xs(I,"https"),wr(I),U?Hn(I.toString(),v):Wn(I.toString(),v)}else st(2);u.I=0,u.l&&u.l.pa(m),ii(u),Xi(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function ii(u){if(u.I=0,u.ja=[],u.l){const m=rn(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ja,m),F(u.ja,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.oa()}}function xa(u,m,v){var I=v instanceof Bn?gn(v):new Bn(v);if(I.g!="")m&&(I.g=m+"."+I.g),zn(I,I.u);else{var U=c.location;I=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const H=new Bn(null);I&&Xs(H,I),m&&(H.g=m),U&&zn(H,U),v&&(H.h=v),I=H}return v=u.G,m=u.wa,v&&m&&je(I,v,m),je(I,"VER",u.ka),Qn(u,I),I}function ou(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new qe(new Er({ab:v})):new qe(u.ma),m.Fa(u.L),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function au(){}n=au.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function no(){}no.prototype.g=function(u,m){return new kt(u,m)};function kt(u,m){pt.call(this),this.g=new Ji(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!A(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new is(this)}T(kt,pt),kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Yi(this.g)},kt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Wr(u),u=v);m.i.push(new mh(m.Ya++,u)),m.I==3&&Ir(m)},kt.prototype.N=function(){this.g.l=null,delete this.j,Yi(this.g),delete this.g,kt.Z.N.call(this)};function lu(u){Fi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}T(lu,Fi);function uu(){oa.call(this),this.status=1}T(uu,oa);function is(u){this.g=u}T(is,au),is.prototype.ra=function(){lt(this.g,"a")},is.prototype.qa=function(u){lt(this.g,new lu(u))},is.prototype.pa=function(u){lt(this.g,new uu)},is.prototype.oa=function(){lt(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,w0=function(){return new no},v0=function(){return Qr()},_0=An,wf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,vc=Xr,Zr.COMPLETE="complete",y0=Zr,ql.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",pt.prototype.listen=pt.prototype.J,tl=ql,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,g0=qe}).apply(typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="12.8.0";function iA(n){Jo=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new Qf("@firebase/firestore");function Ro(){return Ai.logLevel}function ae(n,...e){if(Ai.logLevel<=Pe.DEBUG){const t=e.map(ip);Ai.debug(`Firestore (${Jo}): ${n}`,...t)}}function zr(n,...e){if(Ai.logLevel<=Pe.ERROR){const t=e.map(ip);Ai.error(`Firestore (${Jo}): ${n}`,...t)}}function jo(n,...e){if(Ai.logLevel<=Pe.WARN){const t=e.map(ip);Ai.warn(`Firestore (${Jo}): ${n}`,...t)}}function ip(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,E0(n,s,t)}function E0(n,e,t){let s=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw zr(s),new Error(s)}function Fe(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||E0(e,o,s)}function Ie(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class aA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lA{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new Ns;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ns,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ns)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string",31837,{l:s}),new T0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class uA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class cA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new uA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ky{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0,3512);const s=l=>{l.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ky(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ky(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=dA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ne(n,e){return n<e?-1:n>e?1:0}function Ef(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Zd(o)===Zd(l)?Ne(o,l):Zd(o)?1:-1}return Ne(n.length,e.length)}const fA=55296,pA=57343;function Zd(n){const e=n.charCodeAt(0);return e>=fA&&e<=pA}function Uo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="__name__";class rr{constructor(e,t,s){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ve(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return rr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=rr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const s=rr.isNumericId(e),o=rr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?rr.extractNumericId(e).compare(rr.extractNumericId(t)):Ef(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ps.fromString(e.substring(4,e.length-2))}}class Ge extends rr{construct(e,t,s){return new Ge(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ge(t)}static emptyPath(){return new Ge([])}}const mA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends rr{construct(e,t,s){return new Dt(e,t,s)}static isValidIdentifier(e){return mA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qy}static keyField(){return new Dt([Qy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Ge.fromString(e))}static fromName(e){return new pe(Ge.fromString(e).popFirst(5))}static empty(){return new pe(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(n,e,t){if(!t)throw new ie(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gA(n,e,t,s){if(e===!0&&s===!0)throw new ie(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Jy(n){if(!pe.isDocumentKey(n))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yy(n){if(pe.isDocumentKey(n))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function I0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function eh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function Mr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eh(n);throw new ie(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Vl(n,e){if(!I0(n))throw new ie(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ie(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=-62135596800,Zy=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Zy);return new Ye(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xy)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zy}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vl(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:vt("string",Ye._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Ye(0,0))}static max(){return new Te(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=-1;function yA(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(s===1e9?new Ye(t+1,0):new Ye(t,s));return new Ls(o,pe.empty(),e)}function _A(n){return new Ls(n.readTime,n.key,ml)}class Ls{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ls(Te.min(),pe.empty(),ml)}static max(){return new Ls(Te.max(),pe.empty(),ml)}}function vA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==wA)throw n;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,s)=>{t(e)}))}static reject(e){return new G(((t,s)=>{s(e)}))}static waitFor(e){return new G(((t,s)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(g=>s(g)))})),c=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next((o=>o?G.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new G(((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((w=>{c[y]=w,++f,f===l&&s(c)}),(w=>o(w)))}}))}static doWhile(e,t){return new G(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function TA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}th.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap=-1;function nh(n){return n==null}function Vc(n){return n===0&&1/n==-1/0}function xA(n){return typeof n=="number"&&Number.isInteger(n)&&!Vc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="";function IA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=e_(e)),e=SA(n.get(t),e);return e_(e)}function SA(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case S0:t+="";break;default:t+=l}}return t}function e_(n){return n+S0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function R0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}}class oc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??bt.RED,this.left=o??bt.EMPTY,this.right=l??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new bt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return bt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new n_(this.data.getIterator())}getIteratorFrom(e){return new n_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class n_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new fn([])}unionWith(e){let t=new Tt(Dt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new A0("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const RA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(n){if(Fe(!!n,39018),typeof n=="string"){let e=0;const t=RA.exec(n);if(Fe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ms(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="server_timestamp",k0="__type__",P0="__previous_value__",N0="__local_write_time__";function lp(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[k0])==null?void 0:s.stringValue)===C0}function rh(n){const e=n.mapValue.fields[P0];return lp(e)?rh(e):e}function gl(n){const e=Os(n.mapValue.fields[N0].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,t,s,o,l,c,f,g,y,w,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w,this.apiKey=T}}const Lc="(default)";class yl{constructor(e,t){this.projectId=e,this.database=t||Lc}static empty(){return new yl("","")}get isDefaultDatabase(){return this.database===Lc}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}function CA(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="__type__",kA="__max__",ac={mapValue:{}},D0="__vector__",Oc="value";function js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lp(n)?4:NA(n)?9007199254740991:PA(n)?10:11:ve(28295,{value:n})}function fr(n,e){if(n===e)return!0;const t=js(n);if(t!==js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gl(n).isEqual(gl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Os(o.timestampValue),f=Os(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Ms(o.bytesValue).isEqual(Ms(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ht(o.geoPointValue.latitude)===ht(l.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ht(o.integerValue)===ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=ht(o.doubleValue),f=ht(l.doubleValue);return c===f?Vc(c)===Vc(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Uo(n.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(t_(c)!==t_(f))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(f[g]===void 0||!fr(c[g],f[g])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function _l(n,e){return(n.values||[]).find((t=>fr(t,e)))!==void 0}function Fo(n,e){if(n===e)return 0;const t=js(n),s=js(e);if(t!==s)return Ne(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=ht(l.integerValue||l.doubleValue),g=ht(c.integerValue||c.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return r_(n.timestampValue,e.timestampValue);case 4:return r_(gl(n),gl(e));case 5:return Ef(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Ms(l),g=Ms(c);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),g=c.split("/");for(let y=0;y<f.length&&y<g.length;y++){const w=Ne(f[y],g[y]);if(w!==0)return w}return Ne(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Ne(ht(l.latitude),ht(c.latitude));return f!==0?f:Ne(ht(l.longitude),ht(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return s_(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,k,F,B;const f=l.fields||{},g=c.fields||{},y=(x=f[Oc])==null?void 0:x.arrayValue,w=(k=g[Oc])==null?void 0:k.arrayValue,T=Ne(((F=y==null?void 0:y.values)==null?void 0:F.length)||0,((B=w==null?void 0:w.values)==null?void 0:B.length)||0);return T!==0?T:s_(y,w)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ac.mapValue&&c===ac.mapValue)return 0;if(l===ac.mapValue)return 1;if(c===ac.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=c.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const x=Ef(g[T],w[T]);if(x!==0)return x;const k=Fo(f[g[T]],y[w[T]]);if(k!==0)return k}return Ne(g.length,w.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function r_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=Os(n),s=Os(e),o=Ne(t.seconds,s.seconds);return o!==0?o:Ne(t.nanos,s.nanos)}function s_(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Fo(t[o],s[o]);if(l)return l}return Ne(t.length,s.length)}function Bo(n){return Tf(n)}function Tf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Os(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ms(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Tf(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Tf(t.fields[c])}`;return o+"}"})(n.mapValue):ve(61005,{value:n})}function wc(n){switch(js(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rh(n);return e?16+wc(e):16;case 5:return 2*n.stringValue.length;case 6:return Ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+wc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return zs(s.fields,((l,c)=>{o+=l.length+wc(c)})),o})(n.mapValue);default:throw ve(13486,{value:n})}}function i_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xf(n){return!!n&&"integerValue"in n}function up(n){return!!n&&"arrayValue"in n}function o_(n){return!!n&&"nullValue"in n}function a_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ec(n){return!!n&&"mapValue"in n}function PA(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[b0])==null?void 0:s.stringValue)===D0}function al(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return zs(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=al(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=al(n.arrayValue.values[t]);return e}return{...n}}function NA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===kA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(t)}setAll(e){let t=Dt.emptyPath(),s={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=al(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){zs(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new nn(al(this.value))}}function V0(n){const e=[];return zs(n.fields,((t,s)=>{const o=new Dt([t]);if(Ec(s)){const l=V0(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,Te.min(),Te.min(),Te.min(),nn.empty(),0)}static newFoundDocument(e,t,s,o){return new $t(e,1,t,Te.min(),s,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Te.min(),Te.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Te.min(),Te.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.position=e,this.inclusive=t}}function l_(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=pe.comparator(pe.fromName(c.referenceValue),t.key):s=Fo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function u_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t="asc"){this.field=e,this.dir=t}}function bA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L0=class{};class _t extends L0{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new VA(e,t,s):t==="array-contains"?new MA(e,s):t==="in"?new jA(e,s):t==="not-in"?new UA(e,s):t==="array-contains-any"?new FA(e,s):new _t(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new LA(e,s):new OA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fo(t,this.value)):t!==null&&js(this.value)===js(t)&&this.matchesComparison(Fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jn extends L0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new jn(e,t)}matches(e){return O0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function O0(n){return n.op==="and"}function M0(n){return DA(n)&&O0(n)}function DA(n){for(const e of n.filters)if(e instanceof jn)return!1;return!0}function If(n){if(n instanceof _t)return n.field.canonicalString()+n.op.toString()+Bo(n.value);if(M0(n))return n.filters.map((e=>If(e))).join(",");{const e=n.filters.map((t=>If(t))).join(",");return`${n.op}(${e})`}}function j0(n,e){return n instanceof _t?(function(s,o){return o instanceof _t&&s.op===o.op&&s.field.isEqual(o.field)&&fr(s.value,o.value)})(n,e):n instanceof jn?(function(s,o){return o instanceof jn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,f)=>l&&j0(c,o.filters[f])),!0):!1})(n,e):void ve(19439)}function U0(n){return n instanceof _t?(function(t){return`${t.field.canonicalString()} ${t.op} ${Bo(t.value)}`})(n):n instanceof jn?(function(t){return t.op.toString()+" {"+t.getFilters().map(U0).join(" ,")+"}"})(n):"Filter"}class VA extends _t{constructor(e,t,s){super(e,t,s),this.key=pe.fromName(s.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class LA extends _t{constructor(e,t){super(e,"in",t),this.keys=F0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OA extends _t{constructor(e,t){super(e,"not-in",t),this.keys=F0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function F0(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>pe.fromName(s.referenceValue)))}class MA extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return up(t)&&_l(t.arrayValue,this.value)}}class jA extends _t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_l(this.value.arrayValue,t)}}class UA extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_l(this.value.arrayValue,t)}}class FA extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!up(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>_l(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function c_(n,e=null,t=[],s=[],o=null,l=null,c=null){return new BA(n,e,t,s,o,l,c)}function cp(n){const e=Ie(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>If(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),nh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Bo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Bo(s))).join(",")),e.Te=t}return e.Te}function hp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!j0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!u_(n.startAt,e.startAt)&&u_(n.endAt,e.endAt)}function Sf(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function zA(n,e,t,s,o,l,c,f){return new Zo(n,e,t,s,o,l,c,f)}function sh(n){return new Zo(n)}function h_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $A(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function B0(n){return n.collectionGroup!==null}function ll(n){const e=Ie(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Tt(Dt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new vl(l,s))})),t.has(Dt.keyField().canonicalString())||e.Ie.push(new vl(Dt.keyField(),s))}return e.Ie}function lr(n){const e=Ie(n);return e.Ee||(e.Ee=qA(e,ll(n))),e.Ee}function qA(n,e){if(n.limitType==="F")return c_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new vl(o.field,l)}));const t=n.endAt?new Mc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Mc(n.startAt.position,n.startAt.inclusive):null;return c_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Rf(n,e){const t=n.filters.concat([e]);return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function HA(n,e){const t=n.explicitOrderBy.concat([e]);return new Zo(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function jc(n,e,t){return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ih(n,e){return hp(lr(n),lr(e))&&n.limitType===e.limitType}function z0(n){return`${cp(lr(n))}|lt:${n.limitType}`}function Ao(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>U0(o))).join(", ")}]`),nh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Bo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Bo(o))).join(",")),`Target(${s})`})(lr(n))}; limitType=${n.limitType})`}function oh(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):pe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of ll(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,f,g){const y=l_(c,f,g);return c.inclusive?y<=0:y<0})(s.startAt,ll(s),o)||s.endAt&&!(function(c,f,g){const y=l_(c,f,g);return c.inclusive?y>=0:y>0})(s.endAt,ll(s),o))})(n,e)}function WA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $0(n){return(e,t)=>{let s=!1;for(const o of ll(n)){const l=GA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function GA(n,e,t){const s=n.field.isKeyField()?pe.comparator(e.key,t.key):(function(l,c,f){const g=c.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Fo(g,y):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ve(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zs(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return R0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new rt(pe.comparator);function $r(){return KA}const q0=new rt(pe.comparator);function nl(...n){let e=q0;for(const t of n)e=e.insert(t.key,t);return e}function H0(n){let e=q0;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function vi(){return ul()}function W0(){return ul()}function ul(){return new Di((n=>n.toString()),((n,e)=>n.isEqual(e)))}const QA=new rt(pe.comparator),JA=new Tt(pe.comparator);function be(...n){let e=JA;for(const t of n)e=e.add(t);return e}const YA=new Tt(Ne);function XA(){return YA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function G0(n){return{integerValue:""+n}}function K0(n,e){return xA(e)?G0(e):dp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(){this._=void 0}}function ZA(n,e,t){return n instanceof wl?(function(o,l){const c={fields:{[k0]:{stringValue:C0},[N0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&lp(l)&&(l=rh(l)),l&&(c.fields[P0]=l),{mapValue:c}})(t,e):n instanceof El?J0(n,e):n instanceof Tl?Y0(n,e):(function(o,l){const c=Q0(o,l),f=d_(c)+d_(o.Ae);return xf(c)&&xf(o.Ae)?G0(f):dp(o.serializer,f)})(n,e)}function eC(n,e,t){return n instanceof El?J0(n,e):n instanceof Tl?Y0(n,e):t}function Q0(n,e){return n instanceof xl?(function(s){return xf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class wl extends ah{}class El extends ah{constructor(e){super(),this.elements=e}}function J0(n,e){const t=X0(e);for(const s of n.elements)t.some((o=>fr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Tl extends ah{constructor(e){super(),this.elements=e}}function Y0(n,e){let t=X0(e);for(const s of n.elements)t=t.filter((o=>!fr(o,s)));return{arrayValue:{values:t}}}class xl extends ah{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function d_(n){return ht(n.integerValue||n.doubleValue)}function X0(n){return up(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,t){this.field=e,this.transform=t}}function tC(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof El&&o instanceof El||s instanceof Tl&&o instanceof Tl?Uo(s.elements,o.elements,fr):s instanceof xl&&o instanceof xl?fr(s.Ae,o.Ae):s instanceof wl&&o instanceof wl})(n.transform,e.transform)}class nC{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lh{}function ew(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nw(n.key,ur.none()):new Ll(n.key,n.data,ur.none());{const t=n.data,s=nn.empty();let o=new Tt(Dt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new $s(n.key,s,new fn(o.toArray()),ur.none())}}function rC(n,e,t){n instanceof Ll?(function(o,l,c){const f=o.value.clone(),g=p_(o.fieldTransforms,l,c.transformResults);f.setAll(g),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof $s?(function(o,l,c){if(!Tc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=p_(o.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(tw(o)),g.setAll(f),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function cl(n,e,t,s){return n instanceof Ll?(function(l,c,f,g){if(!Tc(l.precondition,c))return f;const y=l.value.clone(),w=m_(l.fieldTransforms,g,c);return y.setAll(w),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,s):n instanceof $s?(function(l,c,f,g){if(!Tc(l.precondition,c))return f;const y=m_(l.fieldTransforms,g,c),w=c.data;return w.setAll(tw(l)),w.setAll(y),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,c,f){return Tc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function sC(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=Q0(s.transform,o||null);l!=null&&(t===null&&(t=nn.empty()),t.set(s.field,l))}return t||null}function f_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Uo(s,o,((l,c)=>tC(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ll extends lh{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $s extends lh{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function tw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function p_(n,e,t){const s=new Map;Fe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,eC(c,f,t[o]))}return s}function m_(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,ZA(l,c,e))}return s}class nw extends lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iC extends lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&rC(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=cl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=cl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=W0();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const g=ew(c,f);g!==null&&s.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Te.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,((t,s)=>f_(t,s)))&&Uo(this.baseMutations,e.baseMutations,((t,s)=>f_(t,s)))}}class fp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Fe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return QA})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new fp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Ve;function uC(n){switch(n){case W.OK:return ve(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function rw(n){if(n===void 0)return zr("GRPC error has no .code"),W.UNKNOWN;switch(n){case yt.OK:return W.OK;case yt.CANCELLED:return W.CANCELLED;case yt.UNKNOWN:return W.UNKNOWN;case yt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case yt.INTERNAL:return W.INTERNAL;case yt.UNAVAILABLE:return W.UNAVAILABLE;case yt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case yt.NOT_FOUND:return W.NOT_FOUND;case yt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case yt.ABORTED:return W.ABORTED;case yt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case yt.DATA_LOSS:return W.DATA_LOSS;default:return ve(39323,{code:n})}}(Ve=yt||(yt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new Ps([4294967295,4294967295],0);function g_(n){const e=cC().encode(n),t=new m0;return t.update(e),new Uint8Array(t.digest())}function y_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ps([t,s],0),new Ps([o,l],0)]}class pp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new rl(`Invalid padding: ${t}`);if(s<0)throw new rl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new rl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new rl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ps.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ps.fromNumber(s)));return o.compare(hC)===1&&(o=new Ps([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=g_(e),[s,o]=y_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new pp(l,o,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=g_(e),[s,o]=y_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.be(c)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new uh(Te.min(),o,new rt(Ne),$r(),be())}}class Ol{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ol(s,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class sw{constructor(e,t){this.targetId=e,this.Ce=t}}class iw{constructor(e,t,s=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class __{constructor(){this.ve=0,this.Fe=v_(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),t=be(),s=be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ve(38017,{changeType:l})}})),new Ol(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=v_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class dC{constructor(e){this.Ge=e,this.ze=new Map,this.je=$r(),this.He=lc(),this.Je=lc(),this.Ze=new rt(Ne)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Sf(l))if(s===0){const c=new pe(l.path);this.et(t,c,$t.newNoDocument(c,Te.min()))}else Fe(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),g=f?this.ct(f,e,c):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=Ms(s).toUint8Array()}catch(g){if(g instanceof A0)return jo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new pp(c,o,l)}catch(g){return jo(g instanceof rl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Sf(f.target)){const g=new pe(f.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,$t.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let s=be();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new uh(e,t,this.Ze,this.je,s);return this.je=$r(),this.He=lc(),this.Je=lc(),this.Ze=new rt(Ne),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new __,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Tt(Ne),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Tt(Ne),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new __),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lc(){return new rt(pe.comparator)}function v_(){return new rt(pe.comparator)}const fC={asc:"ASCENDING",desc:"DESCENDING"},pC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mC={and:"AND",or:"OR"};class gC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Af(n,e){return n.useProto3Json||nh(e)?e:{value:e}}function Uc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ow(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yC(n,e){return Uc(n,e.toTimestamp())}function cr(n){return Fe(!!n,49232),Te.fromTimestamp((function(t){const s=Os(t);return new Ye(s.seconds,s.nanos)})(n))}function mp(n,e){return Cf(n,e).canonicalString()}function Cf(n,e){const t=(function(o){return new Ge(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aw(n){const e=Ge.fromString(n);return Fe(dw(e),10190,{key:e.toString()}),e}function kf(n,e){return mp(n.databaseId,e.path)}function ef(n,e){const t=aw(e);if(t.get(1)!==n.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(uw(t))}function lw(n,e){return mp(n.databaseId,e)}function _C(n){const e=aw(n);return e.length===4?Ge.emptyPath():uw(e)}function Pf(n){return new Ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uw(n){return Fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function w_(n,e,t){return{name:kf(n,e),fields:t.value.mapValue.fields}}function vC(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ve(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(Fe(w===void 0||typeof w=="string",58123),Vt.fromBase64String(w||"")):(Fe(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Vt.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(y){const w=y.code===void 0?W.UNKNOWN:rw(y.code);return new ie(w,y.message||"")})(c);t=new iw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=ef(n,s.document.name),l=cr(s.document.updateTime),c=s.document.createTime?cr(s.document.createTime):Te.min(),f=new nn({mapValue:{fields:s.document.fields}}),g=$t.newFoundDocument(o,l,c,f),y=s.targetIds||[],w=s.removedTargetIds||[];t=new xc(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=ef(n,s.document),l=s.readTime?cr(s.readTime):Te.min(),c=$t.newNoDocument(o,l),f=s.removedTargetIds||[];t=new xc([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=ef(n,s.document),l=s.removedTargetIds||[];t=new xc([],l,o,null)}else{if(!("filter"in e))return ve(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new lC(o,l),f=s.targetId;t=new sw(f,c)}}return t}function wC(n,e){let t;if(e instanceof Ll)t={update:w_(n,e.key,e.value)};else if(e instanceof nw)t={delete:kf(n,e.key)};else if(e instanceof $s)t={update:w_(n,e.key,e.data),updateMask:kC(e.fieldMask)};else{if(!(e instanceof iC))return ve(16599,{dt:e.type});t={verify:kf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof wl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof El)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Tl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof xl)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw ve(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:yC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve(27497)})(n,e.precondition)),t}function EC(n,e){return n&&n.length>0?(Fe(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?cr(o.updateTime):cr(l);return c.isEqual(Te.min())&&(c=cr(l)),new nC(c,o.transformResults||[])})(t,e)))):[]}function TC(n,e){return{documents:[lw(n,e.path)]}}function xC(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=lw(n,o);const l=(function(y){if(y.length!==0)return hw(jn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((w=>(function(x){return{field:Co(x.field),direction:RC(x.dir)}})(w)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Af(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function IC(n){let e=_C(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Fe(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(T){const x=cw(T);return x instanceof jn&&M0(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((x=>(function(F){return new vl(ko(F.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(x)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let x;return x=typeof T=="object"?T.value:T,nh(x)?null:x})(t.limit));let g=null;t.startAt&&(g=(function(T){const x=!!T.before,k=T.values||[];return new Mc(k,x)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const x=!T.before,k=T.values||[];return new Mc(k,x)})(t.endAt)),zA(e,o,c,l,f,"F",g,y)}function SC(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ko(t.unaryFilter.field);return _t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ko(t.unaryFilter.field);return _t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ko(t.unaryFilter.field);return _t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ko(t.unaryFilter.field);return _t.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return _t.create(ko(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return jn.create(t.compositeFilter.filters.map((s=>cw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function RC(n){return fC[n]}function AC(n){return pC[n]}function CC(n){return mC[n]}function Co(n){return{fieldPath:n.canonicalString()}}function ko(n){return Dt.fromServerFormat(n.fieldPath)}function hw(n){return n instanceof _t?(function(t){if(t.op==="=="){if(a_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(o_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(a_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(o_(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:AC(t.op),value:t.value}}})(n):n instanceof jn?(function(t){const s=t.getFilters().map((o=>hw(o)));return s.length===1?s[0]:{compositeFilter:{op:CC(t.op),filters:s}}})(n):ve(54877,{filter:n})}function kC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function dw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function fw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t,s,o,l=Te.min(),c=Te.min(),f=Vt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.yt=e}}function NC(n){const e=IC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.Sn=new DC}addToCollectionParentIndex(e,t){return this.Sn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Ls.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Ls.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class DC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Tt(Ge.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Tt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pw=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(pw,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new zo(0)}static ar(){return new zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="LruGarbageCollector",VC=1048576;function x_([n,e],[t,s]){const o=Ne(n,t);return o===0?Ne(e,s):o}class LC{constructor(e){this.Pr=e,this.buffer=new Tt(x_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();x_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ae(T_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xo(t)?ae(T_,"Ignoring IndexedDB error during garbage collection: ",t):await Yo(t)}await this.Ar(3e5)}))}}class MC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(th.ce);const s=new LC(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(E_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,l,c,f,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,f=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(y=Date.now(),Ro()<=Pe.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function jC(n,e){return new MC(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.changes=new Di((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&cl(s.mutation,o,fn.empty(),Ye.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,be()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=be()){const o=vi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=nl();return l.forEach(((f,g)=>{c=c.insert(f,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=vi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,be())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,o){let l=$r();const c=ul(),f=(function(){return ul()})();return t.forEach(((g,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof $s)?l=l.insert(y.key,y):w!==void 0?(c.set(y.key,w.mutation.getFieldMask()),cl(w.mutation,y,w.mutation.getFieldMask(),Ye.now())):c.set(y.key,fn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,w)=>c.set(y,w))),t.forEach(((y,w)=>f.set(y,new FC(w,c.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=ul();let o=new rt(((c,f)=>c-f)),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let w=s.get(g)||fn.empty();w=f.applyToLocalView(y,w),s.set(g,w);const T=(o.get(f.batchId)||be()).add(g);o=o.insert(f.batchId,T)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,w=g.value,T=W0();w.forEach((x=>{if(!l.has(x)){const k=ew(t.get(x),s.get(x));k!==null&&T.set(x,k),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return G.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return $A(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):B0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):G.resolve(vi());let f=ml,g=l;return c.next((y=>G.forEach(y,((w,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(w)?G.resolve():this.remoteDocumentCache.getEntry(e,w).next((x=>{g=g.insert(w,x)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,be()))).next((w=>({batchId:f,changes:H0(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((s=>{let o=nl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=nl();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(g=>{const y=(function(T,x){return new Zo(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((w=>{w.forEach(((T,x)=>{c=c.insert(T,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((g,y)=>{const w=y.getKey();c.get(w)===null&&(c=c.insert(w,$t.newInvalidDocument(w)))}));let f=nl();return c.forEach(((g,y)=>{const w=l.get(g);w!==void 0&&cl(w.mutation,y,fn.empty(),Ye.now()),oh(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return G.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:cr(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:NC(o.bundledQuery),readTime:cr(o.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.overlays=new rt(pe.comparator),this.Lr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=vi();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.bt(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const o=vi(),l=t.length+1,c=new pe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new rt(((y,w)=>y-w));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=vi(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=vi(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>f.set(y,w))),!(f.size()>=o)););return G.resolve(f)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new aC(t,s));let l=this.Lr.get(t);l===void 0&&(l=be(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this.kr=new Tt(At.Kr),this.qr=new Tt(At.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new At(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new At(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new pe(new Ge([])),s=new At(t,e),o=new At(t,e+1),l=[];return this.qr.forEachInRange([s,o],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new pe(new Ge([])),s=new At(t,e),o=new At(t,e+1);let l=be();return this.qr.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new At(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class At{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return pe.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Tt(At.Kr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new oC(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.Jr=this.Jr.add(new At(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(c)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?ap:this.Yn-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new At(t,0),o=new At(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,o],(c=>{const f=this.Zr(c.Hr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(Ne);return t.forEach((o=>{const l=new At(o,0),c=new At(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{s=s.add(f.Hr)}))})),G.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;pe.isDocumentKey(l)||(l=l.child(""));const c=new At(new pe(l),0);let f=new Tt(Ne);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Hr)),!0)}),c),G.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Fe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return G.forEach(t.mutations,(o=>{const l=new At(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new At(t,0),o=this.Jr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.ti=e,this.docs=(function(){return new rt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let s=$r();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():$t.newInvalidDocument(o))})),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=$r();const c=t.path,f=new pe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||vA(_A(w),s)<=0||(o.has(w.key)||oh(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,s,o){ve(9500)}ni(e,t){return G.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new GC(this)}getSize(e){return G.resolve(this.size)}}class GC extends UC{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),G.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.persistence=e,this.ri=new Di((t=>cp(t)),hp),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.ii=0,this.si=new gp,this.targetCount=0,this.oi=zo._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),G.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new zo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.lr(t),G.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),G.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t){this._i={},this.overlays={},this.ai=new th(0),this.ui=!1,this.ui=!0,this.ci=new qC,this.referenceDelegate=e(this),this.li=new KC(this),this.indexManager=new bC,this.remoteDocumentCache=(function(o){return new WC(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new PC(t),this.Pi=new zC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $C,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new HC(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){ae("MemoryPersistence","Starting transaction:",e);const o=new QC(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return G.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class QC extends EA{constructor(e){super(),this.currentSequenceNumber=e}}class yp{constructor(e){this.persistence=e,this.Ri=new gp,this.Ai=null}static Vi(e){return new yp(e)}get di(){if(this.Ai)return this.Ai;throw ve(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.di,(s=>{const o=pe.fromPath(s);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Te.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Fc{constructor(e,t){this.persistence=e,this.fi=new Di((s=>IA(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=jC(this,t)}static Vi(e,t){return new Fc(e,t)}Ti(){}Ii(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return G.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Te.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),G.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wc(e.data.value)),t}wr(e,t,s){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return G.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new _p(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return U1()?8:TA(qt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new JC;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(Ro()<=Pe.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Ro()<=Pe.DEBUG&&ae("QueryEngine","Query:",Ao(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Ro()<=Pe.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):G.resolve())}gs(e,t){if(h_(t))return G.resolve(null);let s=lr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=jc(t,null,"F"),s=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=be(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.bs(t,f);return this.Ss(t,y,c,g.readTime)?this.gs(e,jc(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,s,o){return h_(t)||o.isEqual(Te.min())?G.resolve(null):this.fs.getDocuments(e,s).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,s,o)?G.resolve(null):(Ro()<=Pe.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(t)),this.Ds(e,c,t,yA(o,ml)).next((f=>f)))}))}bs(e,t){let s=new Tt($0(e));return t.forEach(((o,l)=>{oh(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,s){return Ro()<=Pe.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.fs.getDocumentsMatchingQuery(e,t,Ls.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="LocalStore",XC=3e8;class ZC{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new rt(Ne),this.Fs=new Di((l=>cp(l)),hp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function ek(n,e,t,s){return new ZC(n,e,t,s)}async function gw(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let g=be();for(const y of o){c.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ns:y,removedBatchIds:c,addedBatchIds:f})))}))}))}function tk(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,w){const T=y.batch,x=T.keys();let k=G.resolve();return x.forEach((F=>{k=k.next((()=>w.getEntry(g,F))).next((B=>{const L=y.docVersions.get(F);Fe(L!==null,48541),B.version.compareTo(L)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),w.addEntry(B)))}))})),k.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=be();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function yw(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function nk(n,e){const t=Ie(n),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const f=[];e.targetChanges.forEach(((w,T)=>{const x=o.get(T);if(!x)return;f.push(t.li.removeMatchingKeys(l,w.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,w.addedDocuments,T))));let k=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?k=k.withResumeToken(Vt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):w.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(w.resumeToken,s)),o=o.insert(T,k),(function(B,L,J){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=XC?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(x,k,w)&&f.push(t.li.updateTargetData(l,k))}));let g=$r(),y=be();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(rk(l,c,e.documentUpdates).next((w=>{g=w.Bs,y=w.Ls}))),!s.isEqual(Te.min())){const w=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(w)}return G.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.vs=o,l)))}function rk(n,e,t){let s=be(),o=be();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=$r();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(f,g.readTime),c=c.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),c=c.insert(f,g)):ae(vp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{Bs:c,Ls:o}}))}function sk(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ap),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function ik(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((l=>l?(o=l,G.resolve(o)):t.li.allocateTargetId(s).next((c=>(o=new Rs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Nf(n,e,t){const s=Ie(n),o=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Xo(c))throw c;ae(vp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function I_(n,e,t){const s=Ie(n);let o=Te.min(),l=be();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,y,w){const T=Ie(g),x=T.Fs.get(w);return x!==void 0?G.resolve(T.vs.get(x)):T.li.getTargetData(y,w)})(s,c,lr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(c,f.targetId).next((g=>{l=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,t?o:Te.min(),t?l:be()))).next((f=>(ok(s,WA(e),f),{documents:f,ks:l})))))}function ok(n,e,t){let s=n.Ms.get(e)||Te.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Ms.set(e,s)}class S_{constructor(){this.activeTargetIds=XA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ak{constructor(){this.vo=new S_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new S_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="ConnectivityMonitor";class A_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ae(R_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ae(R_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=null;function bf(){return uc===null?uc=(function(){return 268435456+Math.round(2147483648*Math.random())})():uc++,"0x"+uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="RestConnection",uk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class ck{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===Lc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const c=bf(),f=this.Qo(e,t.toUriEncodedString());ae(tf,`Sending RPC '${e}' ${c}:`,f,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,l);const{host:y}=new URL(f),w=Bs(y);return this.zo(e,f,g,s,w).then((T=>(ae(tf,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw jo(tf,`RPC '${e}' ${c} failed with error: `,T,"url: ",f,"request:",s),T}))}jo(e,t,s,o,l,c){return this.Wo(e,t,s,o,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const s=uk[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection",Ya=(n,e,t)=>{n.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Lo extends ck{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Lo.c_){const e=v0();Ya(e,_0.STAT_EVENT,(t=>{t.stat===wf.PROXY?ae(Bt,"STAT_EVENT: detected buffering proxy"):t.stat===wf.NOPROXY&&ae(Bt,"STAT_EVENT: detected no buffering proxy")})),Lo.c_=!0}}zo(e,t,s,o,l){const c=bf();return new Promise(((f,g)=>{const y=new g0;y.setWithCredentials(!0),y.listenOnce(y0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case vc.NO_ERROR:const T=y.getResponseJson();ae(Bt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),f(T);break;case vc.TIMEOUT:ae(Bt,`RPC '${e}' ${c} timed out`),g(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:const x=y.getStatus();if(ae(Bt,`RPC '${e}' ${c} failed with status:`,x,"response text:",y.getResponseText()),x>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const F=k==null?void 0:k.error;if(F&&F.status&&F.message){const B=(function(J){const Z=J.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(Z)>=0?Z:W.UNKNOWN})(F.status);g(new ie(B,F.message))}else g(new ie(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ie(W.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ae(Bt,`RPC '${e}' ${c} completed.`)}}));const w=JSON.stringify(o);ae(Bt,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",w,s,15)}))}T_(e,t,s){const o=bf(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const y=l.join("");ae(Bt,`Creating RPC '${e}' stream ${o}: ${y}`,f);const w=c.createWebChannel(y,f);this.I_(w);let T=!1,x=!1;const k=new hk({Ho:F=>{x?ae(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(T||(ae(Bt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),ae(Bt,`RPC '${e}' stream ${o} sending:`,F),w.send(F))},Jo:()=>w.close()});return Ya(w,tl.EventType.OPEN,(()=>{x||(ae(Bt,`RPC '${e}' stream ${o} transport opened.`),k.i_())})),Ya(w,tl.EventType.CLOSE,(()=>{x||(x=!0,ae(Bt,`RPC '${e}' stream ${o} transport closed`),k.o_(),this.E_(w))})),Ya(w,tl.EventType.ERROR,(F=>{x||(x=!0,jo(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),k.o_(new ie(W.UNAVAILABLE,"The operation could not be completed")))})),Ya(w,tl.EventType.MESSAGE,(F=>{var B;if(!x){const L=F.data[0];Fe(!!L,16349);const J=L,Z=(J==null?void 0:J.error)||((B=J[0])==null?void 0:B.error);if(Z){ae(Bt,`RPC '${e}' stream ${o} received error:`,Z);const K=Z.status;let ue=(function(P){const S=yt[P];if(S!==void 0)return rw(S)})(K),me=Z.message;ue===void 0&&(ue=W.INTERNAL,me="Unknown error status: "+K+" with message "+Z.message),x=!0,k.o_(new ie(ue,me)),w.close()}else ae(Bt,`RPC '${e}' stream ${o} received:`,L),k.__(L)}})),Lo.u_(),setTimeout((()=>{k.s_()}),0),k}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return w0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(n){return new Lo(n)}function nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(n){return new gC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo.c_=!1;class _w{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="PersistentStream";class vw{constructor(e,t,s,o,l,c,f,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _w(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ie(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(C_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ae(C_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fk extends vw{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vC(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Te.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?cr(c.readTime):Te.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Pf(this.serializer),t.addTarget=(function(l,c){let f;const g=c.target;if(f=Sf(g)?{documents:TC(l,g)}:{query:xC(l,g).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=ow(l,c.resumeToken);const y=Af(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Te.min())>0){f.readTime=Uc(l,c.snapshotVersion.toTimestamp());const y=Af(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=SC(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Pf(this.serializer),t.removeTarget=e,this.K_(t)}}class pk extends vw{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EC(e.writeResults,e.commitTime),s=cr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Pf(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>wC(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{}class gk extends mk{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Cf(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(W.UNKNOWN,l.toString())}))}jo(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,Cf(t,s),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie(W.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function yk(n,e,t,s){return new gk(n,e,t,s)}class _k{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zr(t),this.aa=!1):ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="RemoteStore";class vk{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{s.enqueueAndForget((async()=>{Vi(this)&&(ae(Ci,"Restarting streams for network reachability change."),await(async function(g){const y=Ie(g);y.Ea.add(4),await Ml(y),y.Va.set("Unknown"),y.Ea.delete(4),await hh(y)})(this))}))})),this.Va=new _k(s,o)}}async function hh(n){if(Vi(n))for(const e of n.Ra)await e(!0)}async function Ml(n){for(const e of n.Ra)await e(!1)}function ww(n,e){const t=Ie(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),xp(t)?Tp(t):ea(t).O_()&&Ep(t,e))}function wp(n,e){const t=Ie(n),s=ea(t);t.Ia.delete(e),s.O_()&&Ew(t,e),t.Ia.size===0&&(s.O_()?s.L_():Vi(t)&&t.Va.set("Unknown"))}function Ep(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ea(n).Z_(e)}function Ew(n,e){n.da.$e(e),ea(n).X_(e)}function Tp(n){n.da=new dC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ea(n).start(),n.Va.ua()}function xp(n){return Vi(n)&&!ea(n).x_()&&n.Ia.size>0}function Vi(n){return Ie(n).Ea.size===0}function Tw(n){n.da=void 0}async function wk(n){n.Va.set("Online")}async function Ek(n){n.Ia.forEach(((e,t)=>{Ep(n,e)}))}async function Tk(n,e){Tw(n),xp(n)?(n.Va.ha(e),Tp(n)):n.Va.set("Unknown")}async function xk(n,e,t){if(n.Va.set("Online"),e instanceof iw&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ia.delete(f),o.da.removeTarget(f))})(n,e)}catch(s){ae(Ci,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Bc(n,s)}else if(e instanceof xc?n.da.Xe(e):e instanceof sw?n.da.st(e):n.da.tt(e),!t.isEqual(Te.min()))try{const s=await yw(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(g.resumeToken,c))}})),f.targetMismatches.forEach(((g,y)=>{const w=l.Ia.get(g);if(!w)return;l.Ia.set(g,w.withResumeToken(Vt.EMPTY_BYTE_STRING,w.snapshotVersion)),Ew(l,g);const T=new Rs(w.target,g,y,w.sequenceNumber);Ep(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){ae(Ci,"Failed to raise snapshot:",s),await Bc(n,s)}}async function Bc(n,e,t){if(!Xo(e))throw e;n.Ea.add(1),await Ml(n),n.Va.set("Offline"),t||(t=()=>yw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ae(Ci,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hh(n)}))}function xw(n,e){return e().catch((t=>Bc(n,t,e)))}async function dh(n){const e=Ie(n),t=Us(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ap;for(;Ik(e);)try{const o=await sk(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,Sk(e,o)}catch(o){await Bc(e,o)}Iw(e)&&Sw(e)}function Ik(n){return Vi(n)&&n.Ta.length<10}function Sk(n,e){n.Ta.push(e);const t=Us(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Iw(n){return Vi(n)&&!Us(n).x_()&&n.Ta.length>0}function Sw(n){Us(n).start()}async function Rk(n){Us(n).ra()}async function Ak(n){const e=Us(n);for(const t of n.Ta)e.ea(t.mutations)}async function Ck(n,e,t){const s=n.Ta.shift(),o=fp.from(s,e,t);await xw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await dh(n)}async function kk(n,e){e&&Us(n).Y_&&await(async function(s,o){if((function(c){return uC(c)&&c!==W.ABORTED})(o.code)){const l=s.Ta.shift();Us(s).B_(),await xw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await dh(s)}})(n,e),Iw(n)&&Sw(n)}async function k_(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),ae(Ci,"RemoteStore received new credentials");const s=Vi(t);t.Ea.add(3),await Ml(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hh(t)}async function Pk(n,e){const t=Ie(n);e?(t.Ea.delete(2),await hh(t)):e||(t.Ea.add(2),await Ml(t),t.Va.set("Unknown"))}function ea(n){return n.ma||(n.ma=(function(t,s,o){const l=Ie(t);return l.sa(),new fk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:wk.bind(null,n),Yo:Ek.bind(null,n),t_:Tk.bind(null,n),J_:xk.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),xp(n)?Tp(n):n.Va.set("Unknown")):(await n.ma.stop(),Tw(n))}))),n.ma}function Us(n){return n.fa||(n.fa=(function(t,s,o){const l=Ie(t);return l.sa(),new pk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Rk.bind(null,n),t_:kk.bind(null,n),ta:Ak.bind(null,n),na:Ck.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await dh(n)):(await n.fa.stop(),n.Ta.length>0&&(ae(Ci,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new Ip(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sp(n,e){if(zr("AsyncQueue",`${e}: ${n}`),Xo(n))return new ie(W.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||pe.comparator(t.key,s.key):(t,s)=>pe.comparator(t.key,s.key),this.keyedMap=nl(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Oo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.ga=new rt(pe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class $o{constructor(e,t,s,o,l,c,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new $o(e,t,Oo.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class bk{constructor(){this.queries=N_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ie(t),l=o.queries;o.queries=N_(),l.forEach(((c,f)=>{for(const g of f.ba)g.onError(s)}))})(this,new ie(W.ABORTED,"Firestore shutting down"))}}function N_(){return new Di((n=>z0(n)),ih)}async function Rw(n,e){const t=Ie(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(s=2):(l=new Nk,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Sp(c,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Rp(t)}async function Aw(n,e){const t=Ie(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Dk(n,e){const t=Ie(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(o)&&(s=!0);c.wa=o}}s&&Rp(t)}function Vk(n,e,t){const s=Ie(n),o=s.queries.get(e);if(o)for(const l of o.ba)l.onError(t);s.queries.delete(e)}function Rp(n){n.Ca.forEach((e=>{e.next()}))}var Df,b_;(b_=Df||(Df={})).Ma="default",b_.Cache="cache";class Cw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new $o(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.key=e}}class Pw{constructor(e){this.key=e}}class Lk{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=be(),this.mutatedKeys=be(),this.eu=$0(e),this.tu=new Oo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new P_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,T)=>{const x=o.get(w),k=oh(this.query,T)?T:null,F=!!x&&this.mutatedKeys.has(x.key),B=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let L=!1;x&&k?x.data.isEqual(k.data)?F!==B&&(s.track({type:3,doc:k}),L=!0):this.su(x,k)||(s.track({type:2,doc:k}),L=!0,(g&&this.eu(k,g)>0||y&&this.eu(k,y)<0)&&(f=!0)):!x&&k?(s.track({type:0,doc:k}),L=!0):x&&!k&&(s.track({type:1,doc:x}),L=!0,(g||y)&&(f=!0)),L&&(k?(c=c.add(k),l=B?l.add(w):l.delete(w)):(c=c.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{tu:c,iu:s,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((w,T)=>(function(k,F){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Vt:L})}};return B(k)-B(F)})(w.type,T.type)||this.eu(w.doc,T.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,c.length!==0||y?{snapshot:new $o(this.query,e.tu,l,c,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new P_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new Pw(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new kw(s))})),t}cu(e){this.Za=e.ks,this.Ya=be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return $o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ap="SyncEngine";class Ok{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Mk{constructor(e){this.key=e,this.hu=!1}}class jk{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Di((f=>z0(f)),ih),this.Iu=new Map,this.Eu=new Set,this.Ru=new rt(pe.comparator),this.Au=new Map,this.Vu=new gp,this.du={},this.mu=new Map,this.fu=zo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Uk(n,e,t=!0){const s=Ow(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Nw(s,e,t,!0),o}async function Fk(n,e){const t=Ow(n);await Nw(t,e,!0,!1)}async function Nw(n,e,t,s){const o=await ik(n.localStore,lr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await Bk(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&ww(n.remoteStore,o),f}async function Bk(n,e,t,s,o){n.pu=(T,x,k)=>(async function(B,L,J,Z){let K=L.view.ru(J);K.Ss&&(K=await I_(B.localStore,L.query,!1).then((({documents:P})=>L.view.ru(P,K))));const ue=Z&&Z.targetChanges.get(L.targetId),me=Z&&Z.targetMismatches.get(L.targetId)!=null,se=L.view.applyChanges(K,B.isPrimaryClient,ue,me);return V_(B,L.targetId,se.au),se.snapshot})(n,T,x,k);const l=await I_(n.localStore,e,!0),c=new Lk(e,l.ks),f=c.ru(l.documents),g=Ol.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),y=c.applyChanges(f,n.isPrimaryClient,g);V_(n,t,y.au);const w=new Ok(e,t,c);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function zk(n,e,t){const s=Ie(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!ih(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Nf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&wp(s.remoteStore,o.targetId),Vf(s,o.targetId)})).catch(Yo)):(Vf(s,o.targetId),await Nf(s.localStore,o.targetId,!0))}async function $k(n,e){const t=Ie(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),wp(t.remoteStore,s.targetId))}async function qk(n,e,t){const s=Yk(n);try{const o=await(function(c,f){const g=Ie(c),y=Ye.now(),w=f.reduce(((k,F)=>k.add(F.key)),be());let T,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let F=$r(),B=be();return g.xs.getEntries(k,w).next((L=>{F=L,F.forEach(((J,Z)=>{Z.isValidDocument()||(B=B.add(J))}))})).next((()=>g.localDocuments.getOverlayedDocuments(k,F))).next((L=>{T=L;const J=[];for(const Z of f){const K=sC(Z,T.get(Z.key).overlayedDocument);K!=null&&J.push(new $s(Z.key,K,V0(K.value.mapValue),ur.exists(!0)))}return g.mutationQueue.addMutationBatch(k,y,J,f)})).next((L=>{x=L;const J=L.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(k,L.batchId,J)}))})).then((()=>({batchId:x.batchId,changes:H0(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,f,g){let y=c.du[c.currentUser.toKey()];y||(y=new rt(Ne)),y=y.insert(f,g),c.du[c.currentUser.toKey()]=y})(s,o.batchId,t),await jl(s,o.changes),await dh(s.remoteStore)}catch(o){const l=Sp(o,"Failed to persist write");t.reject(l)}}async function bw(n,e){const t=Ie(n);try{const s=await nk(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Fe(c.hu,14607):o.removedDocuments.size>0&&(Fe(c.hu,42227),c.hu=!1))})),await jl(t,s,e)}catch(s){await Yo(s)}}function D_(n,e,t){const s=Ie(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const g=Ie(c);g.onlineState=f;let y=!1;g.queries.forEach(((w,T)=>{for(const x of T.ba)x.va(f)&&(y=!0)})),y&&Rp(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Hk(n,e,t){const s=Ie(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new rt(pe.comparator);c=c.insert(l,$t.newNoDocument(l,Te.min()));const f=be().add(l),g=new uh(Te.min(),new Map,new rt(Ne),c,f);await bw(s,g),s.Ru=s.Ru.remove(l),s.Au.delete(e),Cp(s)}else await Nf(s.localStore,e,!1).then((()=>Vf(s,e,t))).catch(Yo)}async function Wk(n,e){const t=Ie(n),s=e.batch.batchId;try{const o=await tk(t.localStore,e);Vw(t,s,null),Dw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await jl(t,o)}catch(o){await Yo(o)}}async function Gk(n,e,t){const s=Ie(n);try{const o=await(function(c,f){const g=Ie(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,f).next((T=>(Fe(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(s.localStore,e);Vw(s,e,t),Dw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await jl(s,o)}catch(o){await Yo(o)}}function Dw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Vw(n,e,t){const s=Ie(n);let o=s.du[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function Vf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((s=>{n.Vu.containsKey(s)||Lw(n,s)}))}function Lw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(wp(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Cp(n))}function V_(n,e,t){for(const s of t)s instanceof kw?(n.Vu.addReference(s.key,e),Kk(n,s)):s instanceof Pw?(ae(Ap,"Document no longer in limbo: "+s.key),n.Vu.removeReference(s.key,e),n.Vu.containsKey(s.key)||Lw(n,s.key)):ve(19791,{wu:s})}function Kk(n,e){const t=e.key,s=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(s)||(ae(Ap,"New document in limbo: "+t),n.Eu.add(s),Cp(n))}function Cp(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new pe(Ge.fromString(e)),s=n.fu.next();n.Au.set(s,new Mk(t)),n.Ru=n.Ru.insert(t,s),ww(n.remoteStore,new Rs(lr(sh(t.path)),s,"TargetPurposeLimboResolution",th.ce))}}async function jl(n,e,t){const s=Ie(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{c.push(s.pu(g,e,t).then((y=>{var w;if((y||t)&&s.isPrimaryClient){const T=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){o.push(y);const T=_p.Es(g.targetId,y);l.push(T)}})))})),await Promise.all(c),s.Pu.J_(o),await(async function(g,y){const w=Ie(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>G.forEach(y,(x=>G.forEach(x.Ts,(k=>w.persistence.referenceDelegate.addReference(T,x.targetId,k))).next((()=>G.forEach(x.Is,(k=>w.persistence.referenceDelegate.removeReference(T,x.targetId,k)))))))))}catch(T){if(!Xo(T))throw T;ae(vp,"Failed to update sequence numbers: "+T)}for(const T of y){const x=T.targetId;if(!T.fromCache){const k=w.vs.get(x),F=k.snapshotVersion,B=k.withLastLimboFreeSnapshotVersion(F);w.vs=w.vs.insert(x,B)}}})(s.localStore,l))}async function Qk(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){ae(Ap,"User change. New user:",e.toKey());const s=await gw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ie(W.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await jl(t,s.Ns)}}function Jk(n,e){const t=Ie(n),s=t.Au.get(e);if(s&&s.hu)return be().add(s.key);{let o=be();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function Ow(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hk.bind(null,e),e.Pu.J_=Dk.bind(null,e.eventManager),e.Pu.yu=Vk.bind(null,e.eventManager),e}function Yk(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gk.bind(null,e),e}class zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ek(this.persistence,new YC,e.initialUser,this.serializer)}Cu(e){return new mw(yp.Vi,this.serializer)}Du(e){return new ak}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zc.provider={build:()=>new zc};class Xk extends zc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Fe(this.persistence.referenceDelegate instanceof Fc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new OC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new mw((s=>Fc.Vi(s,t)),this.serializer)}}class Lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>D_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qk.bind(null,this.syncEngine),await Pk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bk})()}createDatastore(e){const t=ch(e.databaseInfo.databaseId),s=dk(e.databaseInfo);return yk(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,f){return new vk(s,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>D_(this.syncEngine,t,0)),(function(){return A_.v()?new A_:new lk})())}createSyncEngine(e,t){return(function(o,l,c,f,g,y,w){const T=new jk(o,l,c,f,g,y);return w&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ie(o);ae(Ci,"RemoteStore shutting down."),l.Ea.add(5),await Ml(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Lf.provider={build:()=>new Lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="FirestoreClient";class Zk{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ae(Fs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ae(Fs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Sp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function rf(n,e){n.asyncQueue.verifyOperationInProgress(),ae(Fs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await gw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function L_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await eP(n);ae(Fs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>k_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>k_(e.remoteStore,o))),n._onlineComponents=e}async function eP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae(Fs,"Using user provided OfflineComponentProvider");try{await rf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;jo("Error using user provided cache. Falling back to memory cache: "+t),await rf(n,new zc)}}else ae(Fs,"Using default OfflineComponentProvider"),await rf(n,new Xk(void 0));return n._offlineComponents}async function jw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae(Fs,"Using user provided OnlineComponentProvider"),await L_(n,n._uninitializedComponentsProvider._online)):(ae(Fs,"Using default OnlineComponentProvider"),await L_(n,new Lf))),n._onlineComponents}function tP(n){return jw(n).then((e=>e.syncEngine))}async function Of(n){const e=await jw(n),t=e.eventManager;return t.onListen=Uk.bind(null,e.syncEngine),t.onUnlisten=zk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$k.bind(null,e.syncEngine),t}function nP(n,e,t,s){const o=new Mw(s),l=new Cw(e,o,t);return n.asyncQueue.enqueueAndForget((async()=>Rw(await Of(n),l))),()=>{o.Nu(),n.asyncQueue.enqueueAndForget((async()=>Aw(await Of(n),l)))}}function rP(n,e,t={}){const s=new Ns;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,y){const w=new Mw({next:x=>{w.Nu(),c.enqueueAndForget((()=>Aw(l,T)));const k=x.docs.has(f);!k&&x.fromCache?y.reject(new ie(W.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&g&&g.source==="server"?y.reject(new ie(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new Cw(sh(f.path),w,{includeMetadataChanges:!0,Ka:!0});return Rw(l,T)})(await Of(n),n.asyncQueue,e,t,s))),s.promise}function sP(n,e){const t=new Ns;return n.asyncQueue.enqueueAndForget((async()=>qk(await tP(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="ComponentProvider",O_=new Map;function oP(n,e,t,s,o){return new AA(n,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,Uw(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="firestore.googleapis.com",M_=!0;class j_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fw,this.ssl=M_}else this.host=e.host,this.ssl=e.ssl??M_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VC)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Uw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fh{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new oA;switch(s.type){case"firstParty":return new cA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=O_.get(t);s&&(ae(iP,"Removing Datastore"),O_.delete(t),s.terminate())})(this),Promise.resolve()}}function aP(n,e,t,s={}){var y;n=Mr(n,fh);const o=Bs(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(Gf(`https://${f}`),Kf("Firestore",!0)),l.host!==Fw&&l.host!==f&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!Ii(g,c)&&(n._setSettings(g),s.mockUserToken)){let w,T;if(typeof s.mockUserToken=="string")w=s.mockUserToken,T=zt.MOCK_USER;else{w=Nv(s.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new ie(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new zt(x)}n._authCredentials=new aA(new T0(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class dt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Vl(t,dt._jsonSchema))return new dt(e,s||null,new pe(Ge.fromString(t.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:vt("string",dt._jsonSchemaVersion),referencePath:vt("string")};class bs extends qs{constructor(e,t,s){super(e,t,sh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new pe(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function $c(n,e,...t){if(n=ft(n),x0("collection","path",e),n instanceof fh){const s=Ge.fromString(e,...t);return Yy(s),new bs(n,null,s)}{if(!(n instanceof dt||n instanceof bs))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ge.fromString(e,...t));return Yy(s),new bs(n.firestore,null,s)}}function qc(n,e,...t){if(n=ft(n),arguments.length===1&&(e=op.newId()),x0("doc","path",e),n instanceof fh){const s=Ge.fromString(e,...t);return Jy(s),new dt(n,null,new pe(s))}{if(!(n instanceof dt||n instanceof bs))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ge.fromString(e,...t));return Jy(s),new dt(n.firestore,n instanceof bs?n.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="AsyncQueue";class F_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _w(this,"async_queue_retry"),this._c=()=>{const s=nf();s&&ae(U_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=nf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=nf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ns;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Xo(e))throw e;ae(U_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,zr("INTERNAL UNHANDLED ERROR: ",B_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Ip.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&ve(47125,{Pc:B_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function B_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class qo extends fh{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new F_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F_(e),this._firestoreClient=void 0,await e}}}function lP(n,e){const t=typeof n=="object"?n:Yf(),s=typeof n=="string"?n:Lc,o=Qc(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=Cv("firestore");l&&aP(o,...l)}return o}function kp(n){if(n._terminated)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||uP(n),n._firestoreClient}function uP(n){var s,o,l,c;const e=n._freezeSettings(),t=oP(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,(o=n._app)==null?void 0:o.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Zk(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._byteString=e}static fromBase64String(e){try{return new In(Vt.fromBase64String(e))}catch(t){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new In(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:In._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vl(e,In._jsonSchema))return In.fromBase64String(e.bytes)}}In._jsonSchemaVersion="firestore/bytes/1.0",In._jsonSchema={type:vt("string",In._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hr._jsonSchemaVersion}}static fromJSON(e){if(Vl(e,hr._jsonSchema))return new hr(e.latitude,e.longitude)}}hr._jsonSchemaVersion="firestore/geoPoint/1.0",hr._jsonSchema={type:vt("string",hr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vl(e,Mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Mn(e.vectorValues);throw new ie(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mn._jsonSchemaVersion="firestore/vectorValue/1.0",Mn._jsonSchema={type:vt("string",Mn._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=/^__.*__$/;class hP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new $s(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ll(e,this.data,t,this.fieldTransforms)}}class Bw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new $s(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{dataSource:n})}}class Np{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Np({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Hc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(zw(this.dataSource)&&cP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class dP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ch(e)}createContext(e,t,s,o=!1){return new Np({dataSource:e,methodName:t,targetDoc:s,path:Dt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bp(n){const e=n._freezeSettings(),t=ch(n._databaseId);return new dP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fP(n,e,t,s,o,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,o);Lp("Data must be an object, but it was:",c,s);const f=$w(s,c);let g,y;if(l.merge)g=new fn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const x=Ho(e,T,t);if(!c.contains(x))throw new ie(W.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Ww(w,x)||w.push(x)}g=new fn(w),y=c.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=c.fieldTransforms;return new hP(new nn(f),g,y)}class ph extends Ul{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ph}}class Dp extends Ul{_toFieldTransform(e){return new Z0(e.path,new wl)}isEqual(e){return e instanceof Dp}}class Vp extends Ul{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new xl(e.serializer,K0(e.serializer,this.Vc));return new Z0(e.path,t)}isEqual(e){return e instanceof Vp&&this.Vc===e.Vc}}function pP(n,e,t,s){const o=n.createContext(1,e,t);Lp("Data must be an object, but it was:",o,s);const l=[],c=nn.empty();zs(s,((g,y)=>{const w=Hw(e,g,t);y=ft(y);const T=o.childContextForFieldPath(w);if(y instanceof ph)l.push(w);else{const x=Fl(y,T);x!=null&&(l.push(w),c.set(w,x))}}));const f=new fn(l);return new Bw(c,f,o.fieldTransforms)}function mP(n,e,t,s,o,l){const c=n.createContext(1,e,t),f=[Ho(e,s,t)],g=[o];if(l.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(Ho(e,l[x])),g.push(l[x+1]);const y=[],w=nn.empty();for(let x=f.length-1;x>=0;--x)if(!Ww(y,f[x])){const k=f[x];let F=g[x];F=ft(F);const B=c.childContextForFieldPath(k);if(F instanceof ph)y.push(k);else{const L=Fl(F,B);L!=null&&(y.push(k),w.set(k,L))}}const T=new fn(y);return new Bw(w,T,c.fieldTransforms)}function gP(n,e,t,s=!1){return Fl(t,n.createContext(s?4:3,e))}function Fl(n,e){if(qw(n=ft(n)))return Lp("Unsupported field value:",e,n),$w(n,e);if(n instanceof Ul)return(function(s,o){if(!zw(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const f of s){let g=Fl(f,o.childContextForArray(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=ft(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return K0(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Ye.fromDate(s);return{timestampValue:Uc(o.serializer,l)}}if(s instanceof Ye){const l=new Ye(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uc(o.serializer,l)}}if(s instanceof hr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof In)return{bytesValue:ow(o.serializer,s._byteString)};if(s instanceof dt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:mp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Mn)return(function(c,f){const g=c instanceof Mn?c.toArray():c;return{mapValue:{fields:{[b0]:{stringValue:D0},[Oc]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw f.createError("VectorValues must only contain numeric values.");return dp(f.serializer,w)}))}}}}}})(s,o);if(fw(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${eh(s)}`)})(n,e)}function $w(n,e){const t={};return R0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zs(n,((s,o)=>{const l=Fl(o,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function qw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ye||n instanceof hr||n instanceof In||n instanceof dt||n instanceof Ul||n instanceof Mn||fw(n))}function Lp(n,e,t){if(!qw(t)||!I0(t)){const s=eh(t);throw s==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+s)}}function Ho(n,e,t){if((e=ft(e))instanceof Pp)return e._internalPath;if(typeof e=="string")return Hw(n,e);throw Hc("Field path arguments must be of type string or ",n,!1,void 0,t)}const yP=new RegExp("[~\\*/\\[\\]]");function Hw(n,e,t){if(e.search(yP)>=0)throw Hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pp(...e.split("."))._internalPath}catch{throw Hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hc(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${s}`),c&&(g+=` in document ${o}`),g+=")"),new ie(W.INVALID_ARGUMENT,f+n+g)}function Ww(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{convertValue(e,t="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return zs(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[Oc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>ht(c.doubleValue)));return new Mn(t)}convertGeoPoint(e){return new hr(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=rh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const t=Os(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ge.fromString(e);Fe(dw(s),9688,{name:e});const o=new yl(s.get(1),s.get(3)),l=new pe(s.popFirst(5));return o.isEqual(t)||zr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends _P{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function Kw(){return new Dp("serverTimestamp")}function Qw(n){return new Vp("increment",n)}const z_="@firebase/firestore",$_="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ho("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vP extends Jw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Op{}class Mp extends Op{}function Yw(n,e,...t){let s=[];e instanceof Op&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((g=>g instanceof Up)).length,f=l.filter((g=>g instanceof jp)).length;if(c>1||c>0&&f>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class jp extends Mp{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new jp(e,t,s)}_apply(e){const t=this._parse(e);return Zw(e._query,t),new qs(e.firestore,e.converter,Rf(e._query,t))}_parse(e){const t=bp(e.firestore);return(function(l,c,f,g,y,w,T){let x;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){W_(T,w);const F=[];for(const B of T)F.push(H_(g,l,B));x={arrayValue:{values:F}}}else x=H_(g,l,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||W_(T,w),x=gP(f,c,T,w==="in"||w==="not-in");return _t.create(y,w,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Up extends Op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Up(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const f=l.getFlattenedFilters();for(const g of f)Zw(c,g),c=Rf(c,g)})(e._query,t),new qs(e.firestore,e.converter,Rf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fp extends Mp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fp(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vl(l,c)})(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,HA(e._query,t))}}function Xw(n,e="asc"){const t=e,s=Ho("orderBy",n);return Fp._create(s,t)}class Bp extends Mp{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Bp(e,t,s)}_apply(e){return new qs(e.firestore,e.converter,jc(e._query,this._limit,this._limitType))}}function EP(n){return Bp._create("limit",n,"F")}function H_(n,e,t){if(typeof(t=ft(t))=="string"){if(t==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B0(e)&&t.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ge.fromString(t));if(!pe.isDocumentKey(s))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return i_(n,new pe(s))}if(t instanceof dt)return i_(n,t._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eh(t)}.`)}function W_(n,e){if(!Array.isArray(n)||n.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zw(n,e){const t=(function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function TP(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class sl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wi extends Jw{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ho("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",wi._jsonSchema={type:vt("string",wi._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class Ic extends wi{data(e={}){return super.data(e)}}class Mo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new sl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Ic(this._firestore,this._userDataWriter,s.key,s,new sl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const g=new Ic(o._firestore,o._userDataWriter,f.doc.key,f.doc,new sl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Ic(o._firestore,o._userDataWriter,f.doc.key,f.doc,new sl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),w=c.indexOf(f.doc.key)),{type:xP(f.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:vt("string",Mo._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(n){n=Mr(n,dt);const e=Mr(n.firestore,qo),t=kp(e);return rP(t,n._key).then((s=>sE(e,n,s)))}function eE(n,e,t,...s){n=Mr(n,dt);const o=Mr(n.firestore,qo),l=bp(o);let c;return c=typeof(e=ft(e))=="string"||e instanceof Pp?mP(l,"updateDoc",n._key,e,t,s):pP(l,"updateDoc",n._key,e),rE(o,[c.toMutation(n._key,ur.exists(!0))])}function tE(n,e){const t=Mr(n.firestore,qo),s=qc(n),o=TP(n.converter,e),l=bp(n.firestore);return rE(t,[fP(l,"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,ur.exists(!1))]).then((()=>s))}function nE(n,...e){var y,w,T;n=ft(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||q_(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(q_(e[s])){const x=e[s];e[s]=(y=x.next)==null?void 0:y.bind(x),e[s+1]=(w=x.error)==null?void 0:w.bind(x),e[s+2]=(T=x.complete)==null?void 0:T.bind(x)}let l,c,f;if(n instanceof dt)c=Mr(n.firestore,qo),f=sh(n._key.path),l={next:x=>{e[s]&&e[s](sE(c,n,x))},error:e[s+1],complete:e[s+2]};else{const x=Mr(n,qs);c=Mr(x.firestore,qo),f=x._query;const k=new Gw(c);l={next:F=>{e[s]&&e[s](new Mo(c,k,x,F))},error:e[s+1],complete:e[s+2]},wP(n._query)}const g=kp(c);return nP(g,f,o,l)}function rE(n,e){const t=kp(n);return sP(t,e)}function sE(n,e,t){const s=t.docs.get(e._key),o=new Gw(n);return new wi(n,o,e._key,s,new sl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){iA(bi),Si(new Ds("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new qo(new lA(s.getProvider("auth-internal")),new hA(c,s.getProvider("app-check-internal")),CA(c,o),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),ir(z_,$_,e),ir(z_,$_,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="firebasestorage.googleapis.com",oE="storageBucket",SP=120*1e3,RP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends mr{constructor(e,t,s=0){super(sf(e),`Firebase Storage: ${t} (${sf(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ot;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ot||(ot={}));function sf(n){return"storage/"+n}function zp(){const n="An unknown error occurred, please check the error payload for server response.";return new at(ot.UNKNOWN,n)}function AP(n){return new at(ot.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function CP(n){return new at(ot.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kP(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new at(ot.UNAUTHENTICATED,n)}function PP(){return new at(ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function NP(n){return new at(ot.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function bP(){return new at(ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DP(){return new at(ot.CANCELED,"User canceled the upload/download.")}function VP(n){return new at(ot.INVALID_URL,"Invalid URL '"+n+"'.")}function LP(n){return new at(ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function OP(){return new at(ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oE+"' property when initializing the app?")}function MP(){return new at(ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jP(){return new at(ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function UP(n){return new at(ot.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Mf(n){return new at(ot.INVALID_ARGUMENT,n)}function aE(){return new at(ot.APP_DELETED,"The Firebase app was deleted.")}function FP(n){return new at(ot.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hl(n,e){return new at(ot.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Xa(n){throw new at(ot.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=pn.makeFromUrl(e,t)}catch{return new pn(e,"")}if(s.path==="")return s;throw LP(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+o+c,"i"),g={bucket:1,path:3};function y(ue){ue.path_=decodeURIComponent(ue.path)}const w="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",k=new RegExp(`^https?://${T}/${w}/b/${o}/o${x}`,"i"),F={bucket:1,path:3},B=t===iE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",J=new RegExp(`^https?://${B}/${o}/${L}`,"i"),K=[{regex:f,indices:g,postModify:l},{regex:k,indices:F,postModify:y},{regex:J,indices:{bucket:1,path:2},postModify:y}];for(let ue=0;ue<K.length;ue++){const me=K[ue],se=me.regex.exec(e);if(se){const P=se[me.indices.bucket];let S=se[me.indices.path];S||(S=""),s=new pn(P,S),me.postModify(s);break}}if(s==null)throw VP(e);return s}}class BP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(n,e,t){let s=1,o=null,l=null,c=!1,f=0;function g(){return f===2}let y=!1;function w(...L){y||(y=!0,e.apply(null,L))}function T(L){o=setTimeout(()=>{o=null,n(k,g())},L)}function x(){l&&clearTimeout(l)}function k(L,...J){if(y){x();return}if(L){x(),w.call(null,L,...J);return}if(g()||c){x(),w.call(null,L,...J);return}s<64&&(s*=2);let K;f===1?(f=2,K=0):K=(s+Math.random())*1e3,T(K)}let F=!1;function B(L){F||(F=!0,x(),!y&&(o!==null?(L||(f=2),clearTimeout(o),T(0)):L||(f=1)))}return T(0),l=setTimeout(()=>{c=!0,B(!0)},t),B}function $P(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(n){return n!==void 0}function HP(n){return typeof n=="object"&&!Array.isArray(n)}function $p(n){return typeof n=="string"||n instanceof String}function G_(n){return qp()&&n instanceof Blob}function qp(){return typeof Blob<"u"}function K_(n,e,t,s){if(s<e)throw Mf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw Mf(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function lE(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var Ei;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ei||(Ei={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,t,s,o,l,c,f,g,y,w,T,x=!0,k=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=T,this.retry=x,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,B)=>{this.resolve_=F,this.reject_=B,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new cc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const g=f.loaded,y=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===Ei.NO_ERROR,g=l.getStatus();if(!f||WP(g,this.additionalRetryCodes_)&&this.retry){const w=l.getErrorCode()===Ei.ABORT;s(!1,new cc(!1,null,w));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new cc(y,l))})},t=(s,o)=>{const l=this.resolve_,c=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());qP(g)?l(g):l()}catch(g){c(g)}else if(f!==null){const g=zp();g.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,g)):c(g)}else if(o.canceled){const g=this.appDelete_?aE():DP();c(g)}else{const g=bP();c(g)}};this.canceled_?t(!1,new cc(!1,null,!0)):this.backoffId_=zP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$P(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cc{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function KP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function QP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function YP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function XP(n,e,t,s,o,l,c=!0,f=!1){const g=lE(n.urlParams),y=n.url+g,w=Object.assign({},n.headers);return JP(w,e),KP(w,t),QP(w,l),YP(w,s),new GP(y,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,c,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eN(...n){const e=ZP();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(qp())return new Blob(n);throw new at(ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tN(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(n){if(typeof atob>"u")throw UP("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class of{constructor(e,t){this.data=e,this.contentType=t||null}}function rN(n,e){switch(n){case sr.RAW:return new of(uE(e));case sr.BASE64:case sr.BASE64URL:return new of(cE(n,e));case sr.DATA_URL:return new of(iN(e),oN(e))}throw zp()}function uE(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=s,c=n.charCodeAt(++t);s=65536|(l&1023)<<10|c&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function sN(n){let e;try{e=decodeURIComponent(n)}catch{throw hl(sr.DATA_URL,"Malformed data URL.")}return uE(e)}function cE(n,e){switch(n){case sr.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw hl(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case sr.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw hl(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=nN(e)}catch(o){throw o.message.includes("polyfill")?o:hl(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class hE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw hl(sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=aN(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function iN(n){const e=new hE(n);return e.base64?cE(sr.BASE64,e.rest):sN(e.rest)}function oN(n){return new hE(n).contentType}function aN(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t){let s=0,o="";G_(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(G_(this.data_)){const s=this.data_,o=tN(s,e,t);return o===null?null:new Ss(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Ss(s,!0)}}static getBlob(...e){if(qp()){const t=e.map(s=>s instanceof Ss?s.data_:s);return new Ss(eN.apply(null,t))}else{const t=e.map(c=>$p(c)?rN(sr.RAW,c).data:c.data_);let s=0;t.forEach(c=>{s+=c.byteLength});const o=new Uint8Array(s);let l=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)o[l++]=c[f]}),new Ss(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(n){let e;try{e=JSON.parse(n)}catch{return null}return HP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function uN(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function fE(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n,e){return e}class Kt{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||cN}}let hc=null;function hN(n){return!$p(n)||n.length<2?n:fE(n)}function pE(){if(hc)return hc;const n=[];n.push(new Kt("bucket")),n.push(new Kt("generation")),n.push(new Kt("metageneration")),n.push(new Kt("name","fullPath",!0));function e(l,c){return hN(c)}const t=new Kt("name");t.xform=e,n.push(t);function s(l,c){return c!==void 0?Number(c):c}const o=new Kt("size");return o.xform=s,n.push(o),n.push(new Kt("timeCreated")),n.push(new Kt("updated")),n.push(new Kt("md5Hash",null,!0)),n.push(new Kt("cacheControl",null,!0)),n.push(new Kt("contentDisposition",null,!0)),n.push(new Kt("contentEncoding",null,!0)),n.push(new Kt("contentLanguage",null,!0)),n.push(new Kt("contentType",null,!0)),n.push(new Kt("metadata","customMetadata",!0)),hc=n,hc}function dN(n,e){function t(){const s=n.bucket,o=n.fullPath,l=new pn(s,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function fN(n,e,t){const s={};s.type="file";const o=t.length;for(let l=0;l<o;l++){const c=t[l];s[c.local]=c.xform(s,e[c.server])}return dN(s,n),s}function mE(n,e,t){const s=dE(e);return s===null?null:fN(n,s,t)}function pN(n,e,t,s){const o=dE(e);if(o===null||!$p(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(y=>{const w=n.bucket,T=n.fullPath,x="/b/"+c(w)+"/o/"+c(T),k=Hp(x,t,s),F=lE({alt:"media",token:y});return k+F})[0]}function mN(n,e){const t={},s=e.length;for(let o=0;o<s;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class gE{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(n){if(!n)throw zp()}function gN(n,e){function t(s,o){const l=mE(n,o,e);return yE(l!==null),l}return t}function yN(n,e){function t(s,o){const l=mE(n,o,e);return yE(l!==null),pN(l,o,n.host,n._protocol)}return t}function _E(n){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=PP():o=kP():t.getStatus()===402?o=CP(n.bucket):t.getStatus()===403?o=NP(n.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function _N(n){const e=_E(n);function t(s,o){let l=e(s,o);return s.getStatus()===404&&(l=AP(n.path)),l.serverResponse=o.serverResponse,l}return t}function vN(n,e,t){const s=e.fullServerUrl(),o=Hp(s,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,f=new gE(o,l,yN(n,t),c);return f.errorHandler=_N(e),f}function wN(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function EN(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=wN(null,e)),s}function TN(n,e,t,s,o){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let K="";for(let ue=0;ue<2;ue++)K=K+Math.random().toString().slice(2);return K}const g=f();c["Content-Type"]="multipart/related; boundary="+g;const y=EN(e,s,o),w=mN(y,t),T="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,x=`\r
--`+g+"--",k=Ss.getBlob(T,s,x);if(k===null)throw MP();const F={name:y.fullPath},B=Hp(l,n.host,n._protocol),L="POST",J=n.maxUploadRetryTime,Z=new gE(B,L,gN(n,t),J);return Z.urlParams=F,Z.headers=c,Z.body=k.uploadData(),Z.errorHandler=_E(e),Z}class xN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ei.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ei.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ei.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,l){if(this.sent_)throw Xa("cannot .send() more than once");if(Bs(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class IN extends xN{initXhr(){this.xhr_.responseType="text"}}function vE(){return new IN}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,t){this._service=e,t instanceof pn?this._location=t:this._location=pn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ki(e,t)}get root(){const e=new pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fE(this._location.path)}get storage(){return this._service}get parent(){const e=lN(this._location.path);if(e===null)return null;const t=new pn(this._location.bucket,e);return new ki(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw FP(e)}}function SN(n,e,t){n._throwIfRoot("uploadBytes");const s=TN(n.storage,n._location,pE(),new Ss(e,!0),t);return n.storage.makeRequestWithTokens(s,vE).then(o=>({metadata:o,ref:n}))}function RN(n){n._throwIfRoot("getDownloadURL");const e=vN(n.storage,n._location,pE());return n.storage.makeRequestWithTokens(e,vE).then(t=>{if(t===null)throw jP();return t})}function AN(n,e){const t=uN(n._location.path,e),s=new pn(n._location.bucket,t);return new ki(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){return/^[A-Za-z]+:\/\//.test(n)}function kN(n,e){return new ki(n,e)}function wE(n,e){if(n instanceof Wp){const t=n;if(t._bucket==null)throw OP();const s=new ki(t,t._bucket);return e!=null?wE(s,e):s}else return e!==void 0?AN(n,e):n}function PN(n,e){if(e&&CN(e)){if(n instanceof Wp)return kN(n,e);throw Mf("To use ref(service, url), the first argument must be a Storage instance.")}else return wE(n,e)}function Q_(n,e){const t=e==null?void 0:e[oE];return t==null?null:pn.makeFromBucketSpec(t,n)}function NN(n,e,t,s={}){n.host=`${e}:${t}`;const o=Bs(e);o&&(Gf(`https://${n.host}/b`),Kf("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:Nv(l,n.app.options.projectId))}class Wp{constructor(e,t,s,o,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=iE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SP,this._maxUploadRetryTime=RP,this._requests=new Set,o!=null?this._bucket=pn.makeFromBucketSpec(o,this._host):this._bucket=Q_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,e):this._bucket=Q_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){K_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){K_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ki(this,e)}_makeRequest(e,t,s,o,l=!0){if(this._deleted)return new BP(aE());{const c=XP(e,this._appId,s,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const J_="@firebase/storage",Y_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="storage";function bN(n,e,t){return n=ft(n),SN(n,e,t)}function DN(n){return n=ft(n),RN(n)}function VN(n,e){return n=ft(n),PN(n,e)}function LN(n=Yf(),e){n=ft(n);const s=Qc(n,EE).getImmediate({identifier:e}),o=Cv("storage");return o&&ON(s,...o),s}function ON(n,e,t,s={}){NN(n,e,t,s)}function MN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Wp(t,s,o,e,bi)}function jN(){Si(new Ds(EE,MN,"PUBLIC").setMultipleInstances(!0)),ir(J_,Y_,""),ir(J_,Y_,"esm2020")}jN();const UN={apiKey:"AIzaSyDzUfmx3JCZf4639e-QAMpZYrikTWkPx2I",authDomain:"chatroulette-test.firebaseapp.com",projectId:"chatroulette-test",storageBucket:"chatroulette-test.firebasestorage.app",messagingSenderId:"477083456462",appId:"1:477083456462:web:544b25c8eec39c425e119f"},Gp=Vv(UN),Ti=lP(Gp),jf=tA(Gp),FN=LN(Gp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TE=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=$.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...f},g)=>$.createElement("svg",{ref:g,...zN,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:TE("lucide",o),...f},[...c.map(([y,w])=>$.createElement(y,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(n,e)=>{const t=$.forwardRef(({className:s,...o},l)=>$.createElement($N,{ref:l,iconNode:e,className:TE(`lucide-${BN(n)}`,s),...o}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],HN=ze("ArrowLeft",qN);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],GN=ze("Bell",WN);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],QN=ze("Bookmark",KN);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xE=ze("Calendar",JN);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],XN=ze("ChevronRight",YN);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],IE=ze("ChevronUp",ZN);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Kp=ze("CircleAlert",eb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],SE=ze("CircleCheckBig",tb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Li=ze("Clock",nb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],sb=ze("DollarSign",rb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],ob=ze("Filter",ib);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],lb=ze("Flag",ab);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],cb=ze("Flame",ub);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],RE=ze("Image",hb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fb=ze("LoaderCircle",db);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Il=ze("MessageSquare",pb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gb=ze("Plus",mb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Uf=ze("Search",yb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],AE=ze("Send",_b);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],wb=ze("Share2",vb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],X_=ze("Shield",Eb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],xb=ze("Sparkles",Tb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ff=ze("Star",Ib);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Qp=ze("TrendingUp",Sb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pi=ze("User",Rb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Z_=ze("Users",Ab);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Sl=ze("Video",Cb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ev=ze("X",kb);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Wo=ze("Zap",Pb);function Nb({post:n,onClick:e}){const t=c=>{if(!c)return"maintenant";const f=Math.floor((Date.now()-c)/1e3);return f<60?`${f}s`:f<3600?`${Math.floor(f/60)}m`:f<86400?`${Math.floor(f/3600)}h`:`${Math.floor(f/86400)}j`},s=n.mediaUrls&&n.mediaUrls.length>0,o=n.videoUrl,l=n.urgent;return _.jsxs("div",{onClick:e,className:`relative bg-slate-800/50 hover:bg-slate-800 border rounded-xl p-5 cursor-pointer transition-all hover:scale-[1.01] hover:shadow-xl group ${l?"border-red-500/50 hover:border-red-500":"border-slate-700 hover:border-slate-600"}`,children:[l&&_.jsxs("div",{className:"absolute -top-2 -right-2 flex items-center gap-1 px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full animate-pulse",children:[_.jsx(Kp,{className:"w-3 h-3"}),"URGENT"]}),_.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center shadow-lg",children:_.jsx(Pi,{className:"w-5 h-5 text-white"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("span",{className:"font-medium text-white",children:n.authorPseudo||"Anonyme"}),_.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[_.jsx(Li,{className:"w-3 h-3"}),_.jsx("span",{children:t(n.createdAt)})]})]})]}),_.jsx("h3",{className:"text-lg font-bold text-white mb-2 line-clamp-2 group-hover:text-blue-300 transition-colors",children:n.title}),_.jsx("p",{className:"text-slate-400 text-sm mb-4 line-clamp-3 leading-relaxed",children:n.content.replace(/```[\s\S]*?```/g,"[code]").replace(/`[^`]+`/g,"[code]")}),n.tags&&n.tags.length>0&&_.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.tags.map((c,f)=>_.jsx("span",{className:"px-2 py-1 bg-slate-700/50 text-slate-300 text-xs rounded-lg border border-slate-600/50",children:c},f))}),s&&_.jsxs("div",{className:"mb-4 rounded-lg overflow-hidden relative",children:[_.jsx("img",{src:n.mediaUrls[0],alt:"Preview",className:"w-full h-40 object-cover"}),n.mediaUrls.length>1&&_.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-lg",children:["+",n.mediaUrls.length-1," images"]})]}),_.jsxs("div",{className:"flex items-center gap-4 text-sm pt-3 border-t border-slate-700/50",children:[_.jsxs("button",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-700/50 hover:bg-blue-600 rounded-lg text-slate-300 hover:text-white transition-all",onClick:c=>{c.stopPropagation()},children:[_.jsx(IE,{className:"w-4 h-4"}),_.jsx("span",{className:"font-medium",children:n.upvotes||0})]}),_.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[_.jsx(Il,{className:"w-4 h-4"}),_.jsxs("span",{children:[n.commentCount||0," commentaires"]})]}),s&&_.jsx("div",{className:"flex items-center gap-1 text-slate-500",children:_.jsx(RE,{className:"w-4 h-4"})}),o&&_.jsx("div",{className:"flex items-center gap-1 text-slate-500",children:_.jsx(Sl,{className:"w-4 h-4"})})]})]})}function bb({onClose:n}){const[e,t]=$.useState(""),[s,o]=$.useState(""),[l,c]=$.useState([]),[f,g]=$.useState([]),[y,w]=$.useState(!1),[T,x]=$.useState(localStorage.getItem("userPseudo")||""),[k,F]=$.useState(""),[B,L]=$.useState(!1),J=$.useRef(null),Z=se=>{const P=Array.from(se.target.files);if(P.length+l.length>4){alert("Maximum 4 fichiers");return}const S=P.map(C=>({url:URL.createObjectURL(C),type:C.type.startsWith("video")?"video":"image"}));c([...l,...P]),g([...f,...S])},K=se=>{c(l.filter((P,S)=>S!==se)),g(f.filter((P,S)=>S!==se))},ue=async se=>{try{const P=`posts/${Date.now()}_${se.name}`,S=VN(FN,P);return await bN(S,se),DN(S)}catch(P){return console.error("Upload error:",P),null}},me=async se=>{var P;if(se.preventDefault(),!(!e.trim()||!s.trim())){w(!0);try{T&&localStorage.setItem("userPseudo",T);const S=(await Promise.all(l.map(ue))).filter(b=>b!==null),C=k.split(",").map(b=>b.trim()).filter(b=>b!=="");await tE($c(Ti,"posts"),{title:e.trim(),content:s.trim(),mediaUrls:S,tags:C,urgent:B,authorPseudo:T||"Anonyme",authorId:((P=jf.currentUser)==null?void 0:P.uid)||"anonymous",createdAt:Kw(),commentCount:0,upvotes:0}),n()}catch(S){console.error("Error creating post:",S),alert("Note: Le post sera visible localement (Mode Dmo)"),n()}finally{w(!1)}}};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 text-left",children:_.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[_.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-800",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-white",children:"Nouveau Problme"}),_.jsx("p",{className:"text-sm text-slate-400",children:"Dcrivez votre besoin pour obtenir de l'aide"})]}),_.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-full transition-all",children:_.jsx(ev,{className:"w-6 h-6"})})]}),_.jsxs("form",{onSubmit:me,className:"p-6 space-y-6",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1.5",children:"Votre pseudo"}),_.jsx("input",{type:"text",value:T,onChange:se=>x(se.target.value),placeholder:"Anonyme",className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl p-3 text-white focus:outline-none focus:border-blue-500 transition-all font-mono text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1.5",children:"Tags (spars par des virgules)"}),_.jsx("input",{type:"text",value:k,onChange:se=>F(se.target.value),placeholder:"React, Node, CSS...",className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl p-3 text-white focus:outline-none focus:border-blue-500 transition-all font-mono text-sm"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1.5",children:"Titre du problme *"}),_.jsx("input",{type:"text",value:e,onChange:se=>t(se.target.value),placeholder:"Ex: Mon application crash au dploiement",required:!0,className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl p-3 text-white font-bold focus:outline-none focus:border-blue-500 transition-all placeholder:font-normal"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1.5",children:"Description dtaille *"}),_.jsx("textarea",{value:s,onChange:se=>o(se.target.value),placeholder:"Expliquez ce que vous essayez de faire et l'erreur que vous rencontrez. Vous pouvez utiliser du code...",required:!0,rows:6,className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl p-4 text-white focus:outline-none focus:border-blue-500 transition-all resize-none leading-relaxed font-mono text-sm"})]}),_.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/30 border border-slate-700 rounded-xl cursor-pointer hover:bg-slate-800/50 transition-all",onClick:()=>L(!B),children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:`p-2 rounded-lg transition-colors ${B?"bg-red-500 text-white":"bg-slate-700 text-slate-500"}`,children:_.jsx(Kp,{className:"w-5 h-5"})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold text-white",children:"Marquer comme urgent"}),_.jsx("p",{className:"text-xs text-slate-400",children:"Pour les problmes bloquants ncessitant une rponse immdiate"})]})]}),_.jsx("div",{className:`w-12 h-6 rounded-full relative transition-colors ${B?"bg-red-600":"bg-slate-700"}`,children:_.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${B?"translate-x-6":"translate-x-0"} left-1`})})]}),f.length>0&&_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:f.map((se,P)=>_.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden border border-slate-700 group",children:[se.type==="video"?_.jsx("video",{src:se.url,className:"w-full h-full object-cover"}):_.jsx("img",{src:se.url,alt:"",className:"w-full h-full object-cover"}),_.jsx("button",{type:"button",onClick:()=>K(P),className:"absolute top-1 right-1 bg-red-600/80 hover:bg-red-600 text-white rounded-lg p-1 transition-colors",children:_.jsx(ev,{className:"w-4 h-4"})})]},P))}),_.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-slate-800",children:[_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{ref:J,type:"file",accept:"image/*,video/*",multiple:!0,onChange:Z,className:"hidden"}),_.jsxs("button",{type:"button",onClick:()=>{var se;return(se=J.current)==null?void 0:se.click()},className:"flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-xl transition-all border border-slate-700",children:[_.jsx(RE,{className:"w-4 h-4"}),_.jsx("span",{className:"text-sm font-medium",children:"Mdias"})]})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{type:"button",onClick:n,className:"px-6 py-2 text-slate-400 hover:text-white font-medium transition-colors",children:"Annuler"}),_.jsxs("button",{type:"submit",disabled:y||!e.trim()||!s.trim(),className:"flex items-center gap-2 px-8 py-2.5 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 disabled:from-slate-800 disabled:to-slate-800 disabled:text-slate-500 disabled:cursor-not-allowed text-white rounded-xl font-bold transition-all hover:scale-105 shadow-xl shadow-blue-500/20",children:[y?_.jsx(fb,{className:"w-5 h-5 animate-spin"}):_.jsx(AE,{className:"w-5 h-5"}),"Publier mon problme"]})]})]})]})]})})}const xi=[{id:"demo-1",title:" Bug React useEffect qui tourne en boucle infinie",content:`Mon useEffect se dclenche en boucle, j'ai essay plusieurs solutions mais rien ne marche.

\`\`\`javascript
useEffect(() => {
  setData(fetchData());
}, [data]); // Cette dpendance cause la boucle
\`\`\`

Le composant se re-render constamment et l'app freeze. J'ai besoin d'aide urgente pour mon projet de startup !`,authorPseudo:"DevJunior_Alex",createdAt:Date.now()-1e3*60*15,commentCount:7,upvotes:23,mediaUrls:[],tags:["React","JavaScript","Hooks"],urgent:!0},{id:"demo-2",title:"Comment structurer une API REST pour une app de livraison ?",content:`Je dveloppe une app de livraison type UberEats pour mon startup. J'ai besoin de conseils sur:

- Structure des endpoints (orders, users, restaurants)
- Gestion des statuts de commande en temps rel
- Architecture microservices vs monolithique

Budget: 50 crdits pour une session de 15 min avec un expert backend.`,authorPseudo:"StartupFounder_Marie",createdAt:Date.now()-1e3*60*45,commentCount:12,upvotes:45,mediaUrls:[],tags:["Backend","API","Architecture"],urgent:!1},{id:"demo-3",title:" Mon dploiement AWS crashe aprs 2 minutes",content:"Mon app Node.js crash systmatiquement aprs 2 minutes sur EC2. Les logs montrent:\n\n```\nFATAL ERROR: CALL_AND_RETRY_LAST Allocation failed - JavaScript heap out of memory\n```\n\nJ'ai augment la RAM de l'instance mais a ne change rien. C'est urgent, on a une demo client demain !",authorPseudo:"CTO_Thomas",createdAt:Date.now()-1e3*60*30,commentCount:5,upvotes:18,mediaUrls:[],tags:["AWS","Node.js","DevOps"],urgent:!0},{id:"demo-4",title:"Besoin d'aide pour optimiser mes requtes PostgreSQL",content:`Ma query principale prend 8 secondes sur 10M de lignes. Voici la query:

\`\`\`sql
SELECT * FROM orders 
JOIN users ON orders.user_id = users.id 
WHERE orders.created_at > '2024-01-01'
ORDER BY orders.total DESC;
\`\`\`

J'ai dj cr des index mais c'est toujours lent. Un DBA peut m'aider ?`,authorPseudo:"BackendEngineer_Sophie",createdAt:Date.now()-1e3*60*60,commentCount:9,upvotes:31,mediaUrls:[],tags:["PostgreSQL","Performance","Database"],urgent:!1},{id:"demo-5",title:"Comment implmenter Stripe Connect pour une marketplace ?",content:`Je cre une marketplace et j'ai besoin d'intgrer les paiements entre vendeurs et acheteurs.

Questions:
1. Stripe Connect Standard vs Express ?
2. Gestion des frais de plateforme (commission)
3. Payout aux vendeurs automatique vs manuel

Qui a de l'exprience avec a ? Prt  payer 30 crdits pour 10 min d'explication.`,authorPseudo:"IndieHacker_Jules",createdAt:Date.now()-1e3*60*90,commentCount:14,upvotes:52,mediaUrls:[],tags:["Stripe","Payments","Marketplace"],urgent:!1},{id:"demo-6",title:" Besoin de feedback sur mon design system",content:`Je suis en train de crer un design system pour ma startup SaaS. J'aimerais avoir l'avis d'un designer UX/UI expriment sur:

- Ma palette de couleurs
- Mes composants de base (boutons, inputs, cards)
- L'accessibilit

Je peux partager mon Figma en session vido.`,authorPseudo:"ProductDesigner_La",createdAt:Date.now()-1e3*60*120,commentCount:8,upvotes:27,mediaUrls:[],tags:["Design","UX/UI","Figma"],urgent:!1}],Db={"demo-1":[{id:"c1",text:"Le problme c'est que tu modifies `data` dans l'effet qui dpend de `data`. C'est un pattern anti-pattern classique !",authorPseudo:"SeniorDev_Marcus",createdAt:Date.now()-1e3*60*10},{id:"c2",text:"Utilise un useRef pour viter la boucle, ou mieux: un useCallback pour le fetch",authorPseudo:"ReactExpert_Nina",createdAt:Date.now()-1e3*60*8},{id:"c3",text:"Je peux t'aider en live, dispo maintenant pour 3 min ! ",authorPseudo:"Mentor_Pro",createdAt:Date.now()-1e3*60*5,isHelper:!0}],"demo-2":[{id:"c4",text:"Pour le temps rel, regarde WebSockets avec Socket.io, c'est parfait pour ton use case",authorPseudo:"FullStack_Antoine",createdAt:Date.now()-1e3*60*35},{id:"c5",text:"Commence monolithique, tu pourras toujours dcouper en microservices plus tard. C'est l'erreur classique des startups early stage.",authorPseudo:"TechLead_Emma",createdAt:Date.now()-1e3*60*30}]},Po={totalMentors:1247,activeNow:89,avgResponseTime:"47 sec",totalSessions:28453,satisfactionRate:98.2};function Vb({onPostClick:n}){const[e,t]=$.useState([]),[s,o]=$.useState(!0),[l,c]=$.useState(!1),[f,g]=$.useState("new"),[y,w]=$.useState(""),[T,x]=$.useState(!1);$.useEffect(()=>{try{const L=$c(Ti,"posts"),J=Yw(L,Xw("createdAt","desc"),EP(50)),Z=nE(J,K=>{const ue=K.docs.map(me=>{var se;return{id:me.id,...me.data(),createdAt:((se=me.data().createdAt)==null?void 0:se.toMillis())||Date.now()}});ue.length===0?(t(xi),x(!0)):(t(ue),x(!1)),o(!1)},K=>{console.log("Firestore error, using demo data:",K),t(xi),x(!0),o(!1)});return()=>Z()}catch{console.log("Firebase not configured, using demo data"),t(xi),x(!0),o(!1)}},[f]);const F=[...e.filter(L=>L.title.toLowerCase().includes(y.toLowerCase())||L.content.toLowerCase().includes(y.toLowerCase()))].sort((L,J)=>f==="new"?J.createdAt-L.createdAt:f==="hot"?(J.commentCount||0)-(L.commentCount||0):f==="top"?(J.upvotes||0)-(L.upvotes||0):0),B=({id:L,icon:J,label:Z})=>_.jsxs("button",{onClick:()=>g(L),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all ${f===L?"bg-blue-600 text-white shadow-lg shadow-blue-500/25":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white"}`,children:[_.jsx(J,{className:"w-4 h-4"}),Z]});return _.jsxs("div",{className:"max-w-3xl mx-auto",children:[_.jsxs("div",{className:"mb-8",children:[_.jsxs("div",{className:"flex items-center justify-between mb-6",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Forum d'entraide"}),_.jsx("p",{className:"text-slate-400",children:"Posez vos questions, trouvez des rponses"})]}),_.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white rounded-xl font-bold transition-all hover:scale-105 shadow-lg shadow-blue-500/25",children:[_.jsx(gb,{className:"w-5 h-5"}),"Nouveau Post"]})]}),_.jsxs("div",{className:"relative mb-4",children:[_.jsx(Uf,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-500"}),_.jsx("input",{type:"text",value:y,onChange:L=>w(L.target.value),placeholder:"Rechercher un problme...",className:"w-full pl-12 pr-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all"})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(B,{id:"new",icon:Li,label:"Rcent"}),_.jsx(B,{id:"hot",icon:cb,label:"Populaire"}),_.jsx(B,{id:"top",icon:Qp,label:"Top"})]})]}),T&&_.jsxs("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-xl flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:_.jsx(Wo,{className:"w-5 h-5 text-blue-400"})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-blue-300 font-medium",children:"Mode dmo"}),_.jsx("p",{className:"text-sm text-blue-400/70",children:"Ces posts sont des exemples. Crez le premier vrai post !"})]})]}),s?_.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[_.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),_.jsx("p",{className:"text-slate-400",children:"Chargement des posts..."})]}):F.length===0?_.jsxs("div",{className:"text-center py-16 bg-slate-800/30 border border-slate-700 rounded-2xl",children:[_.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:_.jsx(Uf,{className:"w-8 h-8 text-slate-600"})}),_.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aucun rsultat"}),_.jsx("p",{className:"text-slate-400 mb-6",children:"Essayez une autre recherche ou crez un nouveau post"}),_.jsx("button",{onClick:()=>c(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-medium transition-colors",children:"Crer un post"})]}):_.jsx("div",{className:"space-y-4",children:F.map(L=>_.jsx(Nb,{post:L,onClick:()=>n(L.id)},L.id))}),l&&_.jsx(bb,{onClose:()=>c(!1)})]})}function Lb({postId:n,isDemo:e,demoComments:t}){const[s,o]=$.useState([]),[l,c]=$.useState(""),[f,g]=$.useState(localStorage.getItem("userPseudo")||""),[y,w]=$.useState(!1);$.useEffect(()=>{if(e&&t){o(t);return}try{const k=$c(Ti,"posts",n,"comments"),F=Yw(k,Xw("createdAt","asc")),B=nE(F,L=>{const J=L.docs.map(Z=>{var K;return{id:Z.id,...Z.data(),createdAt:((K=Z.data().createdAt)==null?void 0:K.toMillis())||Date.now()}});o(J)},L=>{console.log("Firestore error:",L),t&&o(t)});return()=>B()}catch{console.log("Firebase not configured"),t&&o(t)}},[n,e,t]);const T=k=>{if(!k)return"maintenant";const F=Math.floor((Date.now()-k)/1e3);return F<60?`${F}s`:F<3600?`${Math.floor(F/60)}m`:F<86400?`${Math.floor(F/3600)}h`:`${Math.floor(F/86400)}j`},x=async k=>{if(k.preventDefault(),!!l.trim()){if(w(!0),f&&localStorage.setItem("userPseudo",f),e){o(F=>[...F,{id:`demo-${Date.now()}`,text:l.trim(),authorPseudo:f||"Anonyme",createdAt:Date.now()}]),c(""),w(!1);return}try{await tE($c(Ti,"posts",n,"comments"),{text:l.trim(),authorPseudo:f||"Anonyme",createdAt:Kw()});const F=qc(Ti,"posts",n);await eE(F,{commentCount:Qw(1)}),c("")}catch(F){console.error("Error adding comment:",F),o(B=>[...B,{id:`local-${Date.now()}`,text:l.trim(),authorPseudo:f||"Anonyme",createdAt:Date.now()}]),c("")}finally{w(!1)}}};return _.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-2xl p-6",children:[_.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[_.jsx(Il,{className:"w-5 h-5 text-blue-400"}),"Commentaires (",s.length,")"]}),_.jsxs("form",{onSubmit:x,className:"mb-6",children:[_.jsxs("div",{className:"flex gap-3 mb-3",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center flex-shrink-0",children:_.jsx(Pi,{className:"w-5 h-5 text-white"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("input",{type:"text",value:f,onChange:k=>g(k.target.value),placeholder:"Votre pseudo",className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white mb-2 focus:outline-none focus:border-blue-500 transition-colors"}),_.jsx("textarea",{value:l,onChange:k=>c(k.target.value),placeholder:"Ajouter un commentaire... (Vous pouvez proposer une solution ou poser une question)",rows:3,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 transition-colors resize-none"})]})]}),_.jsx("div",{className:"flex justify-end",children:_.jsxs("button",{type:"submit",disabled:y||!l.trim(),className:"flex items-center gap-2 px-5 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-700 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all",children:[y?_.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):_.jsx(AE,{className:"w-4 h-4"}),"Commenter"]})})]}),s.length===0?_.jsxs("div",{className:"text-center py-8",children:[_.jsx("div",{className:"w-12 h-12 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-3",children:_.jsx(Il,{className:"w-6 h-6 text-slate-600"})}),_.jsx("p",{className:"text-slate-500",children:"Aucun commentaire. Soyez le premier  aider !"})]}):_.jsx("div",{className:"space-y-4",children:s.map(k=>_.jsxs("div",{className:"flex gap-3 group",children:[_.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${k.isHelper?"bg-gradient-to-br from-green-500 to-green-700":"bg-slate-700"}`,children:k.isHelper?_.jsx(SE,{className:"w-5 h-5 text-white"}):_.jsx(Pi,{className:"w-5 h-5 text-slate-400"})}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:`rounded-xl p-4 ${k.isHelper?"bg-green-500/10 border border-green-500/30":"bg-slate-800"}`,children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx("span",{className:`font-medium ${k.isHelper?"text-green-300":"text-white"}`,children:k.authorPseudo||"Anonyme"}),k.isHelper&&_.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-300 text-xs rounded-full",children:"Propose d'aider"}),_.jsxs("span",{className:"text-slate-500 text-xs flex items-center gap-1",children:[_.jsx(Li,{className:"w-3 h-3"}),T(k.createdAt)]})]}),_.jsx("p",{className:"text-slate-300 leading-relaxed",children:k.text})]}),k.isHelper&&_.jsxs("button",{className:"mt-2 flex items-center gap-2 text-sm text-green-400 hover:text-green-300 transition-colors",children:[_.jsx(xE,{className:"w-4 h-4"}),"Voir les disponibilits"]})]})]},k.id))})]})}function Ob({postId:n,onBack:e}){const[t,s]=$.useState(null),[o,l]=$.useState(!0),[c,f]=$.useState(!1),[g,y]=$.useState(!1);$.useEffect(()=>{(async()=>{var F;const k=xi.find(B=>B.id===n);if(k){s(k),y(!0),l(!1);return}try{const B=qc(Ti,"posts",n),L=await IP(B);L.exists()&&s({id:L.id,...L.data(),createdAt:((F=L.data().createdAt)==null?void 0:F.toMillis())||Date.now()})}catch(B){console.log("Error fetching post:",B)}l(!1)})()},[n]);const w=x=>x?new Date(x).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",T=async()=>{if(g){s(x=>({...x,upvotes:(x.upvotes||0)+1}));return}try{const x=qc(Ti,"posts",n);await eE(x,{upvotes:Qw(1)}),s(k=>({...k,upvotes:(k.upvotes||0)+1}))}catch(x){console.log("Error upvoting:",x)}};return o?_.jsx("div",{className:"flex justify-center py-16",children:_.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):t?_.jsxs("div",{className:"max-w-4xl mx-auto",children:[_.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-400 hover:text-white mb-6 transition-colors group",children:[_.jsx(HN,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),"Retour au feed"]}),_.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[_.jsxs("div",{className:"lg:col-span-2",children:[_.jsxs("article",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-6 mb-6",children:[t.urgent&&_.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-500/20 border border-red-500/30 rounded-lg mb-4",children:[_.jsx(Kp,{className:"w-4 h-4 text-red-400"}),_.jsx("span",{className:"text-sm text-red-300 font-medium",children:"Question urgente"})]}),_.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[_.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center shadow-lg",children:_.jsx(Pi,{className:"w-6 h-6 text-white"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{className:"font-bold text-white text-lg",children:t.authorPseudo||"Anonyme"}),_.jsxs("p",{className:"text-sm text-slate-400 flex items-center gap-2",children:[_.jsx(Li,{className:"w-3 h-3"}),w(t.createdAt)]})]})]}),_.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-4 leading-tight",children:t.title}),t.tags&&t.tags.length>0&&_.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:t.tags.map((x,k)=>_.jsx("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 text-sm rounded-full border border-blue-500/30",children:x},k))}),_.jsx("div",{className:"prose prose-invert max-w-none mb-6",children:_.jsx("div",{className:"text-slate-300 whitespace-pre-wrap leading-relaxed",children:t.content.split("```").map((x,k)=>{if(k%2===1){const F=x.split(`
`);F[0];const B=F.slice(1).join(`
`);return _.jsx("pre",{className:"bg-slate-900 border border-slate-700 rounded-lg p-4 overflow-x-auto my-4",children:_.jsx("code",{className:"text-sm text-green-400 font-mono",children:B})},k)}return _.jsx("span",{children:x},k)})})}),t.mediaUrls&&t.mediaUrls.length>0&&_.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:t.mediaUrls.map((x,k)=>_.jsx("img",{src:x,alt:`Media ${k+1}`,className:"rounded-lg w-full h-48 object-cover cursor-pointer hover:opacity-90 transition-opacity border border-slate-700",onClick:()=>window.open(x,"_blank")},k))}),_.jsxs("div",{className:"flex items-center gap-3 pt-6 border-t border-slate-700",children:[_.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-blue-600 rounded-lg text-slate-300 hover:text-white transition-all",children:[_.jsx(IE,{className:"w-5 h-5"}),_.jsx("span",{className:"font-bold",children:t.upvotes||0})]}),_.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-white transition-all",children:[_.jsx(wb,{className:"w-4 h-4"}),_.jsx("span",{className:"hidden sm:inline",children:"Partager"})]}),_.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-white transition-all",children:[_.jsx(QN,{className:"w-4 h-4"}),_.jsx("span",{className:"hidden sm:inline",children:"Sauvegarder"})]}),_.jsx("button",{className:"ml-auto flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-white transition-all",children:_.jsx(lb,{className:"w-4 h-4"})})]})]}),_.jsx(Lb,{postId:n,isDemo:g,demoComments:Db[n]})]}),_.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[_.jsxs("div",{className:"bg-gradient-to-br from-green-600/20 to-green-700/20 border border-green-500/30 rounded-2xl p-6",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[_.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:_.jsx(Sl,{className:"w-6 h-6 text-green-400"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-white",children:"Vous pouvez aider ?"}),_.jsx("p",{className:"text-sm text-green-300/70",children:"Gagnez des crdits"})]})]}),_.jsx("p",{className:"text-sm text-slate-300 mb-4",children:"Proposez vos disponibilits pour une session de 3 minutes avec l'auteur."}),_.jsxs("button",{onClick:()=>f(!0),className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all hover:scale-105 flex items-center justify-center gap-2",children:[_.jsx(xE,{className:"w-5 h-5"}),"Je peux aider"]})]}),_.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-6",children:[_.jsx("h3",{className:"font-bold text-white mb-4",children:" propos de l'auteur"}),_.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[_.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center",children:_.jsx(Pi,{className:"w-6 h-6 text-white"})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-medium text-white",children:t.authorPseudo}),_.jsx("p",{className:"text-sm text-slate-400",children:"Membre depuis 2024"})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[_.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3",children:[_.jsx("p",{className:"text-xl font-bold text-white",children:"12"}),_.jsx("p",{className:"text-xs text-slate-400",children:"Questions"})]}),_.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3",children:[_.jsx("p",{className:"text-xl font-bold text-white",children:"89%"}),_.jsx("p",{className:"text-xs text-slate-400",children:"Rsolues"})]})]})]}),_.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-6",children:[_.jsx("h3",{className:"font-bold text-white mb-4",children:"Questions similaires"}),_.jsx("div",{className:"space-y-3",children:xi.slice(0,3).filter(x=>x.id!==n).map(x=>_.jsx("div",{className:"text-sm text-slate-400 hover:text-white cursor-pointer transition-colors line-clamp-2",children:x.title},x.id))})]})]})]}),c&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl p-6 max-w-md w-full",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[_.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:_.jsx(SE,{className:"w-6 h-6 text-green-400"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-xl font-bold text-white",children:"Proposer votre aide"}),_.jsx("p",{className:"text-sm text-slate-400",children:"Slectionnez vos disponibilits"})]})]}),_.jsx("div",{className:"space-y-3 mb-6",children:["Maintenant","Dans 30 min","Dans 1 heure","Demain matin"].map((x,k)=>_.jsx("button",{className:"w-full py-3 px-4 bg-slate-800 hover:bg-slate-700 border border-slate-700 hover:border-blue-500 rounded-xl text-left text-white transition-all",children:x},k))}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl transition-colors",children:"Annuler"}),_.jsx("button",{onClick:()=>{alert("Demande envoye ! (Demo)"),f(!1)},className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-colors",children:"Envoyer"})]})]})})]}):_.jsxs("div",{className:"text-center py-16",children:[_.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Post non trouv"}),_.jsx("button",{onClick:e,className:"text-blue-400 hover:text-blue-300",children:"Retour au feed"})]})}function Mb(){const n=xi.filter(t=>t.urgent),e=xi.filter(t=>!t.urgent);return _.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[_.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Tableau de bord Mentor"}),_.jsxs("p",{className:"text-slate-400",children:["Bienvenue, ",_.jsx("span",{className:"text-blue-400 font-semibold",children:"Marcus Chen"}),". Vous avez 3 nouvelles opportunits d'aide."]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl px-4 py-2 flex items-center gap-3",children:[_.jsx("div",{className:"p-1.5 bg-blue-500/10 rounded-lg",children:_.jsx(Wo,{className:"w-5 h-5 text-blue-400"})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider",children:"Crdits"}),_.jsxs("p",{className:"text-lg font-bold text-white",children:["450 ",_.jsx("span",{className:"text-xs text-slate-400",children:"points"})]})]})]}),_.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center shadow-lg cursor-pointer",children:_.jsx(Pi,{className:"w-6 h-6 text-white"})})]})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-10",children:[_.jsx(dc,{icon:_.jsx(Ff,{className:"text-yellow-400"}),label:"Note moyenne",value:"4.95"}),_.jsx(dc,{icon:_.jsx(Sl,{className:"text-blue-400"}),label:"Sessions",value:"156"}),_.jsx(dc,{icon:_.jsx(Li,{className:"text-green-400"}),label:"Temps total",value:"7.8h"}),_.jsx(dc,{icon:_.jsx(sb,{className:"text-purple-400"}),label:"Gains (estim.)",value:"1,248"})]}),_.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[_.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[_.jsx(GN,{className:"w-5 h-5 text-red-500"}),"Requtes prioritaires"]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{className:"p-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-400 hover:text-white transition-colors",children:_.jsx(Uf,{className:"w-4 h-4"})}),_.jsx("button",{className:"p-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-400 hover:text-white transition-colors",children:_.jsx(ob,{className:"w-4 h-4"})})]})]}),_.jsx("div",{className:"space-y-4",children:n.map(t=>_.jsx(tv,{post:t,priority:!0},t.id))}),_.jsx("h2",{className:"text-xl font-bold text-white pt-6",children:"Recommand pour votre expertise"}),_.jsx("div",{className:"space-y-4",children:e.slice(0,3).map(t=>_.jsx(tv,{post:t},t.id))})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-6",children:[_.jsxs("h3",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[_.jsx(Qp,{className:"w-5 h-5 text-blue-400"}),"Activit rcente"]}),_.jsxs("div",{className:"space-y-6",children:[_.jsx(af,{title:"Session termine",desc:"Aide sur Bug React - Julia S.",time:"Il y a 2h",points:"+30"}),_.jsx(af,{title:"Commentaire aim",desc:"Sur le post API Rest de Thomas",time:"Il y a 5h",points:"+5"}),_.jsx(af,{title:"Session termine",desc:"Architecture Node - Marc L.",time:"Hier",points:"+50"})]}),_.jsx("button",{className:"w-full mt-6 py-2 text-sm font-medium text-slate-400 hover:text-white transition-colors",children:"Voir tout l'historique"})]}),_.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-6",children:[_.jsx("h3",{className:"font-bold text-white mb-4",children:"Vos expertises stars"}),_.jsxs("div",{className:"space-y-3",children:[_.jsx(lf,{name:"React",percent:95,color:"bg-blue-500"}),_.jsx(lf,{name:"Node.js",percent:82,color:"bg-green-500"}),_.jsx(lf,{name:"Architecture",percent:64,color:"bg-purple-500"})]})]})]})]})]})}function dc({icon:n,label:e,value:t}){return _.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-6 hover:bg-slate-800 transition-colors",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[_.jsx("div",{className:"p-2 bg-slate-900 rounded-lg",children:n}),_.jsx("span",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:e})]}),_.jsx("p",{className:"text-2xl font-bold text-white",children:t})]})}function tv({post:n,priority:e}){return _.jsxs("div",{className:`bg-slate-800/30 border rounded-2xl p-5 hover:bg-slate-800/60 transition-all cursor-pointer group ${e?"border-red-500/30":"border-slate-700"}`,children:[_.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-blue-400 transition-colors mb-2",children:n.title}),_.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(t=>_.jsx("span",{className:"px-2 py-0.5 bg-slate-900 border border-slate-700 text-slate-400 text-[10px] rounded-full uppercase tracking-tighter",children:t},t))})]}),_.jsxs("div",{className:"text-right",children:[_.jsx("p",{className:"text-blue-400 font-bold",children:"30 pts"}),_.jsx("p",{className:"text-[10px] text-slate-500",children:"3 minutes"})]})]}),_.jsx("p",{className:"text-sm text-slate-400 line-clamp-2 mb-4",children:n.content}),_.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-700/50",children:[_.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[_.jsx(Pi,{className:"w-3 h-3"}),_.jsxs("span",{children:["Post par ",n.authorPseudo]}),_.jsx("span",{children:""}),_.jsx(Li,{className:"w-3 h-3"}),_.jsx("span",{children:e?"URGENT":"Il y a 20 min"})]}),_.jsx("button",{className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all hover:scale-105 ${e?"bg-red-600 hover:bg-red-500 text-white shadow-lg shadow-red-500/20":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:"Proposer mon aide"})]})]})}function af({title:n,desc:e,time:t,points:s}){return _.jsxs("div",{className:"flex gap-4",children:[_.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-2 shrink-0"}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[_.jsx("p",{className:"text-sm font-bold text-white",children:n}),_.jsx("span",{className:"text-[10px] text-slate-500 uppercase",children:t})]}),_.jsx("p",{className:"text-xs text-slate-400 line-clamp-1",children:e})]}),_.jsx("div",{className:"text-sm font-bold text-blue-400",children:s})]})}function lf({name:n,percent:e,color:t}){return _.jsxs("div",{className:"space-y-1.5",children:[_.jsxs("div",{className:"flex justify-between text-xs font-medium",children:[_.jsx("span",{className:"text-slate-300",children:n}),_.jsxs("span",{className:"text-slate-500",children:[e,"%"]})]}),_.jsx("div",{className:"h-1.5 w-full bg-slate-900 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full ${t} rounded-full transition-all duration-1000`,style:{width:`${e}%`}})})]})}function jb(){const n=mv(),[e,t]=$.useState(null),[s,o]=$.useState(!0),[l,c]=$.useState("user");$.useEffect(()=>{const g=qS(jf,y=>{y?(t(y),o(!1)):jS(jf).catch(w=>{console.log("Auth error, continuing without auth:",w),o(!1)})});return setTimeout(()=>o(!1),2e3),()=>g()},[]);const f=()=>{l==="user"?(c("mentor"),n("/mentor")):(c("user"),n("/feed"))};return s?_.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),_.jsx("p",{className:"text-slate-400",children:"Chargement de Micro-Mentor..."})]})}):_.jsxs("div",{className:"min-h-screen bg-slate-900 text-white",children:[_.jsxs("div",{className:"fixed inset-0 -z-10",children:[_.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-900/20 via-slate-900 to-black"}),_.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),_.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),_.jsxs("nav",{className:"sticky top-0 w-full px-6 py-4 flex justify-between items-center bg-slate-900/80 backdrop-blur-xl border-b border-slate-800/50 z-40",children:[_.jsxs("div",{onClick:()=>{c("user"),n("/")},className:"flex items-center gap-3 cursor-pointer group",children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center shadow-lg shadow-blue-500/25 group-hover:shadow-blue-500/40 transition-all",children:_.jsx(Wo,{className:"w-5 h-5 text-white"})}),_.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-900 animate-pulse"})]}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-xl font-bold text-white",children:"Micro-Mentor"}),_.jsx("p",{className:"text-xs text-slate-400",children:"L'expertise en 3 minutes"})]})]}),_.jsxs("div",{className:"flex gap-3 items-center",children:[_.jsx("div",{className:"hidden md:flex items-center gap-6 mr-4",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),_.jsxs("span",{className:"text-sm text-slate-400",children:[_.jsx("span",{className:"text-white font-bold",children:Po.activeNow})," mentors en ligne"]})]})}),_.jsx("button",{onClick:f,className:`px-4 py-2 rounded-lg font-bold transition-all border shadow-lg ${l==="user"?"bg-slate-800 border-slate-700 text-slate-300 hover:text-white hover:bg-slate-700":"bg-blue-600 border-blue-500 text-white shadow-blue-500/20"}`,children:l==="user"?"Vue Mentor ":"Vue Utilisateur "}),l==="user"&&_.jsx("button",{onClick:()=>n("/feed"),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg font-medium transition-all border border-slate-700 hidden sm:block",children:"Explorer"})]})]}),_.jsx("main",{children:_.jsxs(zx,{children:[_.jsx(el,{path:"/",element:_.jsx(Ub,{navigate:n})}),_.jsx(el,{path:"/feed",element:_.jsx(Fb,{navigate:n})}),_.jsx(el,{path:"/post/:postId",element:_.jsx(Bb,{navigate:n})}),_.jsx(el,{path:"/mentor",element:_.jsx(zb,{})})]})}),_.jsxs("footer",{className:"border-t border-slate-800 mt-20 py-12 px-6",children:[_.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8",children:[_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center",children:_.jsx(Wo,{className:"w-4 h-4 text-white"})}),_.jsx("span",{className:"font-bold text-white",children:"Micro-Mentor"})]}),_.jsx("p",{className:"text-sm text-slate-400",children:"L'expertise technique en 3 minutes. Rsolvez vos problmes bloquants instantanment."})]}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-white mb-3",children:"Produit"}),_.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[_.jsx("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Comment a marche"}),_.jsx("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Tarification"}),_.jsx("li",{className:"hover:text-white cursor-pointer transition-colors",children:"API"})]})]}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-white mb-3",children:"Communaut"}),_.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[_.jsx("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Devenir Mentor"}),_.jsx("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Top Experts"}),_.jsx("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Blog"})]})]}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-white mb-3",children:"Lgal"}),_.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[_.jsx("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Conditions d'utilisation"}),_.jsx("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Confidentialit"}),_.jsx("li",{className:"hover:text-white cursor-pointer transition-colors",children:"Contact"})]})]})]}),_.jsx("div",{className:"max-w-6xl mx-auto mt-8 pt-8 border-t border-slate-800 text-center text-sm text-slate-500",children:" 2024 Micro-Mentor. Tous droits rservs."})]})]})}function Ub({navigate:n}){return _.jsxs("div",{className:"overflow-hidden",children:[_.jsxs("section",{className:"max-w-6xl mx-auto px-6 py-20 text-center",children:[_.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-500/10 border border-blue-500/20 text-sm text-blue-400 mb-8",children:[_.jsx(xb,{className:"w-4 h-4"}),_.jsx("span",{children:"Nouvelle plateforme  Accs anticip"})]}),_.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold tracking-tight leading-tight text-white mb-6",children:["Bloqu sur un",_.jsx("br",{}),_.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-blue-500 to-purple-500",children:"problme technique ?"})]}),_.jsxs("p",{className:"text-xl md:text-2xl text-slate-400 max-w-3xl mx-auto mb-10 leading-relaxed",children:["Connectez-vous avec un expert en ",_.jsx("span",{className:"text-white font-semibold",children:"moins de 60 secondes"}),".",_.jsx("br",{className:"hidden md:block"}),"Sessions vido de 3 minutes. Rsolvez, apprenez, avancez."]}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[_.jsxs("button",{onClick:()=>n("/feed"),className:"group relative px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl font-bold text-lg shadow-2xl shadow-blue-500/25 hover:shadow-blue-500/40 transition-all hover:scale-105 overflow-hidden",children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),_.jsxs("span",{className:"flex items-center gap-2",children:[_.jsx(Wo,{className:"w-5 h-5"}),"Poser une question",_.jsx(XN,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),_.jsx("button",{className:"px-8 py-4 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-white rounded-xl font-bold text-lg transition-all hover:scale-105",children:_.jsxs("span",{className:"flex items-center gap-2",children:[_.jsx(Sl,{className:"w-5 h-5"}),"Voir une dmo"]})})]}),_.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-sm text-slate-400",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(X_,{className:"w-4 h-4 text-green-500"}),_.jsx("span",{children:"Paiement scuris"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Ff,{className:"w-4 h-4 text-yellow-500"}),_.jsx("span",{children:"98% satisfaction"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Z_,{className:"w-4 h-4 text-blue-500"}),_.jsx("span",{children:"1,200+ mentors vrifis"})]})]})]}),_.jsx("section",{className:"bg-slate-800/30 border-y border-slate-800 py-12",children:_.jsx("div",{className:"max-w-6xl mx-auto px-6",children:_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-8 text-center",children:[_.jsx(Za,{value:Po.totalMentors.toLocaleString(),label:"Mentors"}),_.jsx(Za,{value:Po.activeNow,label:"En ligne maintenant",highlight:!0}),_.jsx(Za,{value:Po.avgResponseTime,label:"Temps de rponse moyen"}),_.jsx(Za,{value:Po.totalSessions.toLocaleString(),label:"Sessions compltes"}),_.jsx(Za,{value:`${Po.satisfactionRate}%`,label:"Satisfaction"})]})})}),_.jsxs("section",{className:"max-w-6xl mx-auto px-6 py-20",children:[_.jsxs("div",{className:"text-center mb-16",children:[_.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Comment a marche ?"}),_.jsx("p",{className:"text-slate-400 text-lg",children:"3 tapes simples pour rsoudre votre problme"})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[_.jsx(uf,{number:"1",icon:_.jsx(Il,{className:"w-8 h-8"}),title:"Dcrivez votre problme",description:"Postez votre question avec du contexte, du code, des captures d'cran. La communaut rpond en quelques minutes."}),_.jsx(uf,{number:"2",icon:_.jsx(Z_,{className:"w-8 h-8"}),title:"Un expert propose son aide",description:"Les mentors qualifis consultent votre question et proposent leurs disponibilits pour une session."}),_.jsx(uf,{number:"3",icon:_.jsx(Sl,{className:"w-8 h-8"}),title:"Session vido en 3 min",description:"Connectez-vous en vido, partagez votre cran, rsolvez ensemble. Simple, rapide, efficace."})]})]}),_.jsx("section",{className:"max-w-6xl mx-auto px-6 py-20",children:_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[_.jsx(So,{icon:_.jsx(Li,{className:"w-7 h-7 text-blue-400"}),title:"Sessions de 3 minutes",description:"Format court qui force la concision. Pas de bavardage, que des solutions."}),_.jsx(So,{icon:_.jsx(Qp,{className:"w-7 h-7 text-green-400"}),title:"Time Banking",description:"Aidez 10 min, recevez 10 min. Un systme d'change quitable."}),_.jsx(So,{icon:_.jsx(X_,{className:"w-7 h-7 text-purple-400"}),title:"Mentors vrifis",description:"Chaque expert est valid. Notes, avis, historique visible."}),_.jsx(So,{icon:_.jsx(Wo,{className:"w-7 h-7 text-yellow-400"}),title:"Matching intelligent",description:"Notre algo trouve l'expert parfait pour votre problme spcifique."}),_.jsx(So,{icon:_.jsx(Il,{className:"w-7 h-7 text-pink-400"}),title:"Chat enrichi",description:"Partagez du code, des fichiers, des liens pendant la session."}),_.jsx(So,{icon:_.jsx(Ff,{className:"w-7 h-7 text-orange-400"}),title:"Satisfaction garantie",description:"Pas satisfait ? Session rembourse. Sans condition."})]})}),_.jsx("section",{className:"max-w-4xl mx-auto px-6 py-20 text-center",children:_.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/30 rounded-3xl p-12",children:[_.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Prt  dbloquer votre situation ?"}),_.jsx("p",{className:"text-slate-400 text-lg mb-8",children:"Rejoignez des milliers de dveloppeurs qui avancent plus vite."}),_.jsx("button",{onClick:()=>n("/feed"),className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl font-bold text-lg shadow-2xl shadow-blue-500/25 hover:shadow-blue-500/40 transition-all hover:scale-105",children:"Commencer maintenant  C'est gratuit"})]})})]})}function Za({value:n,label:e,highlight:t}){return _.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:`text-3xl md:text-4xl font-bold ${t?"text-green-400":"text-white"}`,children:n}),_.jsx("p",{className:"text-sm text-slate-400 mt-1",children:e})]})}function uf({number:n,icon:e,title:t,description:s}){return _.jsxs("div",{className:"relative bg-slate-800/50 border border-slate-700 rounded-2xl p-8 hover:bg-slate-800 transition-all group",children:[_.jsx("div",{className:"absolute -top-4 -left-4 w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-xl flex items-center justify-center text-white font-bold shadow-lg",children:n}),_.jsx("div",{className:"mb-4 text-blue-400 group-hover:scale-110 transition-transform",children:e}),_.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t}),_.jsx("p",{className:"text-slate-400",children:s})]})}function So({icon:n,title:e,description:t}){return _.jsxs("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6 hover:bg-slate-800/50 hover:border-slate-600 transition-all group",children:[_.jsx("div",{className:"mb-4 p-3 bg-slate-800 rounded-xl w-fit group-hover:scale-110 transition-transform",children:n}),_.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:e}),_.jsx("p",{className:"text-sm text-slate-400",children:t})]})}function Fb({navigate:n}){return _.jsx("div",{className:"py-8 px-6",children:_.jsx(Vb,{onPostClick:e=>n(`/post/${e}`)})})}function Bb({navigate:n}){const{postId:e}=Ax();return _.jsx("div",{className:"py-8 px-6",children:_.jsx(Ob,{postId:e,onBack:()=>n("/feed")})})}function zb(){return _.jsx("div",{className:"py-8 px-6",children:_.jsx(Mb,{})})}function $b(){return _.jsx(d1,{basename:"/Micro-mentor",children:_.jsx(jb,{})})}qT.createRoot(document.getElementById("root")).render(_.jsx(MT.StrictMode,{children:_.jsx($b,{})}));
